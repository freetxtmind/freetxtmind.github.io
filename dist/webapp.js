(function(t){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var n;if(typeof window!=="undefined"){n=window}else if(typeof global!=="undefined"){n=global}else if(typeof self!=="undefined"){n=self}else{n=this}n.jsyaml=t()}})(function(){var t,n,e;return function a(o,u,s){function c(e,t){if(!u[e]){if(!o[e]){var n=typeof require=="function"&&require;if(!t&&n)return n(e,!0);if(f)return f(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[e]={exports:{}};o[e][0].call(i.exports,function(t){var n=o[e][1][t];return c(n?n:t)},i,i.exports,a,o,u,s)}return u[e].exports}var f=typeof require=="function"&&require;for(var t=0;t<s.length;t++)c(s[t]);return c}({1:[function(t,n,e){"use strict";var r=t("./js-yaml/loader");var i=t("./js-yaml/dumper");function a(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}n.exports.Type=t("./js-yaml/type");n.exports.Schema=t("./js-yaml/schema");n.exports.FAILSAFE_SCHEMA=t("./js-yaml/schema/failsafe");n.exports.JSON_SCHEMA=t("./js-yaml/schema/json");n.exports.CORE_SCHEMA=t("./js-yaml/schema/core");n.exports.DEFAULT_SAFE_SCHEMA=t("./js-yaml/schema/default_safe");n.exports.DEFAULT_FULL_SCHEMA=t("./js-yaml/schema/default_full");n.exports.load=r.load;n.exports.loadAll=r.loadAll;n.exports.safeLoad=r.safeLoad;n.exports.safeLoadAll=r.safeLoadAll;n.exports.dump=i.dump;n.exports.safeDump=i.safeDump;n.exports.YAMLException=t("./js-yaml/exception");n.exports.MINIMAL_SCHEMA=t("./js-yaml/schema/failsafe");n.exports.SAFE_SCHEMA=t("./js-yaml/schema/default_safe");n.exports.DEFAULT_SCHEMA=t("./js-yaml/schema/default_full");n.exports.scan=a("scan");n.exports.parse=a("parse");n.exports.compose=a("compose");n.exports.addConstructor=a("addConstructor")},{"./js-yaml/dumper":3,"./js-yaml/exception":4,"./js-yaml/loader":5,"./js-yaml/schema":7,"./js-yaml/schema/core":8,"./js-yaml/schema/default_full":9,"./js-yaml/schema/default_safe":10,"./js-yaml/schema/failsafe":11,"./js-yaml/schema/json":12,"./js-yaml/type":13}],2:[function(t,n,e){"use strict";function r(t){return typeof t==="undefined"||t===null}function i(t){return typeof t==="object"&&t!==null}function a(t){if(Array.isArray(t))return t;else if(r(t))return[];return[t]}function o(t,n){var e,r,i,a;if(n){a=Object.keys(n);for(e=0,r=a.length;e<r;e+=1){i=a[e];t[i]=n[i]}}return t}function u(t,n){var e="",r;for(r=0;r<n;r+=1){e+=t}return e}function s(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}n.exports.isNothing=r;n.exports.isObject=i;n.exports.toArray=a;n.exports.repeat=u;n.exports.isNegativeZero=s;n.exports.extend=o},{}],3:[function(t,n,e){"use strict";var s=t("./common");var p=t("./exception");var r=t("./schema/default_full");var i=t("./schema/default_safe");var f=Object.prototype.toString;var c=Object.prototype.hasOwnProperty;var a=9;var d=10;var o=32;var u=33;var l=34;var h=35;var v=37;var g=38;var y=39;var m=42;var x=44;var _=45;var w=58;var b=62;var M=63;var k=64;var S=91;var A=93;var C=96;var N=123;var T=124;var E=125;var j={};j[0]="\\0";j[7]="\\a";j[8]="\\b";j[9]="\\t";j[10]="\\n";j[11]="\\v";j[12]="\\f";j[13]="\\r";j[27]="\\e";j[34]='\\"';j[92]="\\\\";j[133]="\\N";j[160]="\\_";j[8232]="\\L";j[8233]="\\P";var O=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function L(t,n){var e,r,i,a,o,u,s;if(n===null)return{};e={};r=Object.keys(n);for(i=0,a=r.length;i<a;i+=1){o=r[i];u=String(n[o]);if(o.slice(0,2)==="!!"){o="tag:yaml.org,2002:"+o.slice(2)}s=t.compiledTypeMap["fallback"][o];if(s&&c.call(s.styleAliases,u)){u=s.styleAliases[u]}e[o]=u}return e}function I(t){var n,e,r;n=t.toString(16).toUpperCase();if(t<=255){e="x";r=2}else if(t<=65535){e="u";r=4}else if(t<=4294967295){e="U";r=8}else{throw new p("code point within a string may not be greater than 0xFFFFFFFF")}return"\\"+e+s.repeat("0",r-n.length)+n}function P(t){this.schema=t["schema"]||r;this.indent=Math.max(1,t["indent"]||2);this.skipInvalid=t["skipInvalid"]||false;this.flowLevel=s.isNothing(t["flowLevel"])?-1:t["flowLevel"];this.styleMap=L(this.schema,t["styles"]||null);this.sortKeys=t["sortKeys"]||false;this.lineWidth=t["lineWidth"]||80;this.noRefs=t["noRefs"]||false;this.noCompatMode=t["noCompatMode"]||false;this.condenseFlow=t["condenseFlow"]||false;this.implicitTypes=this.schema.compiledImplicit;this.explicitTypes=this.schema.compiledExplicit;this.tag=null;this.result="";this.duplicates=[];this.usedDuplicates=null}function R(t,n){var e=s.repeat(" ",n),r=0,i=-1,a="",o,u=t.length;while(r<u){i=t.indexOf("\n",r);if(i===-1){o=t.slice(r);r=u}else{o=t.slice(r,i+1);r=i+1}if(o.length&&o!=="\n")a+=e;a+=o}return a}function D(t,n){return"\n"+s.repeat(" ",t.indent*n)}function z(t,n){var e,r,i;for(e=0,r=t.implicitTypes.length;e<r;e+=1){i=t.implicitTypes[e];if(i.resolve(n)){return true}}return false}function F(t){return t===o||t===a}function B(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==65279||65536<=t&&t<=1114111}function q(t){return B(t)&&t!==65279&&t!==x&&t!==S&&t!==A&&t!==N&&t!==E&&t!==w&&t!==h}function U(t){return B(t)&&t!==65279&&!F(t)&&t!==_&&t!==M&&t!==w&&t!==x&&t!==S&&t!==A&&t!==N&&t!==E&&t!==h&&t!==g&&t!==m&&t!==u&&t!==T&&t!==b&&t!==y&&t!==l&&t!==v&&t!==k&&t!==C}var H=1,Y=2,G=3,V=4,X=5;function W(t,n,e,r,i){var a;var o;var u=false;var s=false;var c=r!==-1;var f=-1;var l=U(t.charCodeAt(0))&&!F(t.charCodeAt(t.length-1));if(n){for(a=0;a<t.length;a++){o=t.charCodeAt(a);if(!B(o)){return X}l=l&&q(o)}}else{for(a=0;a<t.length;a++){o=t.charCodeAt(a);if(o===d){u=true;if(c){s=s||a-f-1>r&&t[f+1]!==" ";f=a}}else if(!B(o)){return X}l=l&&q(o)}s=s||c&&(a-f-1>r&&t[f+1]!==" ")}if(!u&&!s){return l&&!i(t)?H:Y}if(t[0]===" "&&e>9){return X}return s?V:G}function Z(i,a,o,u){i.dump=function(){if(a.length===0){return"''"}if(!i.noCompatMode&&O.indexOf(a)!==-1){return"'"+a+"'"}var t=i.indent*Math.max(1,o);var n=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-t);var e=u||i.flowLevel>-1&&o>=i.flowLevel;function r(t){return z(i,t)}switch(W(a,e,i.indent,n,r)){case H:return a;case Y:return"'"+a.replace(/'/g,"''")+"'";case G:return"|"+$(a,i.indent)+J(R(a,t));case V:return">"+$(a,i.indent)+J(R(K(a,n),t));case X:return'"'+tt(a,n)+'"';default:throw new p("impossible error: invalid scalar style")}}()}function $(t,n){var e=t[0]===" "?String(n):"";var r=t[t.length-1]==="\n";var i=r&&(t[t.length-2]==="\n"||t==="\n");var a=i?"+":r?"":"-";return e+a+"\n"}function J(t){return t[t.length-1]==="\n"?t.slice(0,-1):t}function K(n,e){var r=/(\n+)([^\n]*)/g;var t=function(){var t=n.indexOf("\n");t=t!==-1?t:n.length;r.lastIndex=t;return Q(n.slice(0,t),e)}();var i=n[0]==="\n"||n[0]===" ";var a;var o;while(o=r.exec(n)){var u=o[1],s=o[2];a=s[0]===" ";t+=u+(!i&&!a&&s!==""?"\n":"")+Q(s,e);i=a}return t}function Q(t,n){if(t===""||t[0]===" ")return t;var e=/ [^ ]/g;var r;var i=0,a,o=0,u=0;var s="";while(r=e.exec(t)){u=r.index;if(u-i>n){a=o>i?o:u;s+="\n"+t.slice(i,a);i=a+1}o=u}s+="\n";if(t.length-i>n&&o>i){s+=t.slice(i,o)+"\n"+t.slice(o+1)}else{s+=t.slice(i)}return s.slice(1)}function tt(t){var n="";var e;var r;for(var i=0;i<t.length;i++){e=t.charCodeAt(i);r=j[e];n+=!r&&B(e)?t[i]:r||I(e)}return n}function nt(t,n,e){var r="",i=t.tag,a,o;for(a=0,o=e.length;a<o;a+=1){if(ot(t,n,e[a],false,false)){if(a!==0)r+=","+(!t.condenseFlow?" ":"");r+=t.dump}}t.tag=i;t.dump="["+r+"]"}function et(t,n,e,r){var i="",a=t.tag,o,u;for(o=0,u=e.length;o<u;o+=1){if(ot(t,n+1,e[o],true,true)){if(!r||o!==0){i+=D(t,n)}if(t.dump&&d===t.dump.charCodeAt(0)){i+="-"}else{i+="- "}i+=t.dump}}t.tag=a;t.dump=i||"[]"}function rt(t,n,e){var r="",i=t.tag,a=Object.keys(e),o,u,s,c,f;for(o=0,u=a.length;o<u;o+=1){f="";if(o!==0)f+=", ";s=a[o];c=e[s];if(!ot(t,n,s,false,false)){continue}if(t.dump.length>1024)f+="? ";f+=t.dump+":"+(t.condenseFlow?"":" ");if(!ot(t,n,c,false,false)){continue}f+=t.dump;r+=f}t.tag=i;t.dump="{"+r+"}"}function it(t,n,e,r){var i="",a=t.tag,o=Object.keys(e),u,s,c,f,l,h;if(t.sortKeys===true){o.sort()}else if(typeof t.sortKeys==="function"){o.sort(t.sortKeys)}else if(t.sortKeys){throw new p("sortKeys must be a boolean or a function")}for(u=0,s=o.length;u<s;u+=1){h="";if(!r||u!==0){h+=D(t,n)}c=o[u];f=e[c];if(!ot(t,n+1,c,true,true,true)){continue}l=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024;if(l){if(t.dump&&d===t.dump.charCodeAt(0)){h+="?"}else{h+="? "}}h+=t.dump;if(l){h+=D(t,n)}if(!ot(t,n+1,f,true,l)){continue}if(t.dump&&d===t.dump.charCodeAt(0)){h+=":"}else{h+=": "}h+=t.dump;i+=h}t.tag=a;t.dump=i||"{}"}function at(t,n,e){var r,i,a,o,u,s;i=e?t.explicitTypes:t.implicitTypes;for(a=0,o=i.length;a<o;a+=1){u=i[a];if((u.instanceOf||u.predicate)&&(!u.instanceOf||typeof n==="object"&&n instanceof u.instanceOf)&&(!u.predicate||u.predicate(n))){t.tag=e?u.tag:"?";if(u.represent){s=t.styleMap[u.tag]||u.defaultStyle;if(f.call(u.represent)==="[object Function]"){r=u.represent(n,s)}else if(c.call(u.represent,s)){r=u.represent[s](n,s)}else{throw new p("!<"+u.tag+'> tag resolver accepts not "'+s+'" style')}t.dump=r}return true}}return false}function ot(t,n,e,r,i,a){t.tag=null;t.dump=e;if(!at(t,e,false)){at(t,e,true)}var o=f.call(t.dump);if(r){r=t.flowLevel<0||t.flowLevel>n}var u=o==="[object Object]"||o==="[object Array]",s,c;if(u){s=t.duplicates.indexOf(e);c=s!==-1}if(t.tag!==null&&t.tag!=="?"||c||t.indent!==2&&n>0){i=false}if(c&&t.usedDuplicates[s]){t.dump="*ref_"+s}else{if(u&&c&&!t.usedDuplicates[s]){t.usedDuplicates[s]=true}if(o==="[object Object]"){if(r&&Object.keys(t.dump).length!==0){it(t,n,t.dump,i);if(c){t.dump="&ref_"+s+t.dump}}else{rt(t,n,t.dump);if(c){t.dump="&ref_"+s+" "+t.dump}}}else if(o==="[object Array]"){if(r&&t.dump.length!==0){et(t,n,t.dump,i);if(c){t.dump="&ref_"+s+t.dump}}else{nt(t,n,t.dump);if(c){t.dump="&ref_"+s+" "+t.dump}}}else if(o==="[object String]"){if(t.tag!=="?"){Z(t,t.dump,n,a)}}else{if(t.skipInvalid)return false;throw new p("unacceptable kind of an object to dump "+o)}if(t.tag!==null&&t.tag!=="?"){t.dump="!<"+t.tag+"> "+t.dump}}return true}function ut(t,n){var e=[],r=[],i,a;st(t,e,r);for(i=0,a=r.length;i<a;i+=1){n.duplicates.push(e[r[i]])}n.usedDuplicates=new Array(a)}function st(t,n,e){var r,i,a;if(t!==null&&typeof t==="object"){i=n.indexOf(t);if(i!==-1){if(e.indexOf(i)===-1){e.push(i)}}else{n.push(t);if(Array.isArray(t)){for(i=0,a=t.length;i<a;i+=1){st(t[i],n,e)}}else{r=Object.keys(t);for(i=0,a=r.length;i<a;i+=1){st(t[r[i]],n,e)}}}}}function ct(t,n){n=n||{};var e=new P(n);if(!e.noRefs)ut(t,e);if(ot(e,0,t,true,true))return e.dump+"\n";return""}function ft(t,n){return ct(t,s.extend({schema:i},n))}n.exports.dump=ct;n.exports.safeDump=ft},{"./common":2,"./exception":4,"./schema/default_full":9,"./schema/default_safe":10}],4:[function(t,n,e){"use strict";function r(t,n){Error.call(this);this.name="YAMLException";this.reason=t;this.mark=n;this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"");if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{this.stack=(new Error).stack||""}}r.prototype=Object.create(Error.prototype);r.prototype.constructor=r;r.prototype.toString=function t(n){var e=this.name+": ";e+=this.reason||"(unknown reason)";if(!n&&this.mark){e+=" "+this.mark.toString()}return e};n.exports=r},{}],5:[function(t,n,e){"use strict";var h=t("./common");var r=t("./exception");var i=t("./mark");var a=t("./schema/default_safe");var o=t("./schema/default_full");var g=Object.prototype.hasOwnProperty;var y=1;var m=2;var x=3;var _=4;var p=1;var d=2;var v=3;var s=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var u=/[\x85\u2028\u2029]/;var c=/[,\[\]\{\}]/;var f=/^(?:!|!!|![a-z\-]+!)$/i;var l=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w(t){return t===10||t===13}function b(t){return t===9||t===32}function M(t){return t===9||t===32||t===10||t===13}function k(t){return t===44||t===91||t===93||t===123||t===125}function S(t){var n;if(48<=t&&t<=57){return t-48}n=t|32;if(97<=n&&n<=102){return n-97+10}return-1}function A(t){if(t===120){return 2}if(t===117){return 4}if(t===85){return 8}return 0}function C(t){if(48<=t&&t<=57){return t-48}return-1}function N(t){return t===48?"\0":t===97?"":t===98?"\b":t===116?"\t":t===9?"\t":t===110?"\n":t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"Â…":t===95?"Â ":t===76?"\u2028":t===80?"\u2029":""}function T(t){if(t<=65535){return String.fromCharCode(t)}return String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var E=new Array(256);var j=new Array(256);for(var O=0;O<256;O++){E[O]=N(O)?1:0;j[O]=N(O)}function L(t,n){this.input=t;this.filename=n["filename"]||null;this.schema=n["schema"]||o;this.onWarning=n["onWarning"]||null;this.legacy=n["legacy"]||false;this.json=n["json"]||false;this.listener=n["listener"]||null;this.implicitTypes=this.schema.compiledImplicit;this.typeMap=this.schema.compiledTypeMap;this.length=t.length;this.position=0;this.line=0;this.lineStart=0;this.lineIndent=0;this.documents=[]}function I(t,n){return new r(n,new i(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function P(t,n){throw I(t,n)}function R(t,n){if(t.onWarning){t.onWarning.call(null,I(t,n))}}var D={YAML:function t(n,e,r){var i,a,o;if(n.version!==null){P(n,"duplication of %YAML directive")}if(r.length!==1){P(n,"YAML directive accepts exactly one argument")}i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]);if(i===null){P(n,"ill-formed argument of the YAML directive")}a=parseInt(i[1],10);o=parseInt(i[2],10);if(a!==1){P(n,"unacceptable YAML version of the document")}n.version=r[0];n.checkLineBreaks=o<2;if(o!==1&&o!==2){R(n,"unsupported YAML version of the document")}},TAG:function t(n,e,r){var i,a;if(r.length!==2){P(n,"TAG directive accepts exactly two arguments")}i=r[0];a=r[1];if(!f.test(i)){P(n,"ill-formed tag handle (first argument) of the TAG directive")}if(g.call(n.tagMap,i)){P(n,'there is a previously declared suffix for "'+i+'" tag handle')}if(!l.test(a)){P(n,"ill-formed tag prefix (second argument) of the TAG directive")}n.tagMap[i]=a}};function z(t,n,e,r){var i,a,o,u;if(n<e){u=t.input.slice(n,e);if(r){for(i=0,a=u.length;i<a;i+=1){o=u.charCodeAt(i);if(!(o===9||32<=o&&o<=1114111)){P(t,"expected valid JSON character")}}}else if(s.test(u)){P(t,"the stream contains non-printable characters")}t.result+=u}}function F(t,n,e,r){var i,a,o,u;if(!h.isObject(e)){P(t,"cannot merge mappings; the provided source object is unacceptable")}i=Object.keys(e);for(o=0,u=i.length;o<u;o+=1){a=i[o];if(!g.call(n,a)){n[a]=e[a];r[a]=true}}}function B(t,n,e,r,i,a,o,u){var s,c;i=String(i);if(n===null){n={}}if(r==="tag:yaml.org,2002:merge"){if(Array.isArray(a)){for(s=0,c=a.length;s<c;s+=1){F(t,n,a[s],e)}}else{F(t,n,a,e)}}else{if(!t.json&&!g.call(e,i)&&g.call(n,i)){t.line=o||t.line;t.position=u||t.position;P(t,"duplicated mapping key")}n[i]=a;delete e[i]}return n}function q(t){var n;n=t.input.charCodeAt(t.position);if(n===10){t.position++}else if(n===13){t.position++;if(t.input.charCodeAt(t.position)===10){t.position++}}else{P(t,"a line break is expected")}t.line+=1;t.lineStart=t.position}function U(t,n,e){var r=0,i=t.input.charCodeAt(t.position);while(i!==0){while(b(i)){i=t.input.charCodeAt(++t.position)}if(n&&i===35){do{i=t.input.charCodeAt(++t.position)}while(i!==10&&i!==13&&i!==0)}if(w(i)){q(t);i=t.input.charCodeAt(t.position);r++;t.lineIndent=0;while(i===32){t.lineIndent++;i=t.input.charCodeAt(++t.position)}}else{break}}if(e!==-1&&r!==0&&t.lineIndent<e){R(t,"deficient indentation")}return r}function H(t){var n=t.position,e;e=t.input.charCodeAt(n);if((e===45||e===46)&&e===t.input.charCodeAt(n+1)&&e===t.input.charCodeAt(n+2)){n+=3;e=t.input.charCodeAt(n);if(e===0||M(e)){return true}}return false}function Y(t,n){if(n===1){t.result+=" "}else if(n>1){t.result+=h.repeat("\n",n-1)}}function G(t,n,e){var r,i,a,o,u,s,c,f,l=t.kind,h=t.result,p;p=t.input.charCodeAt(t.position);if(M(p)||k(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96){return false}if(p===63||p===45){i=t.input.charCodeAt(t.position+1);if(M(i)||e&&k(i)){return false}}t.kind="scalar";t.result="";a=o=t.position;u=false;while(p!==0){if(p===58){i=t.input.charCodeAt(t.position+1);if(M(i)||e&&k(i)){break}}else if(p===35){r=t.input.charCodeAt(t.position-1);if(M(r)){break}}else if(t.position===t.lineStart&&H(t)||e&&k(p)){break}else if(w(p)){s=t.line;c=t.lineStart;f=t.lineIndent;U(t,false,-1);if(t.lineIndent>=n){u=true;p=t.input.charCodeAt(t.position);continue}else{t.position=o;t.line=s;t.lineStart=c;t.lineIndent=f;break}}if(u){z(t,a,o,false);Y(t,t.line-s);a=o=t.position;u=false}if(!b(p)){o=t.position+1}p=t.input.charCodeAt(++t.position)}z(t,a,o,false);if(t.result){return true}t.kind=l;t.result=h;return false}function V(t,n){var e,r,i;e=t.input.charCodeAt(t.position);if(e!==39){return false}t.kind="scalar";t.result="";t.position++;r=i=t.position;while((e=t.input.charCodeAt(t.position))!==0){if(e===39){z(t,r,t.position,true);e=t.input.charCodeAt(++t.position);if(e===39){r=t.position;t.position++;i=t.position}else{return true}}else if(w(e)){z(t,r,i,true);Y(t,U(t,false,n));r=i=t.position}else if(t.position===t.lineStart&&H(t)){P(t,"unexpected end of the document within a single quoted scalar")}else{t.position++;i=t.position}}P(t,"unexpected end of the stream within a single quoted scalar")}function X(t,n){var e,r,i,a,o,u;u=t.input.charCodeAt(t.position);if(u!==34){return false}t.kind="scalar";t.result="";t.position++;e=r=t.position;while((u=t.input.charCodeAt(t.position))!==0){if(u===34){z(t,e,t.position,true);t.position++;return true}else if(u===92){z(t,e,t.position,true);u=t.input.charCodeAt(++t.position);if(w(u)){U(t,false,n)}else if(u<256&&E[u]){t.result+=j[u];t.position++}else if((o=A(u))>0){i=o;a=0;for(;i>0;i--){u=t.input.charCodeAt(++t.position);if((o=S(u))>=0){a=(a<<4)+o}else{P(t,"expected hexadecimal character")}}t.result+=T(a);t.position++}else{P(t,"unknown escape sequence")}e=r=t.position}else if(w(u)){z(t,e,r,true);Y(t,U(t,false,n));e=r=t.position}else if(t.position===t.lineStart&&H(t)){P(t,"unexpected end of the document within a double quoted scalar")}else{t.position++;r=t.position}}P(t,"unexpected end of the stream within a double quoted scalar")}function W(t,n){var e=true,r,i=t.tag,a,o=t.anchor,u,s,c,f,l,h={},p,d,v,g;g=t.input.charCodeAt(t.position);if(g===91){s=93;l=false;a=[]}else if(g===123){s=125;l=true;a={}}else{return false}if(t.anchor!==null){t.anchorMap[t.anchor]=a}g=t.input.charCodeAt(++t.position);while(g!==0){U(t,true,n);g=t.input.charCodeAt(t.position);if(g===s){t.position++;t.tag=i;t.anchor=o;t.kind=l?"mapping":"sequence";t.result=a;return true}else if(!e){P(t,"missed comma between flow collection entries")}d=p=v=null;c=f=false;if(g===63){u=t.input.charCodeAt(t.position+1);if(M(u)){c=f=true;t.position++;U(t,true,n)}}r=t.line;nt(t,n,y,false,true);d=t.tag;p=t.result;U(t,true,n);g=t.input.charCodeAt(t.position);if((f||t.line===r)&&g===58){c=true;g=t.input.charCodeAt(++t.position);U(t,true,n);nt(t,n,y,false,true);v=t.result}if(l){B(t,a,h,d,p,v)}else if(c){a.push(B(t,null,h,d,p,v))}else{a.push(p)}U(t,true,n);g=t.input.charCodeAt(t.position);if(g===44){e=true;g=t.input.charCodeAt(++t.position)}else{e=false}}P(t,"unexpected end of the stream within a flow collection")}function Z(t,n){var e,r,i=p,a=false,o=false,u=n,s=0,c=false,f,l;l=t.input.charCodeAt(t.position);if(l===124){r=false}else if(l===62){r=true}else{return false}t.kind="scalar";t.result="";while(l!==0){l=t.input.charCodeAt(++t.position);if(l===43||l===45){if(p===i){i=l===43?v:d}else{P(t,"repeat of a chomping mode identifier")}}else if((f=C(l))>=0){if(f===0){P(t,"bad explicit indentation width of a block scalar; it cannot be less than one")}else if(!o){u=n+f-1;o=true}else{P(t,"repeat of an indentation width identifier")}}else{break}}if(b(l)){do{l=t.input.charCodeAt(++t.position)}while(b(l));if(l===35){do{l=t.input.charCodeAt(++t.position)}while(!w(l)&&l!==0)}}while(l!==0){q(t);t.lineIndent=0;l=t.input.charCodeAt(t.position);while((!o||t.lineIndent<u)&&l===32){t.lineIndent++;l=t.input.charCodeAt(++t.position)}if(!o&&t.lineIndent>u){u=t.lineIndent}if(w(l)){s++;continue}if(t.lineIndent<u){if(i===v){t.result+=h.repeat("\n",a?1+s:s)}else if(i===p){if(a){t.result+="\n"}}break}if(r){if(b(l)){c=true;t.result+=h.repeat("\n",a?1+s:s)}else if(c){c=false;t.result+=h.repeat("\n",s+1)}else if(s===0){if(a){t.result+=" "}}else{t.result+=h.repeat("\n",s)}}else{t.result+=h.repeat("\n",a?1+s:s)}a=true;o=true;s=0;e=t.position;while(!w(l)&&l!==0){l=t.input.charCodeAt(++t.position)}z(t,e,t.position,false)}return true}function $(t,n){var e,r=t.tag,i=t.anchor,a=[],o,u=false,s;if(t.anchor!==null){t.anchorMap[t.anchor]=a}s=t.input.charCodeAt(t.position);while(s!==0){if(s!==45){break}o=t.input.charCodeAt(t.position+1);if(!M(o)){break}u=true;t.position++;if(U(t,true,-1)){if(t.lineIndent<=n){a.push(null);s=t.input.charCodeAt(t.position);continue}}e=t.line;nt(t,n,x,false,true);a.push(t.result);U(t,true,-1);s=t.input.charCodeAt(t.position);if((t.line===e||t.lineIndent>n)&&s!==0){P(t,"bad indentation of a sequence entry")}else if(t.lineIndent<n){break}}if(u){t.tag=r;t.anchor=i;t.kind="sequence";t.result=a;return true}return false}function J(t,n,e){var r,i,a,o,u=t.tag,s=t.anchor,c={},f={},l=null,h=null,p=null,d=false,v=false,g;if(t.anchor!==null){t.anchorMap[t.anchor]=c}g=t.input.charCodeAt(t.position);while(g!==0){r=t.input.charCodeAt(t.position+1);a=t.line;o=t.position;if((g===63||g===58)&&M(r)){if(g===63){if(d){B(t,c,f,l,h,null);l=h=p=null}v=true;d=true;i=true}else if(d){d=false;i=true}else{P(t,"incomplete explicit mapping pair; a key node is missed")}t.position+=1;g=r}else if(nt(t,e,m,false,true)){if(t.line===a){g=t.input.charCodeAt(t.position);while(b(g)){g=t.input.charCodeAt(++t.position)}if(g===58){g=t.input.charCodeAt(++t.position);if(!M(g)){P(t,"a whitespace character is expected after the key-value separator within a block mapping")}if(d){B(t,c,f,l,h,null);l=h=p=null}v=true;d=false;i=false;l=t.tag;h=t.result}else if(v){P(t,"can not read an implicit mapping pair; a colon is missed")}else{t.tag=u;t.anchor=s;return true}}else if(v){P(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}else{t.tag=u;t.anchor=s;return true}}else{break}if(t.line===a||t.lineIndent>n){if(nt(t,n,_,true,i)){if(d){h=t.result}else{p=t.result}}if(!d){B(t,c,f,l,h,p,a,o);l=h=p=null}U(t,true,-1);g=t.input.charCodeAt(t.position)}if(t.lineIndent>n&&g!==0){P(t,"bad indentation of a mapping entry")}else if(t.lineIndent<n){break}}if(d){B(t,c,f,l,h,null)}if(v){t.tag=u;t.anchor=s;t.kind="mapping";t.result=c}return v}function K(t){var n,e=false,r=false,i,a,o;o=t.input.charCodeAt(t.position);if(o!==33)return false;if(t.tag!==null){P(t,"duplication of a tag property")}o=t.input.charCodeAt(++t.position);if(o===60){e=true;o=t.input.charCodeAt(++t.position)}else if(o===33){r=true;i="!!";o=t.input.charCodeAt(++t.position)}else{i="!"}n=t.position;if(e){do{o=t.input.charCodeAt(++t.position)}while(o!==0&&o!==62);if(t.position<t.length){a=t.input.slice(n,t.position);o=t.input.charCodeAt(++t.position)}else{P(t,"unexpected end of the stream within a verbatim tag")}}else{while(o!==0&&!M(o)){if(o===33){if(!r){i=t.input.slice(n-1,t.position+1);if(!f.test(i)){P(t,"named tag handle cannot contain such characters")}r=true;n=t.position+1}else{P(t,"tag suffix cannot contain exclamation marks")}}o=t.input.charCodeAt(++t.position)}a=t.input.slice(n,t.position);if(c.test(a)){P(t,"tag suffix cannot contain flow indicator characters")}}if(a&&!l.test(a)){P(t,"tag name cannot contain such characters: "+a)}if(e){t.tag=a}else if(g.call(t.tagMap,i)){t.tag=t.tagMap[i]+a}else if(i==="!"){t.tag="!"+a}else if(i==="!!"){t.tag="tag:yaml.org,2002:"+a}else{P(t,'undeclared tag handle "'+i+'"')}return true}function Q(t){var n,e;e=t.input.charCodeAt(t.position);if(e!==38)return false;if(t.anchor!==null){P(t,"duplication of an anchor property")}e=t.input.charCodeAt(++t.position);n=t.position;while(e!==0&&!M(e)&&!k(e)){e=t.input.charCodeAt(++t.position)}if(t.position===n){P(t,"name of an anchor node must contain at least one character")}t.anchor=t.input.slice(n,t.position);return true}function tt(t){var n,e,r;r=t.input.charCodeAt(t.position);if(r!==42)return false;r=t.input.charCodeAt(++t.position);n=t.position;while(r!==0&&!M(r)&&!k(r)){r=t.input.charCodeAt(++t.position)}if(t.position===n){P(t,"name of an alias node must contain at least one character")}e=t.input.slice(n,t.position);if(!t.anchorMap.hasOwnProperty(e)){P(t,'unidentified alias "'+e+'"')}t.result=t.anchorMap[e];U(t,true,-1);return true}function nt(t,n,e,r,i){var a,o,u,s=1,c=false,f=false,l,h,p,d,v;if(t.listener!==null){t.listener("open",t)}t.tag=null;t.anchor=null;t.kind=null;t.result=null;a=o=u=_===e||x===e;if(r){if(U(t,true,-1)){c=true;if(t.lineIndent>n){s=1}else if(t.lineIndent===n){s=0}else if(t.lineIndent<n){s=-1}}}if(s===1){while(K(t)||Q(t)){if(U(t,true,-1)){c=true;u=a;if(t.lineIndent>n){s=1}else if(t.lineIndent===n){s=0}else if(t.lineIndent<n){s=-1}}else{u=false}}}if(u){u=c||i}if(s===1||_===e){if(y===e||m===e){d=n}else{d=n+1}v=t.position-t.lineStart;if(s===1){if(u&&($(t,v)||J(t,v,d))||W(t,d)){f=true}else{if(o&&Z(t,d)||V(t,d)||X(t,d)){f=true}else if(tt(t)){f=true;if(t.tag!==null||t.anchor!==null){P(t,"alias node should not have any properties")}}else if(G(t,d,y===e)){f=true;if(t.tag===null){t.tag="?"}}if(t.anchor!==null){t.anchorMap[t.anchor]=t.result}}}else if(s===0){f=u&&$(t,v)}}if(t.tag!==null&&t.tag!=="!"){if(t.tag==="?"){for(l=0,h=t.implicitTypes.length;l<h;l+=1){p=t.implicitTypes[l];if(p.resolve(t.result)){t.result=p.construct(t.result);t.tag=p.tag;if(t.anchor!==null){t.anchorMap[t.anchor]=t.result}break}}}else if(g.call(t.typeMap[t.kind||"fallback"],t.tag)){p=t.typeMap[t.kind||"fallback"][t.tag];if(t.result!==null&&p.kind!==t.kind){P(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"')}if(!p.resolve(t.result)){P(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}else{t.result=p.construct(t.result);if(t.anchor!==null){t.anchorMap[t.anchor]=t.result}}}else{P(t,"unknown tag !<"+t.tag+">")}}if(t.listener!==null){t.listener("close",t)}return t.tag!==null||t.anchor!==null||f}function et(t){var n=t.position,e,r,i,a=false,o;t.version=null;t.checkLineBreaks=t.legacy;t.tagMap={};t.anchorMap={};while((o=t.input.charCodeAt(t.position))!==0){U(t,true,-1);o=t.input.charCodeAt(t.position);if(t.lineIndent>0||o!==37){break}a=true;o=t.input.charCodeAt(++t.position);e=t.position;while(o!==0&&!M(o)){o=t.input.charCodeAt(++t.position)}r=t.input.slice(e,t.position);i=[];if(r.length<1){P(t,"directive name must not be less than one character in length")}while(o!==0){while(b(o)){o=t.input.charCodeAt(++t.position)}if(o===35){do{o=t.input.charCodeAt(++t.position)}while(o!==0&&!w(o));break}if(w(o))break;e=t.position;while(o!==0&&!M(o)){o=t.input.charCodeAt(++t.position)}i.push(t.input.slice(e,t.position))}if(o!==0)q(t);if(g.call(D,r)){D[r](t,r,i)}else{R(t,'unknown document directive "'+r+'"')}}U(t,true,-1);if(t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45){t.position+=3;U(t,true,-1)}else if(a){P(t,"directives end mark is expected")}nt(t,t.lineIndent-1,_,false,true);U(t,true,-1);if(t.checkLineBreaks&&u.test(t.input.slice(n,t.position))){R(t,"non-ASCII line breaks are interpreted as content")}t.documents.push(t.result);if(t.position===t.lineStart&&H(t)){if(t.input.charCodeAt(t.position)===46){t.position+=3;U(t,true,-1)}return}if(t.position<t.length-1){P(t,"end of the stream or a document separator is expected")}else{return}}function rt(t,n){t=String(t);n=n||{};if(t.length!==0){if(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13){t+="\n"}if(t.charCodeAt(0)===65279){t=t.slice(1)}}var e=new L(t,n);e.input+="\0";while(e.input.charCodeAt(e.position)===32){e.lineIndent+=1;e.position+=1}while(e.position<e.length-1){et(e)}return e.documents}function it(t,n,e){var r=rt(t,e),i,a;if(typeof n!=="function"){return r}for(i=0,a=r.length;i<a;i+=1){n(r[i])}}function at(t,n){var e=rt(t,n);if(e.length===0){return undefined}else if(e.length===1){return e[0]}throw new r("expected a single document in the stream, but found more")}function ot(t,n,e){if(typeof n==="function"){it(t,n,h.extend({schema:a},e))}else{return it(t,h.extend({schema:a},e))}}function ut(t,n){return at(t,h.extend({schema:a},n))}n.exports.loadAll=it;n.exports.load=at;n.exports.safeLoadAll=ot;n.exports.safeLoad=ut},{"./common":2,"./exception":4,"./mark":6,"./schema/default_full":9,"./schema/default_safe":10}],6:[function(t,n,e){"use strict";var s=t("./common");function r(t,n,e,r,i){this.name=t;this.buffer=n;this.position=e;this.line=r;this.column=i}r.prototype.getSnippet=function t(n,e){var r,i,a,o,u;if(!this.buffer)return null;n=n||4;e=e||75;r="";i=this.position;while(i>0&&"\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(i-1))===-1){i-=1;if(this.position-i>e/2-1){r=" ... ";i+=5;break}}a="";o=this.position;while(o<this.buffer.length&&"\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(o))===-1){o+=1;if(o-this.position>e/2-1){a=" ... ";o-=5;break}}u=this.buffer.slice(i,o);return s.repeat(" ",n)+r+u+a+"\n"+s.repeat(" ",n+this.position-i+r.length)+"^"};r.prototype.toString=function t(n){var e,r="";if(this.name){r+='in "'+this.name+'" '}r+="at line "+(this.line+1)+", column "+(this.column+1);if(!n){e=this.getSnippet();if(e){r+=":\n"+e}}return r};n.exports=r},{"./common":2}],7:[function(t,n,e){"use strict";var r=t("./common");var i=t("./exception");var a=t("./type");function o(t,n,r){var i=[];t.include.forEach(function(t){r=o(t,n,r)});t[n].forEach(function(e){r.forEach(function(t,n){if(t.tag===e.tag&&t.kind===e.kind){i.push(n)}});r.push(e)});return r.filter(function(t,n){return i.indexOf(n)===-1})}function u(){var n={scalar:{},sequence:{},mapping:{},fallback:{}},t,e;function r(t){n[t.kind][t.tag]=n["fallback"][t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1){arguments[t].forEach(r)}return n}function s(t){this.include=t.include||[];this.implicit=t.implicit||[];this.explicit=t.explicit||[];this.implicit.forEach(function(t){if(t.loadKind&&t.loadKind!=="scalar"){throw new i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}});this.compiledImplicit=o(this,"implicit",[]);this.compiledExplicit=o(this,"explicit",[]);this.compiledTypeMap=u(this.compiledImplicit,this.compiledExplicit)}s.DEFAULT=null;s.create=function t(){var n,e;switch(arguments.length){case 1:n=s.DEFAULT;e=arguments[0];break;case 2:n=arguments[0];e=arguments[1];break;default:throw new i("Wrong number of arguments for Schema.create function")}n=r.toArray(n);e=r.toArray(e);if(!n.every(function(t){return t instanceof s})){throw new i("Specified list of super schemas (or a single Schema object) contains a non-Schema object.")}if(!e.every(function(t){return t instanceof a})){throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.")}return new s({include:n,explicit:e})};n.exports=s},{"./common":2,"./exception":4,"./type":13}],8:[function(t,n,e){"use strict";var r=t("../schema");n.exports=new r({include:[t("./json")]})},{"../schema":7,"./json":12}],9:[function(t,n,e){"use strict";var r=t("../schema");n.exports=r.DEFAULT=new r({include:[t("./default_safe")],explicit:[t("../type/js/undefined"),t("../type/js/regexp"),t("../type/js/function")]})},{"../schema":7,"../type/js/function":18,"../type/js/regexp":19,"../type/js/undefined":20,"./default_safe":10}],10:[function(t,n,e){"use strict";var r=t("../schema");n.exports=new r({include:[t("./core")],implicit:[t("../type/timestamp"),t("../type/merge")],explicit:[t("../type/binary"),t("../type/omap"),t("../type/pairs"),t("../type/set")]})},{"../schema":7,"../type/binary":14,"../type/merge":22,"../type/omap":24,"../type/pairs":25,"../type/set":27,"../type/timestamp":29,"./core":8}],11:[function(t,n,e){"use strict";var r=t("../schema");n.exports=new r({explicit:[t("../type/str"),t("../type/seq"),t("../type/map")]})},{"../schema":7,"../type/map":21,"../type/seq":26,"../type/str":28}],12:[function(t,n,e){"use strict";var r=t("../schema");n.exports=new r({include:[t("./failsafe")],implicit:[t("../type/null"),t("../type/bool"),t("../type/int"),t("../type/float")]})},{"../schema":7,"../type/bool":15,"../type/float":16,"../type/int":17,"../type/null":23,"./failsafe":11}],13:[function(t,n,e){"use strict";var r=t("./exception");var i=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"];var a=["scalar","sequence","mapping"];function o(t){var e={};if(t!==null){Object.keys(t).forEach(function(n){t[n].forEach(function(t){e[String(t)]=n})})}return e}function u(n,t){t=t||{};Object.keys(t).forEach(function(t){if(i.indexOf(t)===-1){throw new r('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}});this.tag=n;this.kind=t["kind"]||null;this.resolve=t["resolve"]||function(){return true};this.construct=t["construct"]||function(t){return t};this.instanceOf=t["instanceOf"]||null;this.predicate=t["predicate"]||null;this.represent=t["represent"]||null;this.defaultStyle=t["defaultStyle"]||null;this.styleAliases=o(t["styleAliases"]||null);if(a.indexOf(this.kind)===-1){throw new r('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}}n.exports=u},{"./exception":4}],14:[function(t,n,e){"use strict";var s;try{var r=t;s=r("buffer").Buffer}catch(t){}var i=t("../type");var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function a(t){if(t===null)return false;var n,e,r=0,i=t.length,a=c;for(e=0;e<i;e++){n=a.indexOf(t.charAt(e));if(n>64)continue;if(n<0)return false;r+=6}return r%8===0}function o(t){var n,e,r=t.replace(/[\r\n=]/g,""),i=r.length,a=c,o=0,u=[];for(n=0;n<i;n++){if(n%4===0&&n){u.push(o>>16&255);u.push(o>>8&255);u.push(o&255)}o=o<<6|a.indexOf(r.charAt(n))}e=i%4*6;if(e===0){u.push(o>>16&255);u.push(o>>8&255);u.push(o&255)}else if(e===18){u.push(o>>10&255);u.push(o>>2&255)}else if(e===12){u.push(o>>4&255)}if(s){return s.from?s.from(u):new s(u)}return u}function u(t){var n="",e=0,r,i,a=t.length,o=c;for(r=0;r<a;r++){if(r%3===0&&r){n+=o[e>>18&63];n+=o[e>>12&63];n+=o[e>>6&63];n+=o[e&63]}e=(e<<8)+t[r]}i=a%3;if(i===0){n+=o[e>>18&63];n+=o[e>>12&63];n+=o[e>>6&63];n+=o[e&63]}else if(i===2){n+=o[e>>10&63];n+=o[e>>4&63];n+=o[e<<2&63];n+=o[64]}else if(i===1){n+=o[e>>2&63];n+=o[e<<4&63];n+=o[64];n+=o[64]}return n}function f(t){return s&&s.isBuffer(t)}n.exports=new i("tag:yaml.org,2002:binary",{kind:"scalar",resolve:a,construct:o,predicate:f,represent:u})},{"../type":13}],15:[function(t,n,e){"use strict";var r=t("../type");function i(t){if(t===null)return false;var n=t.length;return n===4&&(t==="true"||t==="True"||t==="TRUE")||n===5&&(t==="false"||t==="False"||t==="FALSE")}function a(t){return t==="true"||t==="True"||t==="TRUE"}function o(t){return Object.prototype.toString.call(t)==="[object Boolean]"}n.exports=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:i,construct:a,predicate:o,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"})},{"../type":13}],16:[function(t,n,e){"use strict";var r=t("../common");var i=t("../type");var a=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?"+"|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?"+"|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*"+"|[-+]?\\.(?:inf|Inf|INF)"+"|\\.(?:nan|NaN|NAN))$");function o(t){if(t===null)return false;if(!a.test(t)||t[t.length-1]==="_"){return false}return true}function u(t){var n,e,r,i;n=t.replace(/_/g,"").toLowerCase();e=n[0]==="-"?-1:1;i=[];if("+-".indexOf(n[0])>=0){n=n.slice(1)}if(n===".inf"){return e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY}else if(n===".nan"){return NaN}else if(n.indexOf(":")>=0){n.split(":").forEach(function(t){i.unshift(parseFloat(t,10))});n=0;r=1;i.forEach(function(t){n+=t*r;r*=60});return e*n}return e*parseFloat(n,10)}var s=/^[-+]?[0-9]+e/;function c(t,n){var e;if(isNaN(t)){switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}}else if(Number.POSITIVE_INFINITY===t){switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}}else if(Number.NEGATIVE_INFINITY===t){switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}}else if(r.isNegativeZero(t)){return"-0.0"}e=t.toString(10);return s.test(e)?e.replace("e",".e"):e}function f(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||r.isNegativeZero(t))}n.exports=new i("tag:yaml.org,2002:float",{kind:"scalar",resolve:o,construct:u,predicate:f,represent:c,defaultStyle:"lowercase"})},{"../common":2,"../type":13}],17:[function(t,n,e){"use strict";var r=t("../common");var i=t("../type");function a(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function o(t){return 48<=t&&t<=55}function u(t){return 48<=t&&t<=57}function s(t){if(t===null)return false;var n=t.length,e=0,r=false,i;if(!n)return false;i=t[e];if(i==="-"||i==="+"){i=t[++e]}if(i==="0"){if(e+1===n)return true;i=t[++e];if(i==="b"){e++;for(;e<n;e++){i=t[e];if(i==="_")continue;if(i!=="0"&&i!=="1")return false;r=true}return r&&i!=="_"}if(i==="x"){e++;for(;e<n;e++){i=t[e];if(i==="_")continue;if(!a(t.charCodeAt(e)))return false;r=true}return r&&i!=="_"}for(;e<n;e++){i=t[e];if(i==="_")continue;if(!o(t.charCodeAt(e)))return false;r=true}return r&&i!=="_"}if(i==="_")return false;for(;e<n;e++){i=t[e];if(i==="_")continue;if(i===":")break;if(!u(t.charCodeAt(e))){return false}r=true}if(!r||i==="_")return false;if(i!==":")return true;return/^(:[0-5]?[0-9])+$/.test(t.slice(e))}function c(t){var n=t,e=1,r,i,a=[];if(n.indexOf("_")!==-1){n=n.replace(/_/g,"")}r=n[0];if(r==="-"||r==="+"){if(r==="-")e=-1;n=n.slice(1);r=n[0]}if(n==="0")return 0;if(r==="0"){if(n[1]==="b")return e*parseInt(n.slice(2),2);if(n[1]==="x")return e*parseInt(n,16);return e*parseInt(n,8)}if(n.indexOf(":")!==-1){n.split(":").forEach(function(t){a.unshift(parseInt(t,10))});n=0;i=1;a.forEach(function(t){n+=t*i;i*=60});return e*n}return e*parseInt(n,10)}function f(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1===0&&!r.isNegativeZero(t))}n.exports=new i("tag:yaml.org,2002:int",{kind:"scalar",resolve:s,construct:c,predicate:f,represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":2,"../type":13}],18:[function(t,n,e){"use strict";var a;try{var r=t;a=r("esprima")}catch(t){if(typeof window!=="undefined")a=window.esprima}var i=t("../../type");function o(t){if(t===null)return false;try{var n="("+t+")",e=a.parse(n,{range:true});if(e.type!=="Program"||e.body.length!==1||e.body[0].type!=="ExpressionStatement"||e.body[0].expression.type!=="FunctionExpression"){return false}return true}catch(t){return false}}function u(t){var n="("+t+")",e=a.parse(n,{range:true}),r=[],i;if(e.type!=="Program"||e.body.length!==1||e.body[0].type!=="ExpressionStatement"||e.body[0].expression.type!=="FunctionExpression"){throw new Error("Failed to resolve function")}e.body[0].expression.params.forEach(function(t){r.push(t.name)});i=e.body[0].expression.body.range;return new Function(r,n.slice(i[0]+1,i[1]-1))}function s(t){return t.toString()}function c(t){return Object.prototype.toString.call(t)==="[object Function]"}n.exports=new i("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:o,construct:u,predicate:c,represent:s})},{"../../type":13}],19:[function(t,n,e){"use strict";var r=t("../../type");function i(t){if(t===null)return false;if(t.length===0)return false;var n=t,e=/\/([gim]*)$/.exec(t),r="";if(n[0]==="/"){if(e)r=e[1];if(r.length>3)return false;if(n[n.length-r.length-1]!=="/")return false}return true}function a(t){var n=t,e=/\/([gim]*)$/.exec(t),r="";if(n[0]==="/"){if(e)r=e[1];n=n.slice(1,n.length-r.length-1)}return new RegExp(n,r)}function o(t){var n="/"+t.source+"/";if(t.global)n+="g";if(t.multiline)n+="m";if(t.ignoreCase)n+="i";return n}function u(t){return Object.prototype.toString.call(t)==="[object RegExp]"}n.exports=new r("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:i,construct:a,predicate:u,represent:o})},{"../../type":13}],20:[function(t,n,e){"use strict";var r=t("../../type");function i(){return true}function a(){return undefined}function o(){return""}function u(t){return typeof t==="undefined"}n.exports=new r("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:i,construct:a,predicate:u,represent:o})},{"../../type":13}],21:[function(t,n,e){"use strict";var r=t("../type");n.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}})},{"../type":13}],22:[function(t,n,e){"use strict";var r=t("../type");function i(t){return t==="<<"||t===null}n.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:i})},{"../type":13}],23:[function(t,n,e){"use strict";var r=t("../type");function i(t){if(t===null)return true;var n=t.length;return n===1&&t==="~"||n===4&&(t==="null"||t==="Null"||t==="NULL")}function a(){return null}function o(t){return t===null}n.exports=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:i,construct:a,predicate:o,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":13}],24:[function(t,n,e){"use strict";var r=t("../type");var s=Object.prototype.hasOwnProperty;var c=Object.prototype.toString;function i(t){if(t===null)return true;var n=[],e,r,i,a,o,u=t;for(e=0,r=u.length;e<r;e+=1){i=u[e];o=false;if(c.call(i)!=="[object Object]")return false;for(a in i){if(s.call(i,a)){if(!o)o=true;else return false}}if(!o)return false;if(n.indexOf(a)===-1)n.push(a);else return false}return true}function a(t){return t!==null?t:[]}n.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:i,construct:a})},{"../type":13}],25:[function(t,n,e){"use strict";var r=t("../type");var u=Object.prototype.toString;function i(t){if(t===null)return true;var n,e,r,i,a,o=t;a=new Array(o.length);for(n=0,e=o.length;n<e;n+=1){r=o[n];if(u.call(r)!=="[object Object]")return false;i=Object.keys(r);if(i.length!==1)return false;a[n]=[i[0],r[i[0]]]}return true}function a(t){if(t===null)return[];var n,e,r,i,a,o=t;a=new Array(o.length);for(n=0,e=o.length;n<e;n+=1){r=o[n];i=Object.keys(r);a[n]=[i[0],r[i[0]]]}return a}n.exports=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:i,construct:a})},{"../type":13}],26:[function(t,n,e){"use strict";var r=t("../type");n.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}})},{"../type":13}],27:[function(t,n,e){"use strict";var r=t("../type");var i=Object.prototype.hasOwnProperty;function a(t){if(t===null)return true;var n,e=t;for(n in e){if(i.call(e,n)){if(e[n]!==null)return false}}return true}function o(t){return t!==null?t:{}}n.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:a,construct:o})},{"../type":13}],28:[function(t,n,e){"use strict";var r=t("../type");n.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}})},{"../type":13}],29:[function(t,n,e){"use strict";var r=t("../type");var p=new RegExp("^([0-9][0-9][0-9][0-9])"+"-([0-9][0-9])"+"-([0-9][0-9])$");var d=new RegExp("^([0-9][0-9][0-9][0-9])"+"-([0-9][0-9]?)"+"-([0-9][0-9]?)"+"(?:[Tt]|[ \\t]+)"+"([0-9][0-9]?)"+":([0-9][0-9])"+":([0-9][0-9])"+"(?:\\.([0-9]*))?"+"(?:[ \\t]*(Z|([-+])([0-9][0-9]?)"+"(?::([0-9][0-9]))?))?$");function i(t){if(t===null)return false;if(p.exec(t)!==null)return true;if(d.exec(t)!==null)return true;return false}function a(t){var n,e,r,i,a,o,u,s=0,c=null,f,l,h;n=p.exec(t);if(n===null)n=d.exec(t);if(n===null)throw new Error("Date resolve error");e=+n[1];r=+n[2]-1;i=+n[3];if(!n[4]){return new Date(Date.UTC(e,r,i))}a=+n[4];o=+n[5];u=+n[6];if(n[7]){s=n[7].slice(0,3);while(s.length<3){s+="0"}s=+s}if(n[9]){f=+n[10];l=+(n[11]||0);c=(f*60+l)*6e4;if(n[9]==="-")c=-c}h=new Date(Date.UTC(e,r,i,a,o,u,s));if(c)h.setTime(h.getTime()-c);return h}function o(t){return t.toISOString()}n.exports=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:i,construct:a,instanceOf:Date,represent:o})},{"../type":13}],"/":[function(t,n,e){"use strict";var r=t("./lib/js-yaml.js");n.exports=r},{"./lib/js-yaml.js":1}]},{},[])("/")});(function(){var h=typeof exports!="undefined"&&exports||this;var p='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';function t(s){return new Promise(function(a,t){var n=document.querySelectorAll("svg image");var o=n.length;var u=null;if(o==0){u=s();setTimeout(function(){a(u)},500)}for(var e=0;e<n.length;e++){(function(t){if(t.getAttribute("xlink:href")){var n=t.getAttribute("xlink:href").value;if(/^http/.test(n)&&!new RegExp("^"+window.location.host).test(n)){throw new Error("Cannot render embedded images linking to external hosts.")}}var e=document.createElement("canvas");var r=e.getContext("2d");var i=new Image;i.src=t.getAttribute("xlink:href");i.onload=function(){e.width=i.width;e.height=i.height;r.drawImage(i,0,0);t.setAttribute("xlink:href",e.toDataURL("image/png"));o--;if(o==0){u=s();a(u)}}})(n[e])}})}function d(t){var n="";var e=t?t.ownerDocument:document;var r=e.styleSheets;for(var i=0;i<r.length;i++){var a=r[i].cssRules;if(!!a){for(var o=0;o<a.length;o++){var u=a[o];if(typeof u.style!="undefined"){n+=u.selectorText+" { "+u.style.cssText+" }\n"}}}}var s=e.createElement("style");s.setAttribute("type","text/css");s.innerHTML="<![CDATA[\n"+n+"\n]]>";var c=e.createElement("defs");c.appendChild(s);return c}h.svgAsDataUri=function(s,c,f,l){f=f||1;return t(function(){var r=s.cloneNode(true);if(!!c&&c.length>0){c.each(function(t,n){var e=n.cloneNode(true);r.insertBefore(e,r.firstChild)})}var t=parseInt(h.getComputedStyle(s).getPropertyValue("width"));var n=parseInt(h.getComputedStyle(s).getPropertyValue("height"));n=n+3;var e="http://www.w3.org/2000/xmlns/";var i="http://www.w3.org/1999/xlink";r.setAttribute("version","1.1");r.setAttributeNS(e,"xmlns","http://www.w3.org/2000/svg");r.setAttributeNS(e,"xmlns:xlink","http://www.w3.org/1999/xlink");r.setAttribute("width",t*f);r.setAttribute("height",n*f);r.insertBefore(d(s),r.firstChild);var a=(new XMLSerializer).serializeToString(r);var o=p+a;var u="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(o)));if(l){l(u)}else{return u}})};h.saveSvgAsPng=function(e,r,a,o,u){return new Promise(function(i,t){var n=h.svgAsDataUri(e,r,o);n.then(function(t){var r=new Image;r.onerror=function(t,n){console.log(t);i()};r.onload=function(){var t=document.createElement("canvas");t.width=r.width;t.height=r.height;var n=t.getContext("2d");n.drawImage(r,0,0);if(u){u(t.toDataURL("image/png"));i()}else{var e=document.createElement("a");e.download=a;e.href=t.toDataURL("image/png");document.body.appendChild(e);e.click()}i()};r.src=t})})};h.saveSvgAsJpg=function(e,r,a,o,u){return new Promise(function(i,t){var n=h.svgAsDataUri(e,r,o);n.then(function(t){var r=new Image;r.onerror=function(t,n){console.log(t);i()};r.onload=function(){var t=document.createElement("canvas");t.width=r.width;t.height=r.height;var n=t.getContext("2d");n.fillStyle="#fff";n.fillRect(0,0,t.width,t.height);n.drawImage(r,0,0);if(u){u(t.toDataURL("image/jpeg"));i()}else{var e=document.createElement("a");e.download=a;e.href=t.toDataURL("image/jpeg");document.body.appendChild(e);e.click()}i()};r.src=t})})}})();!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).textures=n()}(this,function(){"use strict";function t(){return"".concat(Math.random().toString(36),"00000000000000000").replace(/[^a-z]+/g,"").slice(0,5)}return{circles:function(){function n(t){var n=t.append("defs").append("pattern").attr("id",c).attr("patternUnits","userSpaceOnUse").attr("width",e).attr("height",e);r&&n.append("rect").attr("width",e).attr("height",e).attr("fill",r),n.append("circle").attr("cx",e/2).attr("cy",e/2).attr("r",i).attr("fill",o).attr("stroke",u).attr("stroke-width",s),a&&[[0,0],[0,e],[e,0],[e,e]].forEach(function(t){n.append("circle").attr("cx",t[0]).attr("cy",t[1]).attr("r",i).attr("fill",o).attr("stroke",u).attr("stroke-width",s)})}var e=20,r="",i=2,a=!1,o="#343434",u="#343434",s=0,c=t();return n.heavier=function(t){return i*=0===arguments.length?2:2*t,n},n.lighter=function(t){return i/=0===arguments.length?2:2*t,n},n.thinner=function(t){return e*=0===arguments.length?2:2*t,n},n.thicker=function(t){return e/=0===arguments.length?2:2*t,n},n.background=function(t){return r=t,n},n.size=function(t){return e=t,n},n.complement=function(t){return a=0===arguments.length||t,n},n.radius=function(t){return i=t,n},n.fill=function(t){return o=t,n},n.stroke=function(t){return u=t,n},n.strokeWidth=function(t){return s=t,n},n.id=function(t){return 0===arguments.length?c:(c=t,n)},n.url=function(){return"url(#".concat(c,")")},n},lines:function(){function r(t){var n=t.append("defs").append("pattern").attr("id",u).attr("patternUnits","userSpaceOnUse").attr("width",e).attr("height",e);o&&n.append("rect").attr("width",e).attr("height",e).attr("fill",o),s.forEach(function(t){n.append("path").attr("d",function(t){var n=e;switch(t){case"0/8":case"vertical":return"M ".concat(n/2,", 0 l 0, ").concat(n);case"1/8":return"M ".concat(n/4,",0 l ").concat(n/2,",").concat(n," M ").concat(-n/4,",0 l ").concat(n/2,",").concat(n," M ").concat(3*n/4,",0 l ").concat(n/2,",").concat(n);case"2/8":case"diagonal":return"M 0,".concat(n," l ").concat(n,",").concat(-n," M ").concat(-n/4,",").concat(n/4," l ").concat(n/2,",").concat(-n/2," M ").concat(.75*n,",").concat(5/4*n," l ").concat(n/2,",").concat(-n/2);case"3/8":return"M 0,".concat(.75*n," l ").concat(n,",").concat(-n/2," M 0,").concat(n/4," l ").concat(n,",").concat(-n/2," M 0,").concat(5*n/4," l ").concat(n,",").concat(-n/2);case"4/8":case"horizontal":return"M 0,".concat(n/2," l ").concat(n,",0");case"5/8":return"M 0,".concat(-n/4," l ").concat(n,",").concat(n/2,"M 0,").concat(n/4," l ").concat(n,",").concat(n/2," M 0,").concat(3*n/4," l ").concat(n,",").concat(n/2);case"6/8":return"M 0,0 l ".concat(n,",").concat(n," M ").concat(-n/4,",").concat(.75*n," l ").concat(n/2,",").concat(n/2," M ").concat(3*n/4,",").concat(-n/4," l ").concat(n/2,",").concat(n/2);case"7/8":return"M ".concat(-n/4,",0 l ").concat(n/2,",").concat(n," M ").concat(n/4,",0 l ").concat(n/2,",").concat(n," M ").concat(3*n/4,",0 l ").concat(n/2,",").concat(n);default:return"M ".concat(n/2,", 0 l 0, ").concat(n)}}(t)).attr("stroke-width",a).attr("shape-rendering",c).attr("stroke",i).attr("stroke-linecap","square")})}var e=20,i="#343434",a=2,o="",u=t(),s=["diagonal"],c="auto";return r.heavier=function(t){return a*=0===arguments.length?2:2*t,r},r.lighter=function(t){return a/=0===arguments.length?2:2*t,r},r.thinner=function(t){return e*=0===arguments.length?2:2*t,r},r.thicker=function(t){return e/=0===arguments.length?2:2*t,r},r.background=function(t){return o=t,r},r.size=function(t){return e=t,r},r.orientation=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return 0===arguments.length||(s=n),r},r.shapeRendering=function(t){return c=t,r},r.stroke=function(t){return i=t,r},r.strokeWidth=function(t){return a=t,r},r.id=function(t){return 0===arguments.length?u:(u=t,r)},r.url=function(){return"url(#".concat(u,")")},r},paths:function(){function n(t){var n=function(t){var n=a;switch(t){case"squares":return"M ".concat(n/4," ").concat(n/4," l ").concat(n/2," 0 l 0 ").concat(n/2," l ").concat(-n/2," 0 Z");case"nylon":return"M 0 ".concat(n/4," l ").concat(n/4," 0 l 0 ").concat(-n/4," M ").concat(3*n/4," ").concat(n," l 0 ").concat(-n/4," l ").concat(n/4," 0 M ").concat(n/4," ").concat(n/2," l 0 ").concat(n/4," l ").concat(n/4," 0 M ").concat(n/2," ").concat(n/4," l ").concat(n/4," 0 l 0 ").concat(n/4);case"waves":return"M 0 ".concat(n/2," c ").concat(n/8," ").concat(-n/4," , ").concat(3*n/8," ").concat(-n/4," , ").concat(n/2," 0 c ").concat(n/8," ").concat(n/4," , ").concat(3*n/8," ").concat(n/4," , ").concat(n/2," 0 M ").concat(-n/2," ").concat(n/2," c ").concat(n/8," ").concat(n/4," , ").concat(3*n/8," ").concat(n/4," , ").concat(n/2," 0 M ").concat(n," ").concat(n/2," c ").concat(n/8," ").concat(-n/4," , ").concat(3*n/8," ").concat(-n/4," , ").concat(n/2," 0");case"woven":return"M ".concat(n/4,",").concat(n/4,"l").concat(n/2,",").concat(n/2,"M").concat(3*n/4,",").concat(n/4,"l").concat(n/2,",").concat(-n/2," M").concat(n/4,",").concat(3*n/4,"l").concat(-n/2,",").concat(n/2,"M").concat(3*n/4,",").concat(5*n/4,"l").concat(n/2,",").concat(-n/2," M").concat(-n/4,",").concat(n/4,"l").concat(n/2,",").concat(-n/2);case"crosses":return"M ".concat(n/4,",").concat(n/4,"l").concat(n/2,",").concat(n/2,"M").concat(n/4,",").concat(3*n/4,"l").concat(n/2,",").concat(-n/2);case"caps":return"M ".concat(n/4,",").concat(3*n/4,"l").concat(n/4,",").concat(-n/2,"l").concat(n/4,",").concat(n/2);case"hexagons":return r=3,i=Math.sqrt(3),"M ".concat(n,",0 l ").concat(n,",0 l ").concat(n/2,",").concat(n*Math.sqrt(3)/2," l ").concat(-n/2,",").concat(n*Math.sqrt(3)/2," l ").concat(-n,",0 l ").concat(-n/2,",").concat(-n*Math.sqrt(3)/2," Z M 0,").concat(n*Math.sqrt(3)/2," l ").concat(n/2,",0 M ").concat(3*n,",").concat(n*Math.sqrt(3)/2," l ").concat(-n/2,",0");default:return t(n)}}(c),e=t.append("defs").append("pattern").attr("id",f).attr("patternUnits","userSpaceOnUse").attr("width",a*r).attr("height",a*i);s&&e.append("rect").attr("width",a*r).attr("height",a*i).attr("fill",s),e.append("path").attr("d",n).attr("fill",l).attr("stroke",o).attr("stroke-width",u).attr("stroke-linecap","square").attr("shape-rendering",h)}var r=1,i=1,a=20,o="#343434",u=2,s="",c=function(t){return"M ".concat(t/4,",").concat(3*t/4,"l").concat(t/4,",").concat(-t/2,"l").concat(t/4,",").concat(t/2)},f=t(),l="transparent",h="auto";return n.heavier=function(t){return u*=0===arguments.length?2:2*t,n},n.lighter=function(t){return u/=0===arguments.length?2:2*t,n},n.thinner=function(t){return a*=0===arguments.length?2:2*t,n},n.thicker=function(t){return a/=0===arguments.length?2:2*t,n},n.background=function(t){return s=t,n},n.shapeRendering=function(t){return h=t,n},n.size=function(t){return a=t,n},n.d=function(t){return c=t,n},n.fill=function(t){return l=t,n},n.stroke=function(t){return o=t,n},n.strokeWidth=function(t){return u=t,n},n.id=function(t){return 0===arguments.length?f:(f=t,n)},n.url=function(){return"url(#".concat(f,")")},n}}});(function(t,n){typeof exports==="object"&&typeof module!=="undefined"?module.exports=n():typeof define==="function"&&define.amd?define(n):t.invert=n()})(this,function(){"use strict";var r=Math.sqrt(1.05*.05)-.05;var n=/^(?:[0-9a-f]{3}){1,2}$/i;var i={black:"#000000",white:"#ffffff",threshold:r};function e(t,n){if(n===void 0){n=2}return(new Array(n).join("0")+t).slice(-n)}function a(t){if(t.slice(0,1)==="#")t=t.slice(1);if(!n.test(t))throw new Error('Invalid HEX color: "'+t+'"');if(t.length===3){t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function o(t){return{r:t[0],g:t[1],b:t[2]}}function u(t){if(!t)throw new Error("Invalid color value");if(Array.isArray(t))return t;return typeof t==="string"?a(t):[t.r,t.g,t.b]}function s(t){var n,e;var r=[];for(n=0;n<t.length;n++){e=t[n]/255;r[n]=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*r[0]+.7152*r[1]+.0722*r[2]}function c(t,n,e){var r=n===true?i:Object.assign({},i,n);return s(t)>r.threshold?e?a(r.black):r.black:e?a(r.white):r.white}function t(t,n){if(n===void 0){n=false}t=u(t);if(n)return c(t,n);return"#"+t.map(function(t){return e((255-t).toString(16))}).join("")}(function(t){function n(t,n){t=u(t);var e=n?c(t,n,true):t.map(function(t){return 255-t});return o(e)}t.asRGB=n;function e(t,n){t=u(t);return n?c(t,n,true):t.map(function(t){return 255-t})}t.asRgbArray=e;t.defaultThreshold=r;t.asRgbObject=n})(t||(t={}));var f=t;return f});(function t(n,e){if(typeof exports==="object"&&typeof module==="object")module.exports=e();else if(typeof define==="function"&&define.amd)define([],e);else if(typeof exports==="object")exports["Hierarchy"]=e();else n["Hierarchy"]=e()})(typeof self!=="undefined"?self:this,function(){return function(e){var r={};function i(t){if(r[t]){return r[t].exports}var n=r[t]={i:t,l:false,exports:{}};e[t].call(n.exports,n,n.exports,i);n.l=true;return n.exports}i.m=e;i.c=r;i.d=function(t,n,e){if(!i.o(t,n)){Object.defineProperty(t,n,{configurable:false,enumerable:true,get:e})}};i.n=function(n){var t=n&&n.__esModule?function t(){return n["default"]}:function t(){return n};i.d(t,"a",t);return t};i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)};i.p="";return i(i.s=4)}([function(t,n,e){function i(t,n){if(!(t instanceof n)){throw new TypeError("Cannot call a class as a function")}}var a=e(2);var r=function(){function r(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,r);var e=this;e.options=n;e.rootNode=a(t,n)}r.prototype.execute=function t(){throw new Error("please override this method")};return r}();t.exports=r},function(t,n,e){var s=e(3);var c=["LR","RL","TB","BT","H","V"];var r=["LR","RL","H"];var f=function t(n){return r.indexOf(n)>-1};var l=c[0];t.exports=function(t,n,e){var r=n.direction||l;n.isHorizontal=f(r);if(r&&c.indexOf(r)===-1){throw new TypeError("Invalid direction: "+r)}if(r===c[0]){e(t,n)}else if(r===c[1]){e(t,n);t.right2left()}else if(r===c[2]){e(t,n)}else if(r===c[3]){e(t,n);t.bottom2top()}else if(r===c[4]||r===c[5]){var i=s(t,n),a=i.left,o=i.right;e(a,n);e(o,n);n.isHorizontal?a.right2left():a.bottom2top();o.translate(a.x-o.x,a.y-o.y);t.x=a.x;t.y=o.y;var u=t.getBoundingBox();if(n.isHorizontal){if(u.top<0){t.translate(0,-u.top)}}else{if(u.left<0){t.translate(-u.left,0)}}}t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap));return t}},function(t,n){var r=18;var e=r*2;var i=r;var f={getId:function t(n){return n.id||n.name},getHGap:function t(n){return n.hgap||i},getVGap:function t(n){return n.vgap||i},getChildren:function t(n){return n.children},getHeight:function t(n){return n.height||e},getWidth:function t(n){var e=n.name||" ";return n.width||e.split("").length*r}};function l(t,n){var e=this;e.vgap=e.hgap=0;if(t instanceof l)return t;e.data=t;var r=n.getHGap(t);var i=n.getVGap(t);e.width=n.getWidth(t);e.height=n.getHeight(t);e.id=n.getId(t);e.x=e.y=0;e.depth=0;if(!e.children){e.children=[]}e.addGap(r,i);return e}Object.assign(l.prototype,{isRoot:function t(){return this.depth===0},isLeaf:function t(){return this.children.length===0},addGap:function t(n,e){var r=this;r.hgap+=n;r.vgap+=e;r.width+=2*n;r.height+=2*e},eachNode:function t(n){var e=this;var r=[e];var i=void 0;while(i=r.pop()){n(i);r=r.concat(i.children)}},DFTraverse:function t(n){this.eachNode(n)},BFTraverse:function t(n){var e=this;var r=[e];var i=void 0;while(i=r.shift()){n(i);r=r.concat(i.children)}},getBoundingBox:function t(){var n={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};this.eachNode(function(t){n.left=Math.min(n.left,t.x);n.top=Math.min(n.top,t.y);n.width=Math.max(n.width,t.x+t.width);n.height=Math.max(n.height,t.y+t.height)});return n},translate:function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.eachNode(function(t){t.x+=n;t.y+=e})},right2left:function t(){var n=this;var e=n.getBoundingBox();n.eachNode(function(t){t.x=t.x-(t.x-e.left)*2-t.width});n.translate(e.width,0)},bottom2top:function t(){var n=this;var e=n.getBoundingBox();n.eachNode(function(t){t.y=t.y-(t.y-e.top)*2-t.height});n.translate(0,e.height)}});function a(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=arguments[2];n=Object.assign({},f,n);var r=new l(t,n);var i=[r];var a=void 0;if(!e&&!t.collapsed){while(a=i.pop()){if(!a.data.collapsed){var o=n.getChildren(a.data);var u=o?o.length:0;a.children=new Array(u);if(o&&u){for(var s=0;s<u;s++){var c=new l(o[s],n);a.children[s]=c;i.push(c);c.parent=a;c.depth=a.depth+1}}}}}return r}t.exports=a},function(t,n,e){var f=e(2);t.exports=function(t,n){var e=f(t.data,n,true);var r=f(t.data,n,true);var i=t.children.length;var a=Math.round(i/2);var o=n.getSide||function(t,n){if(n<a){return"right"}return"left"};for(var u=0;u<i;u++){var s=t.children[u];var c=o(s,u);if(c==="right"){r.children.push(s)}else{e.children.push(s)}}e.eachNode(function(t){if(!t.isRoot()){t.side="left"}});r.eachNode(function(t){if(!t.isRoot()){t.side="right"}});return{left:e,right:r}}},function(t,n,e){var r={compactBox:e(5),dendrogram:e(7),indented:e(9),mindmap:e(11)};t.exports=r},function(t,n,e){function r(t,n){if(!(t instanceof n)){throw new TypeError("Cannot call a class as a function")}}function i(t,n){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:t}function a(t,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(n)Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n}var o=e(0);var u=e(6);var s=e(1);var c=function(t){a(n,t);function n(){r(this,n);return i(this,t.apply(this,arguments))}n.prototype.execute=function t(){var n=this;return s(n.rootNode,n.options,u)};return n}(o);var f={};function l(t,n){n=Object.assign({},f,n);return new c(t,n).execute()}t.exports=l},function(t,n){function m(t,n,e){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var i=this;i.w=t||0;i.h=n||0;i.y=e||0;i.x=0;i.c=r||[];i.cs=r.length;i.prelim=0;i.mod=0;i.shift=0;i.change=0;i.tl=null;i.tr=null;i.el=null;i.er=null;i.msel=0;i.mser=0}m.fromNode=function(t,n){if(!t)return null;var e=[];t.children.forEach(function(t){e.push(m.fromNode(t,n))});if(n)return new m(t.height,t.width,t.x,e);return new m(t.width,t.height,t.y,e)};function r(t,n,e){if(e){t.y+=n}else{t.x+=n}t.children.forEach(function(t){r(t,n,e)})}function i(t,n){var e=n?t.y:t.x;t.children.forEach(function(t){e=Math.min(i(t,n),e)});return e}function x(t,n){var e=i(t,n);r(t,-e,n)}function _(t,e,r){if(r){e.y=t.x}else{e.x=t.x}t.c.forEach(function(t,n){_(t,e.children[n],r)})}function w(t,n){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(n){t.x=e;e+=t.width}else{t.y=e;e+=t.height}t.children.forEach(function(t){w(t,n,e)})}t.exports=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var e=n.isHorizontal;function i(t){if(t.cs===0){a(t);return}i(t.c[0]);var n=g(p(t.c[0].el),0,null);for(var e=1;e<t.cs;++e){i(t.c[e]);var r=p(t.c[e].er);o(t,e,n);n=g(r,e,n)}u(t);a(t)}function a(t){if(t.cs===0){t.el=t;t.er=t;t.msel=t.mser=0}else{t.el=t.c[0].el;t.msel=t.c[0].msel;t.er=t.c[t.cs-1].er;t.mser=t.c[t.cs-1].mser}}function o(t,n,e){var r=t.c[n-1];var i=r.mod;var a=t.c[n];var o=a.mod;while(r!==null&&a!==null){if(p(r)>e.low)e=e.nxt;var u=i+r.prelim+r.w-(o+a.prelim);if(u>0){o+=u;f(t,n,e.index,u)}var s=p(r);var c=p(a);if(s<=c){r=h(r);if(r!==null)i+=r.mod}if(s>=c){a=l(a);if(a!==null)o+=a.mod}}if(!r&&!!a){d(t,n,a,o)}else if(!!r&&!a){v(t,n,r,i)}}function f(t,n,e,r){t.c[n].mod+=r;t.c[n].msel+=r;t.c[n].mser+=r;s(t,n,e,r)}function l(t){return t.cs===0?t.tl:t.c[0]}function h(t){return t.cs===0?t.tr:t.c[t.cs-1]}function p(t){return t.y+t.h}function d(t,n,e,r){var i=t.c[0].el;i.tl=e;var a=r-e.mod-t.c[0].msel;i.mod+=a;i.prelim-=a;t.c[0].el=t.c[n].el;t.c[0].msel=t.c[n].msel}function v(t,n,e,r){var i=t.c[n].er;i.tr=e;var a=r-e.mod-t.c[n].mser;i.mod+=a;i.prelim-=a;t.c[n].er=t.c[n-1].er;t.c[n].mser=t.c[n-1].mser}function u(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}function r(t,n){n+=t.mod;t.x=t.prelim+n;c(t);for(var e=0;e<t.cs;e++){r(t.c[e],n)}}function s(t,n,e,r){if(e!==n-1){var i=n-e;t.c[e+1].shift+=r/i;t.c[n].shift-=r/i;t.c[n].change-=r-r/i}}function c(t){var n=0;var e=0;for(var r=0;r<t.cs;r++){n+=t.c[r].shift;e+=n+t.c[r].change;t.c[r].mod+=e}}function g(t,n,e){while(e!==null&&t>=e.low){e=e.nxt}return{low:t,index:n,nxt:e}}w(t,e);var y=m.fromNode(t,e);i(y);r(y,0);_(y,t,e);x(t,e);return t}},function(t,n,e){function r(t,n){if(!(t instanceof n)){throw new TypeError("Cannot call a class as a function")}}function i(t,n){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:t}function a(t,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(n)Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n}var o=e(0);var u=e(8);var s=e(1);var c=function(t){a(n,t);function n(){r(this,n);return i(this,t.apply(this,arguments))}n.prototype.execute=function t(){var n=this;n.rootNode.width=0;return s(n.rootNode,n.options,u)};return n}(o);var f={};function l(t,n){n=Object.assign({},f,n);return new c(t,n).execute()}t.exports=l},function(t,n){function s(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var e=this;e.x=e.y=0;e.leftChild=e.rightChild=null;e.height=0;e.children=n}var c={isHorizontal:true,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function f(t,e,r){if(r){e.x=t.x;e.y=t.y}else{e.x=t.y;e.y=t.x}t.children.forEach(function(t,n){f(t,e.children[n],r)})}t.exports=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n=Object.assign({},c,n);var a=0;function o(t){if(!t)return null;t.width=0;if(t.depth&&t.depth>a){a=t.depth}var n=t.children;var r=n.length;var i=new s(t.height,[]);n.forEach(function(t,n){var e=o(t);i.children.push(e);if(n===0){i.leftChild=e}if(n===r-1){i.rightChild=e}});i.originNode=t;i.isLeaf=t.isLeaf();return i}function r(t){if(t.isLeaf||t.children.length===0){t.drawingDepth=a}else{var n=t.children.map(function(t){return r(t)});var e=Math.min.apply(null,n);t.drawingDepth=e-1}return t.drawingDepth}var e=void 0;function i(t){t.x=t.drawingDepth*n.rankSep;if(t.isLeaf){t.y=0;if(e){t.y=e.y+e.height+n.nodeSep;if(t.originNode.parent!==e.originNode.parent){t.y+=n.subTreeSep}}e=t}else{t.children.forEach(function(t){i(t)});t.y=(t.leftChild.y+t.rightChild.y)/2}}var u=o(t);r(u);i(u);f(u,t,n.isHorizontal);return t}},function(t,n,e){function r(t,n){if(!(t instanceof n)){throw new TypeError("Cannot call a class as a function")}}function i(t,n){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:t}function a(t,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(n)Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n}var o=e(0);var f=e(10);var l=e(3);var h=["LR","RL","H"];var p=h[0];var u=function(t){a(n,t);function n(){r(this,n);return i(this,t.apply(this,arguments))}n.prototype.execute=function t(){var n=this;var e=n.options;var r=n.rootNode;e.isHorizontal=true;var i=e.indent;var a=e.direction||p;if(a&&h.indexOf(a)===-1){throw new TypeError("Invalid direction: "+a)}if(a===h[0]){f(r,i)}else if(a===h[1]){f(r,i);r.right2left()}else if(a===h[2]){var o=l(r,e),u=o.left,s=o.right;f(u,i);u.right2left();f(s,i);var c=u.getBoundingBox();s.translate(c.width,0);r.x=s.x-r.width/2}return r};return n}(o);var s={};function c(t,n){n=Object.assign({},s,n);return new u(t,n).execute()}t.exports=c},function(t,n){var r=20;function i(t,n,e){t.x+=e*t.depth;t.y=n?n.y+n.height:0}t.exports=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:r;var e=null;t.eachNode(function(t){i(t,e,n);e=t})}},function(t,n,e){function r(t,n){if(!(t instanceof n)){throw new TypeError("Cannot call a class as a function")}}function i(t,n){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:t}function a(t,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(n)Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n}var o=e(0);var u=e(12);var s=e(1);var c=function(t){a(n,t);function n(){r(this,n);return i(this,t.apply(this,arguments))}n.prototype.execute=function t(){var n=this;return s(n.rootNode,n.options,u)};return n}(o);var f={};function l(t,n){n=Object.assign({},f,n);return new c(t,n).execute()}t.exports=l},function(t,n){function r(t,n){var e=0;if(!t.children.length){e=t.height}else{t.children.forEach(function(t){e+=r(t,n)})}t._subTreeSep=n.getSubTreeSep(t.data);t.totalHeight=Math.max(t.height,e)+2*t._subTreeSep;return t.totalHeight}function s(t){var n=t.children;var e=n.length;if(e){n.forEach(function(t){s(t)});var r=n[0];var i=n[e-1];var a=i.y-r.y+i.height;var o=0;n.forEach(function(t){o+=t.totalHeight});if(a>t.height){t.y=r.y+a/2-t.height/2}else if(n.length!==1||t.height>o){var u=t.y+(t.height-a)/2-r.y;n.forEach(function(t){t.translate(0,u)})}else{t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}}var e={getSubTreeSep:function t(){return 0}};t.exports=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n=Object.assign({},e,n);t.parent={x:0,width:0,height:0,y:0};t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width});t.parent=null;r(t,n);t.startY=0;t.y=t.totalHeight/2-t.height/2;t.eachNode(function(t){var n=t.children;var e=n.length;if(e){var r=n[0];r.startY=t.startY+t._subTreeSep;if(e===1){r.y=t.y+t.height/2-r.height/2}else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<e;i++){var a=n[i];a.startY=n[i-1].startY+n[i-1].totalHeight;a.y=a.startY+a.totalHeight/2-a.height/2}}}});s(t)}}])});(function(t,n){typeof exports==="object"&&typeof module!=="undefined"?n(exports):typeof define==="function"&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})})(this,function(U){"use strict";var t="4.13.0";function u(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function k(a){if(a.length===1)a=n(a);return{left:function(t,n,e,r){if(e==null)e=0;if(r==null)r=t.length;while(e<r){var i=e+r>>>1;if(a(t[i],n)<0)e=i+1;else r=i}return e},right:function(t,n,e,r){if(e==null)e=0;if(r==null)r=t.length;while(e<r){var i=e+r>>>1;if(a(t[i],n)>0)r=i;else e=i+1}return e}}}function n(e){return function(t,n){return u(e(t),n)}}var e=k(u);var v=e.right;var r=e.left;function i(t,n){if(n==null)n=f;var e=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);while(e<r)a[e]=n(i,i=t[++e]);return a}function f(t,n){return[t,n]}function a(t,n,e){var r=t.length,i=n.length,a=new Array(r*i),o,u,s,c;if(e==null)e=f;for(o=s=0;o<r;++o){for(c=t[o],u=0;u<i;++u,++s){a[s]=e(c,n[u])}}return a}function o(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function c(t){return t===null?NaN:+t}function s(t,n){var e=t.length,r=0,i=-1,a=0,o,u,s=0;if(n==null){while(++i<e){if(!isNaN(o=c(t[i]))){u=o-a;a+=u/++r;s+=u*(o-a)}}}else{while(++i<e){if(!isNaN(o=c(n(t[i],i,t)))){u=o-a;a+=u/++r;s+=u*(o-a)}}}if(r>1)return s/(r-1)}function l(t,n){var e=s(t,n);return e?Math.sqrt(e):e}function g(t,n){var e=t.length,r=-1,i,a,o;if(n==null){while(++r<e){if((i=t[r])!=null&&i>=i){a=o=i;while(++r<e){if((i=t[r])!=null){if(a>i)a=i;if(o<i)o=i}}}}}else{while(++r<e){if((i=n(t[r],r,t))!=null&&i>=i){a=o=i;while(++r<e){if((i=n(t[r],r,t))!=null){if(a>i)a=i;if(o<i)o=i}}}}}return[a,o]}var h=Array.prototype;var y=h.slice;var p=h.map;function m(t){return function(){return t}}function x(t){return t}function S(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,a=new Array(i);while(++r<i){a[r]=t+r*e}return a}var d=Math.sqrt(50);var _=Math.sqrt(10);var w=Math.sqrt(2);function b(t,n,e){var r,i=-1,a,o,u;n=+n,t=+t,e=+e;if(t===n&&e>0)return[t];if(r=n<t)a=t,t=n,n=a;if((u=M(t,n,e))===0||!isFinite(u))return[];if(u>0){t=Math.ceil(t/u);n=Math.floor(n/u);o=new Array(a=Math.ceil(n-t+1));while(++i<a)o[i]=(t+i)*u}else{t=Math.floor(t*u);n=Math.ceil(n*u);o=new Array(a=Math.ceil(t-n+1));while(++i<a)o[i]=(t-i)/u}if(r)o.reverse();return o}function M(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=d?10:a>=_?5:a>=w?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=d?10:a>=_?5:a>=w?2:1)}function A(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;if(a>=d)i*=10;else if(a>=_)i*=5;else if(a>=w)i*=2;return n<t?-i:i}function C(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function N(){var h=x,p=g,d=C;function n(t){var n,e=t.length,r,i=new Array(e);for(n=0;n<e;++n){i[n]=h(t[n],n,t)}var a=p(i),o=a[0],u=a[1],s=d(i,o,u);if(!Array.isArray(s)){s=A(o,u,s);s=S(Math.ceil(o/s)*s,Math.floor(u/s)*s,s)}var c=s.length;while(s[0]<=o)s.shift(),--c;while(s[c-1]>u)s.pop(),--c;var f=new Array(c+1),l;for(n=0;n<=c;++n){l=f[n]=[];l.x0=n>0?s[n-1]:o;l.x1=n<c?s[n]:u}for(n=0;n<e;++n){r=i[n];if(o<=r&&r<=u){f[v(s,r,0,c)].push(t[n])}}return f}n.value=function(t){return arguments.length?(h=typeof t==="function"?t:m(t),n):h};n.domain=function(t){return arguments.length?(p=typeof t==="function"?t:m([t[0],t[1]]),n):p};n.thresholds=function(t){return arguments.length?(d=typeof t==="function"?t:Array.isArray(t)?m(y.call(t)):m(t),n):d};return n}function T(t,n,e){if(e==null)e=c;if(!(r=t.length))return;if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,a=Math.floor(i),o=+e(t[a],a,t),u=+e(t[a+1],a+1,t);return o+(u-o)*(i-a)}function E(t,n,e){t=p.call(t,c).sort(u);return Math.ceil((e-n)/(2*(T(t,.75)-T(t,.25))*Math.pow(t.length,-1/3)))}function j(t,n,e){return Math.ceil((e-n)/(3.5*l(t)*Math.pow(t.length,-1/3)))}function O(t,n){var e=t.length,r=-1,i,a;if(n==null){while(++r<e){if((i=t[r])!=null&&i>=i){a=i;while(++r<e){if((i=t[r])!=null&&i>a){a=i}}}}}else{while(++r<e){if((i=n(t[r],r,t))!=null&&i>=i){a=i;while(++r<e){if((i=n(t[r],r,t))!=null&&i>a){a=i}}}}}return a}function L(t,n){var e=t.length,r=e,i=-1,a,o=0;if(n==null){while(++i<e){if(!isNaN(a=c(t[i])))o+=a;else--r}}else{while(++i<e){if(!isNaN(a=c(n(t[i],i,t))))o+=a;else--r}}if(r)return o/r}function I(t,n){var e=t.length,r=-1,i,a=[];if(n==null){while(++r<e){if(!isNaN(i=c(t[r]))){a.push(i)}}}else{while(++r<e){if(!isNaN(i=c(n(t[r],r,t)))){a.push(i)}}}return T(a.sort(u),.5)}function P(t){var n=t.length,e,r=-1,i=0,a,o;while(++r<n)i+=t[r].length;a=new Array(i);while(--n>=0){o=t[n];e=o.length;while(--e>=0){a[--i]=o[e]}}return a}function R(t,n){var e=t.length,r=-1,i,a;if(n==null){while(++r<e){if((i=t[r])!=null&&i>=i){a=i;while(++r<e){if((i=t[r])!=null&&a>i){a=i}}}}}else{while(++r<e){if((i=n(t[r],r,t))!=null&&i>=i){a=i;while(++r<e){if((i=n(t[r],r,t))!=null&&a>i){a=i}}}}}return a}function D(t,n){var e=n.length,r=new Array(e);while(e--)r[e]=t[n[e]];return r}function z(t,n){if(!(e=t.length))return;var e,r=0,i=0,a,o=t[i];if(n==null)n=u;while(++r<e){if(n(a=t[r],o)<0||n(o,o)!==0){o=a,i=r}}if(n(o,o)===0)return i}function F(t,n,e){var r=(e==null?t.length:e)-(n=n==null?0:+n),i,a;while(r){a=Math.random()*r--|0;i=t[r+n];t[r+n]=t[a+n];t[a+n]=i}return t}function B(t,n){var e=t.length,r=-1,i,a=0;if(n==null){while(++r<e){if(i=+t[r])a+=i}}else{while(++r<e){if(i=+n(t[r],r,t))a+=i}}return a}function q(t){if(!(a=t.length))return[];for(var n=-1,e=R(t,H),r=new Array(e);++n<e;){for(var i=-1,a,o=r[n]=new Array(a);++i<a;){o[i]=t[i][n]}}return r}function H(t){return t.length}function Y(){return q(arguments)}var G=Array.prototype.slice;function V(t){return t}var X=1;var W=2;var Z=3;var $=4;var J=1e-6;function K(t){return"translate("+(t+.5)+",0)"}function Q(t){return"translate(0,"+(t+.5)+")"}function tt(n){return function(t){return+n(t)}}function nt(n){var e=Math.max(0,n.bandwidth()-1)/2;if(n.round())e=Math.round(e);return function(t){return+n(t)+e}}function et(){return!this.__axis}function rt(v,g){var y=[],m=null,x=null,_=6,w=6,b=3,M=v===X||v===$?-1:1,k=v===$||v===W?"x":"y",S=v===X||v===Z?K:Q;function n(t){var n=m==null?g.ticks?g.ticks.apply(g,y):g.domain():m,e=x==null?g.tickFormat?g.tickFormat.apply(g,y):V:x,r=Math.max(_,0)+b,i=g.range(),a=+i[0]+.5,o=+i[i.length-1]+.5,u=(g.bandwidth?nt:tt)(g.copy()),s=t.selection?t.selection():t,c=s.selectAll(".domain").data([null]),f=s.selectAll(".tick").data(n,g).order(),l=f.exit(),h=f.enter().append("g").attr("class","tick"),p=f.select("line"),d=f.select("text");c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));f=f.merge(h);p=p.merge(h.append("line").attr("stroke","#000").attr(k+"2",M*_));d=d.merge(h.append("text").attr("fill","#000").attr(k,M*r).attr("dy",v===X?"0em":v===Z?"0.71em":"0.32em"));if(t!==s){c=c.transition(t);f=f.transition(t);p=p.transition(t);d=d.transition(t);l=l.transition(t).attr("opacity",J).attr("transform",function(t){return isFinite(t=u(t))?S(t):this.getAttribute("transform")});h.attr("opacity",J).attr("transform",function(t){var n=this.parentNode.__axis;return S(n&&isFinite(n=n(t))?n:u(t))})}l.remove();c.attr("d",v===$||v==W?"M"+M*w+","+a+"H0.5V"+o+"H"+M*w:"M"+a+","+M*w+"V0.5H"+o+"V"+M*w);f.attr("opacity",1).attr("transform",function(t){return S(u(t))});p.attr(k+"2",M*_);d.attr(k,M*r).text(e);s.filter(et).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",v===W?"start":v===$?"end":"middle");s.each(function(){this.__axis=u})}n.scale=function(t){return arguments.length?(g=t,n):g};n.ticks=function(){return y=G.call(arguments),n};n.tickArguments=function(t){return arguments.length?(y=t==null?[]:G.call(t),n):y.slice()};n.tickValues=function(t){return arguments.length?(m=t==null?null:G.call(t),n):m&&m.slice()};n.tickFormat=function(t){return arguments.length?(x=t,n):x};n.tickSize=function(t){return arguments.length?(_=w=+t,n):_};n.tickSizeInner=function(t){return arguments.length?(_=+t,n):_};n.tickSizeOuter=function(t){return arguments.length?(w=+t,n):w};n.tickPadding=function(t){return arguments.length?(b=+t,n):b};return n}function it(t){return rt(X,t)}function at(t){return rt(W,t)}function ot(t){return rt(Z,t)}function ut(t){return rt($,t)}var st={value:function(){}};function ct(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e)throw new Error("illegal type: "+r);e[r]=[]}return new ft(e)}function ft(t){this._=t}function lt(t,r){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0)n=t.slice(e+1),t=t.slice(0,e);if(t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}ft.prototype=ct.prototype={constructor:ft,on:function(t,n){var e=this._,r=lt(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){while(++a<o)if((i=(t=r[a]).type)&&(i=ht(e[i],t.name)))return i;return}if(n!=null&&typeof n!=="function")throw new Error("invalid callback: "+n);while(++a<o){if(i=(t=r[a]).type)e[i]=pt(e[i],t.name,n);else if(n==null)for(i in e)e[i]=pt(e[i],t.name,null)}return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new ft(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function ht(t,n){for(var e=0,r=t.length,i;e<r;++e){if((i=t[e]).name===n){return i.value}}}function pt(t,n,e){for(var r=0,i=t.length;r<i;++r){if(t[r].name===n){t[r]=st,t=t.slice(0,r).concat(t.slice(r+1));break}}if(e!=null)t.push({name:n,value:e});return t}var dt="http://www.w3.org/1999/xhtml";var vt={svg:"http://www.w3.org/2000/svg",xhtml:dt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gt(t){var n=t+="",e=n.indexOf(":");if(e>=0&&(n=t.slice(0,e))!=="xmlns")t=t.slice(e+1);return vt.hasOwnProperty(n)?{space:vt[n],local:t}:t}function yt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===dt&&t.documentElement.namespaceURI===dt?t.createElement(e):t.createElementNS(n,e)}}function mt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xt(t){var n=gt(t);return(n.local?mt:yt)(n)}function _t(){}function wt(t){return t==null?_t:function(){return this.querySelector(t)}}function bt(t){if(typeof t!=="function")t=wt(t);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var a=n[i],o=a.length,u=r[i]=new Array(o),s,c,f=0;f<o;++f){if((s=a[f])&&(c=t.call(s,s.__data__,f,a))){if("__data__"in s)c.__data__=s.__data__;u[f]=c}}}return new ie(r,this._parents)}function Mt(){return[]}function kt(t){return t==null?Mt:function(){return this.querySelectorAll(t)}}function St(t){if(typeof t!=="function")t=kt(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a){for(var o=n[a],u=o.length,s,c=0;c<u;++c){if(s=o[c]){r.push(t.call(s,s.__data__,c,o));i.push(s)}}}return new ie(r,i)}var At=function(t){return function(){return this.matches(t)}};if(typeof document!=="undefined"){var Ct=document.documentElement;if(!Ct.matches){var Nt=Ct.webkitMatchesSelector||Ct.msMatchesSelector||Ct.mozMatchesSelector||Ct.oMatchesSelector;At=function(t){return function(){return Nt.call(this,t)}}}}var Tt=At;function Et(t){if(typeof t!=="function")t=Tt(t);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var a=n[i],o=a.length,u=r[i]=[],s,c=0;c<o;++c){if((s=a[c])&&t.call(s,s.__data__,c,a)){u.push(s)}}}return new ie(r,this._parents)}function jt(t){return new Array(t.length)}function Ot(){return new ie(this._enter||this._groups.map(jt),this._parents)}function Lt(t,n){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=n}Lt.prototype={constructor:Lt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function It(t){return function(){return t}}var Pt="$";function Rt(t,n,e,r,i,a){var o=0,u,s=n.length,c=a.length;for(;o<c;++o){if(u=n[o]){u.__data__=a[o];r[o]=u}else{e[o]=new Lt(t,a[o])}}for(;o<s;++o){if(u=n[o]){i[o]=u}}}function Dt(t,n,e,r,i,a,o){var u,s,c={},f=n.length,l=a.length,h=new Array(f),p;for(u=0;u<f;++u){if(s=n[u]){h[u]=p=Pt+o.call(s,s.__data__,u,n);if(p in c){i[u]=s}else{c[p]=s}}}for(u=0;u<l;++u){p=Pt+o.call(t,a[u],u,a);if(s=c[p]){r[u]=s;s.__data__=a[u];c[p]=null}else{e[u]=new Lt(t,a[u])}}for(u=0;u<f;++u){if((s=n[u])&&c[h[u]]===s){i[u]=s}}}function zt(t,n){if(!t){p=new Array(this.size()),c=-1;this.each(function(t){p[++c]=t});return p}var e=n?Dt:Rt,r=this._parents,i=this._groups;if(typeof t!=="function")t=It(t);for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var f=r[c],l=i[c],h=l.length,p=t.call(f,f&&f.__data__,c,r),d=p.length,v=u[c]=new Array(d),g=o[c]=new Array(d),y=s[c]=new Array(h);e(f,l,v,g,y,p,n);for(var m=0,x=0,_,w;m<d;++m){if(_=v[m]){if(m>=x)x=m+1;while(!(w=g[x])&&++x<d);_._next=w||null}}}o=new ie(o,r);o._enter=u;o._exit=s;return o}function Ft(){return new ie(this._exit||this._groups.map(jt),this._parents)}function Bt(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u){for(var s=n[u],c=e[u],f=s.length,l=o[u]=new Array(f),h,p=0;p<f;++p){if(h=s[p]||c[p]){l[p]=h}}}for(;u<r;++u){o[u]=n[u]}return new ie(o,this._parents)}function qt(){for(var t=this._groups,n=-1,e=t.length;++n<e;){for(var r=t[n],i=r.length-1,a=r[i],o;--i>=0;){if(o=r[i]){if(a&&a!==o.nextSibling)a.parentNode.insertBefore(o,a);a=o}}}return this}function Ut(e){if(!e)e=Ht;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),c,f=0;f<u;++f){if(c=o[f]){s[f]=c}}s.sort(t)}return new ie(i,this._parents).order()}function Ht(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Yt(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Gt(){var t=new Array(this.size()),n=-1;this.each(function(){t[++n]=this});return t}function Vt(){for(var t=this._groups,n=0,e=t.length;n<e;++n){for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}}return null}function Xt(){var t=0;this.each(function(){++t});return t}function Wt(){return!this.node()}function Zt(t){for(var n=this._groups,e=0,r=n.length;e<r;++e){for(var i=n[e],a=0,o=i.length,u;a<o;++a){if(u=i[a])t.call(u,u.__data__,a,i)}}return this}function $t(t){return function(){this.removeAttribute(t)}}function Jt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Kt(t,n){return function(){this.setAttribute(t,n)}}function Qt(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function tn(n,e){return function(){var t=e.apply(this,arguments);if(t==null)this.removeAttribute(n);else this.setAttribute(n,t)}}function nn(n,e){return function(){var t=e.apply(this,arguments);if(t==null)this.removeAttributeNS(n.space,n.local);else this.setAttributeNS(n.space,n.local,t)}}function en(t,n){var e=gt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Jt:$t:typeof n==="function"?e.local?nn:tn:e.local?Qt:Kt)(e,n))}function rn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function an(t){return function(){this.style.removeProperty(t)}}function on(t,n,e){return function(){this.style.setProperty(t,n,e)}}function un(n,e,r){return function(){var t=e.apply(this,arguments);if(t==null)this.style.removeProperty(n);else this.style.setProperty(n,t,r)}}function sn(t,n,e){return arguments.length>1?this.each((n==null?an:typeof n==="function"?un:on)(t,n,e==null?"":e)):cn(this.node(),t)}function cn(t,n){return t.style.getPropertyValue(n)||rn(t).getComputedStyle(t,null).getPropertyValue(n)}function fn(t){return function(){delete this[t]}}function ln(t,n){return function(){this[t]=n}}function hn(n,e){return function(){var t=e.apply(this,arguments);if(t==null)delete this[n];else this[n]=t}}function pn(t,n){return arguments.length>1?this.each((n==null?fn:typeof n==="function"?hn:ln)(t,n)):this.node()[t]}function dn(t){return t.trim().split(/^|\s+/)}function vn(t){return t.classList||new gn(t)}function gn(t){this._node=t;this._names=dn(t.getAttribute("class")||"")}gn.prototype={add:function(t){var n=this._names.indexOf(t);if(n<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var n=this._names.indexOf(t);if(n>=0){this._names.splice(n,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function yn(t,n){var e=vn(t),r=-1,i=n.length;while(++r<i)e.add(n[r])}function mn(t,n){var e=vn(t),r=-1,i=n.length;while(++r<i)e.remove(n[r])}function xn(t){return function(){yn(this,t)}}function _n(t){return function(){mn(this,t)}}function wn(t,n){return function(){(n.apply(this,arguments)?yn:mn)(this,t)}}function bn(t,n){var e=dn(t+"");if(arguments.length<2){var r=vn(this.node()),i=-1,a=e.length;while(++i<a)if(!r.contains(e[i]))return false;return true}return this.each((typeof n==="function"?wn:n?xn:_n)(e,n))}function Mn(){this.textContent=""}function kn(t){return function(){this.textContent=t}}function Sn(n){return function(){var t=n.apply(this,arguments);this.textContent=t==null?"":t}}function An(t){return arguments.length?this.each(t==null?Mn:(typeof t==="function"?Sn:kn)(t)):this.node().textContent}function Cn(){this.innerHTML=""}function Nn(t){return function(){this.innerHTML=t}}function Tn(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t==null?"":t}}function En(t){return arguments.length?this.each(t==null?Cn:(typeof t==="function"?Tn:Nn)(t)):this.node().innerHTML}function jn(){if(this.nextSibling)this.parentNode.appendChild(this)}function On(){return this.each(jn)}function Ln(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function In(){return this.each(Ln)}function Pn(t){var n=typeof t==="function"?t:xt(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Rn(){return null}function Dn(t,n){var e=typeof t==="function"?t:xt(t),r=n==null?Rn:typeof n==="function"?n:wt(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function zn(){var t=this.parentNode;if(t)t.removeChild(this)}function Fn(){return this.each(zn)}function Bn(){return this.parentNode.insertBefore(this.cloneNode(false),this.nextSibling)}function qn(){return this.parentNode.insertBefore(this.cloneNode(true),this.nextSibling)}function Un(t){return this.select(t?qn:Bn)}function Hn(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Yn={};U.event=null;if(typeof document!=="undefined"){var Gn=document.documentElement;if(!("onmouseenter"in Gn)){Yn={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Vn(e,t,n){e=Xn(e,t,n);return function(t){var n=t.relatedTarget;if(!n||n!==this&&!(n.compareDocumentPosition(this)&8)){e.call(this,t)}}}function Xn(e,r,i){return function(t){var n=U.event;U.event=t;try{e.call(this,this.__data__,r,i)}finally{U.event=n}}}function Wn(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0)n=t.slice(e+1),t=t.slice(0,e);return{type:t,name:n}})}function Zn(a){return function(){var t=this.__on;if(!t)return;for(var n=0,e=-1,r=t.length,i;n<r;++n){if(i=t[n],(!a.type||i.type===a.type)&&i.name===a.name){this.removeEventListener(i.type,i.listener,i.capture)}else{t[++e]=i}}if(++e)t.length=e;else delete this.__on}}function $n(s,c,f){var l=Yn.hasOwnProperty(s.type)?Vn:Xn;return function(t,n,e){var r=this.__on,i,a=l(c,n,e);if(r)for(var o=0,u=r.length;o<u;++o){if((i=r[o]).type===s.type&&i.name===s.name){this.removeEventListener(i.type,i.listener,i.capture);this.addEventListener(i.type,i.listener=a,i.capture=f);i.value=c;return}}this.addEventListener(s.type,a,f);i={type:s.type,name:s.name,value:c,listener:a,capture:f};if(!r)this.__on=[i];else r.push(i)}}function Jn(t,n,e){var r=Wn(t+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u)for(var s=0,c=u.length,f;s<c;++s){for(i=0,f=u[s];i<a;++i){if((o=r[i]).type===f.type&&o.name===f.name){return f.value}}}return}u=n?$n:Zn;if(e==null)e=false;for(i=0;i<a;++i)this.each(u(r[i],n,e));return this}function Kn(t,n,e,r){var i=U.event;t.sourceEvent=U.event;U.event=t;try{return n.apply(e,r)}finally{U.event=i}}function Qn(t,n,e){var r=rn(t),i=r.CustomEvent;if(typeof i==="function"){i=new i(n,e)}else{i=r.document.createEvent("Event");if(e)i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail;else i.initEvent(n,false,false)}t.dispatchEvent(i)}function te(t,n){return function(){return Qn(this,t,n)}}function ne(t,n){return function(){return Qn(this,t,n.apply(this,arguments))}}function ee(t,n){return this.each((typeof n==="function"?ne:te)(t,n))}var re=[null];function ie(t,n){this._groups=t;this._parents=n}function ae(){return new ie([[document.documentElement]],re)}ie.prototype=ae.prototype={constructor:ie,select:bt,selectAll:St,filter:Et,data:zt,enter:Ot,exit:Ft,merge:Bt,order:qt,sort:Ut,call:Yt,nodes:Gt,node:Vt,size:Xt,empty:Wt,each:Zt,attr:en,style:sn,property:pn,classed:bn,text:An,html:En,raise:On,lower:In,append:Pn,insert:Dn,remove:Fn,clone:Un,datum:Hn,on:Jn,dispatch:ee};function oe(t){return typeof t==="string"?new ie([[document.querySelector(t)]],[document.documentElement]):new ie([[t]],re)}function ue(t){return oe(xt(t).call(document.documentElement))}var se=0;function ce(){return new fe}function fe(){this._="@"+(++se).toString(36)}fe.prototype=ce.prototype={constructor:fe,get:function(t){var n=this._;while(!(n in t))if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function le(){var t=U.event,n;while(n=t.sourceEvent)t=n;return t}function he(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();r.x=n.clientX,r.y=n.clientY;r=r.matrixTransform(t.getScreenCTM().inverse());return[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function pe(t){var n=le();if(n.changedTouches)n=n.changedTouches[0];return he(t,n)}function de(t){return typeof t==="string"?new ie([document.querySelectorAll(t)],[document.documentElement]):new ie([t==null?[]:t],re)}function ve(t,n,e){if(arguments.length<3)e=n,n=le().changedTouches;for(var r=0,i=n?n.length:0,a;r<i;++r){if((a=n[r]).identifier===e){return he(t,a)}}return null}function ge(t,n){if(n==null)n=le().touches;for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e){i[e]=he(t,n[e])}return i}function ye(){U.event.stopImmediatePropagation()}function me(){U.event.preventDefault();U.event.stopImmediatePropagation()}function xe(t){var n=t.document.documentElement,e=oe(t).on("dragstart.drag",me,true);if("onselectstart"in n){e.on("selectstart.drag",me,true)}else{n.__noselect=n.style.MozUserSelect;n.style.MozUserSelect="none"}}function _e(t,n){var e=t.document.documentElement,r=oe(t).on("dragstart.drag",null);if(n){r.on("click.drag",me,true);setTimeout(function(){r.on("click.drag",null)},0)}if("onselectstart"in e){r.on("selectstart.drag",null)}else{e.style.MozUserSelect=e.__noselect;delete e.__noselect}}function we(t){return function(){return t}}function be(t,n,e,r,i,a,o,u,s,c){this.target=t;this.type=n;this.subject=e;this.identifier=r;this.active=i;this.x=a;this.y=o;this.dx=u;this.dy=s;this._=c}be.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Me(){return!U.event.button}function ke(){return this.parentNode}function Se(t){return t==null?{x:U.event.x,y:U.event.y}:t}function Ae(){return"ontouchstart"in this}function Ce(){var a=Me,o=ke,n=Se,e=Ae,d={},r=ct("start","drag","end"),v=0,i,u,s,c,f=0;function g(t){t.on("mousedown.drag",l).filter(e).on("touchstart.drag",y).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){if(c||!a.apply(this,arguments))return;var t=_("mouse",o.apply(this,arguments),pe,this,arguments);if(!t)return;oe(U.event.view).on("mousemove.drag",h,true).on("mouseup.drag",p,true);xe(U.event.view);ye();s=false;i=U.event.clientX;u=U.event.clientY;t("start")}function h(){me();if(!s){var t=U.event.clientX-i,n=U.event.clientY-u;s=t*t+n*n>f}d.mouse("drag")}function p(){oe(U.event.view).on("mousemove.drag mouseup.drag",null);_e(U.event.view,s);me();d.mouse("end")}function y(){if(!a.apply(this,arguments))return;var t=U.event.changedTouches,n=o.apply(this,arguments),e=t.length,r,i;for(r=0;r<e;++r){if(i=_(t[r].identifier,n,ve,this,arguments)){ye();i("start")}}}function m(){var t=U.event.changedTouches,n=t.length,e,r;for(e=0;e<n;++e){if(r=d[t[e].identifier]){me();r("drag")}}}function x(){var t=U.event.changedTouches,n=t.length,e,r;if(c)clearTimeout(c);c=setTimeout(function(){c=null},500);for(e=0;e<n;++e){if(r=d[t[e].identifier]){ye();r("end")}}}function _(i,a,o,u,s){var c=o(a,i),f,l,h,p=r.copy();if(!Kn(new be(g,"beforestart",f,i,v,c[0],c[1],0,0,p),function(){if((U.event.subject=f=n.apply(u,s))==null)return false;l=f.x-c[0]||0;h=f.y-c[1]||0;return true}))return;return function t(n){var e=c,r;switch(n){case"start":d[i]=t,r=v++;break;case"end":delete d[i],--v;case"drag":c=o(a,i),r=v;break}Kn(new be(g,n,f,i,r,c[0]+l,c[1]+h,c[0]-e[0],c[1]-e[1],p),p.apply,p,[n,u,s])}}g.filter=function(t){return arguments.length?(a=typeof t==="function"?t:we(!!t),g):a};g.container=function(t){return arguments.length?(o=typeof t==="function"?t:we(t),g):o};g.subject=function(t){return arguments.length?(n=typeof t==="function"?t:we(t),g):n};g.touchable=function(t){return arguments.length?(e=typeof t==="function"?t:we(!!t),g):e};g.on=function(){var t=r.on.apply(r,arguments);return t===r?g:t};g.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,g):Math.sqrt(f)};return g}function Ne(t,n,e){t.prototype=n.prototype=e;e.constructor=t}function Te(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ee(){}var je=.7;var Oe=1/je;var Le="\\s*([+-]?\\d+)\\s*";var Ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*";var Pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";var Re=/^#([0-9a-f]{3})$/;var De=/^#([0-9a-f]{6})$/;var ze=new RegExp("^rgb\\("+[Le,Le,Le]+"\\)$");var Fe=new RegExp("^rgb\\("+[Pe,Pe,Pe]+"\\)$");var Be=new RegExp("^rgba\\("+[Le,Le,Le,Ie]+"\\)$");var qe=new RegExp("^rgba\\("+[Pe,Pe,Pe,Ie]+"\\)$");var Ue=new RegExp("^hsl\\("+[Ie,Pe,Pe]+"\\)$");var He=new RegExp("^hsla\\("+[Ie,Pe,Pe,Ie]+"\\)$");var Ye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ne(Ee,Ge,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function Ge(t){var n;t=(t+"").trim().toLowerCase();return(n=Re.exec(t))?(n=parseInt(n[1],16),new $e(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1)):(n=De.exec(t))?Ve(parseInt(n[1],16)):(n=ze.exec(t))?new $e(n[1],n[2],n[3],1):(n=Fe.exec(t))?new $e(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Be.exec(t))?Xe(n[1],n[2],n[3],n[4]):(n=qe.exec(t))?Xe(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ue.exec(t))?Je(n[1],n[2]/100,n[3]/100,1):(n=He.exec(t))?Je(n[1],n[2]/100,n[3]/100,n[4]):Ye.hasOwnProperty(t)?Ve(Ye[t]):t==="transparent"?new $e(NaN,NaN,NaN,0):null}function Ve(t){return new $e(t>>16&255,t>>8&255,t&255,1)}function Xe(t,n,e,r){if(r<=0)t=n=e=NaN;return new $e(t,n,e,r)}function We(t){if(!(t instanceof Ee))t=Ge(t);if(!t)return new $e;t=t.rgb();return new $e(t.r,t.g,t.b,t.opacity)}function Ze(t,n,e,r){return arguments.length===1?We(t):new $e(t,n,e,r==null?1:r)}function $e(t,n,e,r){this.r=+t;this.g=+n;this.b=+e;this.opacity=+r}Ne($e,Ze,Te(Ee,{brighter:function(t){t=t==null?Oe:Math.pow(Oe,t);return new $e(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?je:Math.pow(je,t);return new $e(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},toString:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function Je(t,n,e,r){if(r<=0)t=n=e=NaN;else if(e<=0||e>=1)t=n=NaN;else if(n<=0)t=NaN;return new tr(t,n,e,r)}function Ke(t){if(t instanceof tr)return new tr(t.h,t.s,t.l,t.opacity);if(!(t instanceof Ee))t=Ge(t);if(!t)return new tr;if(t instanceof tr)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,u=a-i,s=(a+i)/2;if(u){if(n===a)o=(e-r)/u+(e<r)*6;else if(e===a)o=(r-n)/u+2;else o=(n-e)/u+4;u/=s<.5?a+i:2-a-i;o*=60}else{u=s>0&&s<1?0:o}return new tr(o,u,s,t.opacity)}function Qe(t,n,e,r){return arguments.length===1?Ke(t):new tr(t,n,e,r==null?1:r)}function tr(t,n,e,r){this.h=+t;this.s=+n;this.l=+e;this.opacity=+r}Ne(tr,Qe,Te(Ee,{brighter:function(t){t=t==null?Oe:Math.pow(Oe,t);return new tr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?je:Math.pow(je,t);return new tr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new $e(nr(t>=240?t-240:t+120,i,r),nr(t,i,r),nr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function nr(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}var er=Math.PI/180;var rr=180/Math.PI;var ir=18;var ar=.95047;var or=1;var ur=1.08883;var sr=4/29;var cr=6/29;var fr=3*cr*cr;var lr=cr*cr*cr;function hr(t){if(t instanceof dr)return new dr(t.l,t.a,t.b,t.opacity);if(t instanceof wr){var n=t.h*er;return new dr(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}if(!(t instanceof $e))t=We(t);var e=mr(t.r),r=mr(t.g),i=mr(t.b),a=vr((.4124564*e+.3575761*r+.1804375*i)/ar),o=vr((.2126729*e+.7151522*r+.072175*i)/or),u=vr((.0193339*e+.119192*r+.9503041*i)/ur);return new dr(116*o-16,500*(a-o),200*(o-u),t.opacity)}function pr(t,n,e,r){return arguments.length===1?hr(t):new dr(t,n,e,r==null?1:r)}function dr(t,n,e,r){this.l=+t;this.a=+n;this.b=+e;this.opacity=+r}Ne(dr,pr,Te(Ee,{brighter:function(t){return new dr(this.l+ir*(t==null?1:t),this.a,this.b,this.opacity)},darker:function(t){return new dr(this.l-ir*(t==null?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;t=or*gr(t);n=ar*gr(n);e=ur*gr(e);return new $e(yr(3.2404542*n-1.5371385*t-.4985314*e),yr(-.969266*n+1.8760108*t+.041556*e),yr(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}}));function vr(t){return t>lr?Math.pow(t,1/3):t/fr+sr}function gr(t){return t>cr?t*t*t:fr*(t-sr)}function yr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xr(t){if(t instanceof wr)return new wr(t.h,t.c,t.l,t.opacity);if(!(t instanceof dr))t=hr(t);var n=Math.atan2(t.b,t.a)*rr;return new wr(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function _r(t,n,e,r){return arguments.length===1?xr(t):new wr(t,n,e,r==null?1:r)}function wr(t,n,e,r){this.h=+t;this.c=+n;this.l=+e;this.opacity=+r}Ne(wr,_r,Te(Ee,{brighter:function(t){return new wr(this.h,this.c,this.l+ir*(t==null?1:t),this.opacity)},darker:function(t){return new wr(this.h,this.c,this.l-ir*(t==null?1:t),this.opacity)},rgb:function(){return hr(this).rgb()}}));var br=-.14861;var Mr=+1.78277;var kr=-.29227;var Sr=-.90649;var Ar=+1.97294;var Cr=Ar*Sr;var Nr=Ar*Mr;var Tr=Mr*kr-Sr*br;function Er(t){if(t instanceof Or)return new Or(t.h,t.s,t.l,t.opacity);if(!(t instanceof $e))t=We(t);var n=t.r/255,e=t.g/255,r=t.b/255,i=(Tr*r+Cr*n-Nr*e)/(Tr+Cr-Nr),a=r-i,o=(Ar*(e-i)-kr*a)/Sr,u=Math.sqrt(o*o+a*a)/(Ar*i*(1-i)),s=u?Math.atan2(o,a)*rr-120:NaN;return new Or(s<0?s+360:s,u,i,t.opacity)}function jr(t,n,e,r){return arguments.length===1?Er(t):new Or(t,n,e,r==null?1:r)}function Or(t,n,e,r){this.h=+t;this.s=+n;this.l=+e;this.opacity=+r}Ne(Or,jr,Te(Ee,{brighter:function(t){t=t==null?Oe:Math.pow(Oe,t);return new Or(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?je:Math.pow(je,t);return new Or(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*er,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new $e(255*(n+e*(br*r+Mr*i)),255*(n+e*(kr*r+Sr*i)),255*(n+e*(Ar*r)),this.opacity)}}));function Lr(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}function Ir(o){var u=o.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,u-1):Math.floor(t*u),e=o[n],r=o[n+1],i=n>0?o[n-1]:2*e-r,a=n<u-1?o[n+2]:2*r-e;return Lr((t-n/u)*u,i,e,r,a)}}function Pr(o){var u=o.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*u),e=o[(n+u-1)%u],r=o[n%u],i=o[(n+1)%u],a=o[(n+2)%u];return Lr((t-n/u)*u,e,r,i,a)}}function Rr(t){return function(){return t}}function Dr(n,e){return function(t){return n+t*e}}function zr(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(t){return Math.pow(n+t*e,r)}}function Fr(t,n){var e=n-t;return e?Dr(t,e>180||e<-180?e-360*Math.round(e/360):e):Rr(isNaN(t)?n:t)}function Br(e){return(e=+e)===1?qr:function(t,n){return n-t?zr(t,n,e):Rr(isNaN(t)?n:t)}}function qr(t,n){var e=n-t;return e?Dr(t,e):Rr(isNaN(t)?n:t)}var Ur=function t(n){var o=Br(n);function e(n,t){var e=o((n=Ze(n)).r,(t=Ze(t)).r),r=o(n.g,t.g),i=o(n.b,t.b),a=qr(n.opacity,t.opacity);return function(t){n.r=e(t);n.g=r(t);n.b=i(t);n.opacity=a(t);return n+""}}e.gamma=t;return e}(1);function Hr(u){return function(t){var n=t.length,e=new Array(n),r=new Array(n),i=new Array(n),a,o;for(a=0;a<n;++a){o=Ze(t[a]);e[a]=o.r||0;r[a]=o.g||0;i[a]=o.b||0}e=u(e);r=u(r);i=u(i);o.opacity=1;return function(t){o.r=e(t);o.g=r(t);o.b=i(t);return o+""}}}var Yr=Hr(Ir);var Gr=Hr(Pr);function Vr(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=ni(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(t){for(o=0;o<r;++o)a[o]=i[o](t);return a}}function Xr(n,e){var r=new Date;return n=+n,e-=n,function(t){return r.setTime(n+e*t),r}}function Wr(n,e){return n=+n,e-=n,function(t){return n+e*t}}function Zr(t,n){var e={},r={},i;if(t===null||typeof t!=="object")t={};if(n===null||typeof n!=="object")n={};for(i in n){if(i in t){e[i]=ni(t[i],n[i])}else{r[i]=n[i]}}return function(t){for(i in e)r[i]=e[i](t);return r}}var $r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;var Jr=new RegExp($r.source,"g");function Kr(t){return function(){return t}}function Qr(n){return function(t){return n(t)+""}}function ti(t,r){var n=$r.lastIndex=Jr.lastIndex=0,e,i,a,o=-1,u=[],s=[];t=t+"",r=r+"";while((e=$r.exec(t))&&(i=Jr.exec(r))){if((a=i.index)>n){a=r.slice(n,a);if(u[o])u[o]+=a;else u[++o]=a}if((e=e[0])===(i=i[0])){if(u[o])u[o]+=i;else u[++o]=i}else{u[++o]=null;s.push({i:o,x:Wr(e,i)})}n=Jr.lastIndex}if(n<r.length){a=r.slice(n);if(u[o])u[o]+=a;else u[++o]=a}return u.length<2?s[0]?Qr(s[0].x):Kr(r):(r=s.length,function(t){for(var n=0,e;n<r;++n)u[(e=s[n]).i]=e.x(t);return u.join("")})}function ni(t,n){var e=typeof n,r;return n==null||e==="boolean"?Rr(n):(e==="number"?Wr:e==="string"?(r=Ge(n))?(n=r,Ur):ti:n instanceof Ge?Ur:n instanceof Date?Xr:Array.isArray(n)?Vr:typeof n.valueOf!=="function"&&typeof n.toString!=="function"||isNaN(n)?Zr:Wr)(t,n)}function ei(n,e){return n=+n,e-=n,function(t){return Math.round(n+e*t)}}var ri=180/Math.PI;var ii={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ai(t,n,e,r,i,a){var o,u,s;if(o=Math.sqrt(t*t+n*n))t/=o,n/=o;if(s=t*e+n*r)e-=t*s,r-=n*s;if(u=Math.sqrt(e*e+r*r))e/=u,r/=u,s/=u;if(t*r<n*e)t=-t,n=-n,s=-s,o=-o;return{translateX:i,translateY:a,rotate:Math.atan2(n,t)*ri,skewX:Math.atan(s)*ri,scaleX:o,scaleY:u}}var oi;var ui;var si;var ci;function fi(t){if(t==="none")return ii;if(!oi)oi=document.createElement("DIV"),ui=document.documentElement,si=document.defaultView;oi.style.transform=t;t=si.getComputedStyle(ui.appendChild(oi),null).getPropertyValue("transform");ui.removeChild(oi);t=t.slice(7,-1).split(",");return ai(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function li(t){if(t==null)return ii;if(!ci)ci=document.createElementNS("http://www.w3.org/2000/svg","g");ci.setAttribute("transform",t);if(!(t=ci.transform.baseVal.consolidate()))return ii;t=t.matrix;return ai(t.a,t.b,t.c,t.d,t.e,t.f)}function hi(e,u,s,i){function c(t){return t.length?t.pop()+" ":""}function r(t,n,e,r,i,a){if(t!==e||n!==r){var o=i.push("translate(",null,u,null,s);a.push({i:o-4,x:Wr(t,e)},{i:o-2,x:Wr(n,r)})}else if(e||r){i.push("translate("+e+u+r+s)}}function o(t,n,e,r){if(t!==n){if(t-n>180)n+=360;else if(n-t>180)t+=360;r.push({i:e.push(c(e)+"rotate(",null,i)-2,x:Wr(t,n)})}else if(n){e.push(c(e)+"rotate("+n+i)}}function f(t,n,e,r){if(t!==n){r.push({i:e.push(c(e)+"skewX(",null,i)-2,x:Wr(t,n)})}else if(n){e.push(c(e)+"skewX("+n+i)}}function l(t,n,e,r,i,a){if(t!==e||n!==r){var o=i.push(c(i)+"scale(",null,",",null,")");a.push({i:o-4,x:Wr(t,e)},{i:o-2,x:Wr(n,r)})}else if(e!==1||r!==1){i.push(c(i)+"scale("+e+","+r+")")}}return function(t,n){var i=[],a=[];t=e(t),n=e(n);r(t.translateX,t.translateY,n.translateX,n.translateY,i,a);o(t.rotate,n.rotate,i,a);f(t.skewX,n.skewX,i,a);l(t.scaleX,t.scaleY,n.scaleX,n.scaleY,i,a);t=n=null;return function(t){var n=-1,e=a.length,r;while(++n<e)i[(r=a[n]).i]=r.x(t);return i.join("")}}}var pi=hi(fi,"px, ","px)","deg)");var di=hi(li,", ",")",")");var vi=Math.SQRT2;var gi=2;var yi=4;var mi=1e-12;function xi(t){return((t=Math.exp(t))+1/t)/2}function _i(t){return((t=Math.exp(t))-1/t)/2}function wi(t){return((t=Math.exp(2*t))-1)/(t+1)}function bi(t,n){var i=t[0],a=t[1],o=t[2],e=n[0],r=n[1],u=n[2],s=e-i,c=r-a,f=s*s+c*c,l,h;if(f<mi){h=Math.log(u/o)/vi;l=function(t){return[i+t*s,a+t*c,o*Math.exp(vi*t*h)]}}else{var p=Math.sqrt(f),d=(u*u-o*o+yi*f)/(2*o*gi*p),v=(u*u-o*o-yi*f)/(2*u*gi*p),g=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(v*v+1)-v);h=(y-g)/vi;l=function(t){var n=t*h,e=xi(g),r=o/(gi*p)*(e*wi(vi*n+g)-_i(g));return[i+r*s,a+r*c,o*e/xi(vi*n+g)]}}l.duration=h*1e3;return l}function Mi(o){return function(n,t){var e=o((n=Qe(n)).h,(t=Qe(t)).h),r=qr(n.s,t.s),i=qr(n.l,t.l),a=qr(n.opacity,t.opacity);return function(t){n.h=e(t);n.s=r(t);n.l=i(t);n.opacity=a(t);return n+""}}}var ki=Mi(Fr);var Si=Mi(qr);function Ai(n,t){var e=qr((n=pr(n)).l,(t=pr(t)).l),r=qr(n.a,t.a),i=qr(n.b,t.b),a=qr(n.opacity,t.opacity);return function(t){n.l=e(t);n.a=r(t);n.b=i(t);n.opacity=a(t);return n+""}}function Ci(o){return function(n,t){var e=o((n=_r(n)).h,(t=_r(t)).h),r=qr(n.c,t.c),i=qr(n.l,t.l),a=qr(n.opacity,t.opacity);return function(t){n.h=e(t);n.c=r(t);n.l=i(t);n.opacity=a(t);return n+""}}}var Ni=Ci(Fr);var Ti=Ci(qr);function Ei(u){return function t(o){o=+o;function n(n,t){var e=u((n=jr(n)).h,(t=jr(t)).h),r=qr(n.s,t.s),i=qr(n.l,t.l),a=qr(n.opacity,t.opacity);return function(t){n.h=e(t);n.s=r(t);n.l=i(Math.pow(t,o));n.opacity=a(t);return n+""}}n.gamma=t;return n}(1)}var ji=Ei(Fr);var Oi=Ei(qr);function Li(t,n){var e=new Array(n);for(var r=0;r<n;++r)e[r]=t(r/(n-1));return e}var Ii=0;var Pi=0;var Ri=0;var Di=1e3;var zi;var Fi;var Bi=0;var qi=0;var Ui=0;var Hi=typeof performance==="object"&&performance.now?performance:Date;var Yi=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gi(){return qi||(Yi(Vi),qi=Hi.now()+Ui)}function Vi(){qi=0}function Xi(){this._call=this._time=this._next=null}Xi.prototype=Wi.prototype={constructor:Xi,restart:function(t,n,e){if(typeof t!=="function")throw new TypeError("callback is not a function");e=(e==null?Gi():+e)+(n==null?0:+n);if(!this._next&&Fi!==this){if(Fi)Fi._next=this;else zi=this;Fi=this}this._call=t;this._time=e;Qi()},stop:function(){if(this._call){this._call=null;this._time=Infinity;Qi()}}};function Wi(t,n,e){var r=new Xi;r.restart(t,n,e);return r}function Zi(){Gi();++Ii;var t=zi,n;while(t){if((n=qi-t._time)>=0)t._call.call(null,n);t=t._next}--Ii}function $i(){qi=(Bi=Hi.now())+Ui;Ii=Pi=0;try{Zi()}finally{Ii=0;Ki();qi=0}}function Ji(){var t=Hi.now(),n=t-Bi;if(n>Di)Ui-=n,Bi=t}function Ki(){var t,n=zi,e,r=Infinity;while(n){if(n._call){if(r>n._time)r=n._time;t=n,n=n._next}else{e=n._next,n._next=null;n=t?t._next=e:zi=e}}Fi=t;Qi(r)}function Qi(t){if(Ii)return;if(Pi)Pi=clearTimeout(Pi);var n=t-qi;if(n>24){if(t<Infinity)Pi=setTimeout($i,t-Hi.now()-Ui);if(Ri)Ri=clearInterval(Ri)}else{if(!Ri)Bi=Hi.now(),Ri=setInterval(Ji,Di);Ii=1,Yi($i)}}function ta(n,e,t){var r=new Xi;e=e==null?0:+e;r.restart(function(t){r.stop();n(t+e)},e,t);return r}function na(e,r,i){var a=new Xi,o=r;if(r==null)return a.restart(e,r,i),a;r=+r,i=i==null?Gi():+i;a.restart(function t(n){n+=o;a.restart(t,o+=r,i);e(n)},r,i);return a}var ea=ct("start","end","interrupt");var ra=[];var ia=0;var aa=1;var oa=2;var ua=3;var sa=4;var ca=5;var fa=6;function la(t,n,e,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(e in o)return;va(t,e,{name:n,index:r,group:i,on:ea,tween:ra,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ia})}function ha(t,n){var e=da(t,n);if(e.state>ia)throw new Error("too late; already scheduled");return e}function pa(t,n){var e=da(t,n);if(e.state>oa)throw new Error("too late; already started");return e}function da(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function va(a,o,u){var s=a.__transition,c;s[o]=u;u.timer=Wi(t,0,u.time);function t(t){u.state=aa;u.timer.restart(f,u.delay,u.time);if(u.delay<=t)f(t-u.delay)}function f(t){var n,e,r,i;if(u.state!==aa)return h();for(n in s){i=s[n];if(i.name!==u.name)continue;if(i.state===ua)return ta(f);if(i.state===sa){i.state=fa;i.timer.stop();i.on.call("interrupt",a,a.__data__,i.index,i.group);delete s[n]}else if(+n<o){i.state=fa;i.timer.stop();delete s[n]}}ta(function(){if(u.state===ua){u.state=sa;u.timer.restart(l,u.delay,u.time);l(t)}});u.state=oa;u.on.call("start",a,a.__data__,u.index,u.group);if(u.state!==oa)return;u.state=ua;c=new Array(r=u.tween.length);for(n=0,e=-1;n<r;++n){if(i=u.tween[n].value.call(a,a.__data__,u.index,u.group)){c[++e]=i}}c.length=e+1}function l(t){var n=t<u.duration?u.ease.call(null,t/u.duration):(u.timer.restart(h),u.state=ca,1),e=-1,r=c.length;while(++e<r){c[e].call(null,n)}if(u.state===ca){u.on.call("end",a,a.__data__,u.index,u.group);h()}}function h(){u.state=fa;u.timer.stop();delete s[o];for(var t in s)return;delete a.__transition}}function ga(t,n){var e=t.__transition,r,i,a=true,o;if(!e)return;n=n==null?null:n+"";for(o in e){if((r=e[o]).name!==n){a=false;continue}i=r.state>oa&&r.state<ca;r.state=fa;r.timer.stop();if(i)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete e[o]}if(a)delete t.__transition}function ya(t){return this.each(function(){ga(this,t)})}function ma(i,a){var o,u;return function(){var t=pa(this,i),n=t.tween;if(n!==o){u=o=n;for(var e=0,r=u.length;e<r;++e){if(u[e].name===a){u=u.slice();u.splice(e,1);break}}}t.tween=u}}function xa(a,o,u){var s,c;if(typeof u!=="function")throw new Error;return function(){var t=pa(this,a),n=t.tween;if(n!==s){c=(s=n).slice();for(var e={name:o,value:u},r=0,i=c.length;r<i;++r){if(c[r].name===o){c[r]=e;break}}if(r===i)c.push(e)}t.tween=c}}function _a(t,n){var e=this._id;t+="";if(arguments.length<2){var r=da(this.node(),e).tween;for(var i=0,a=r.length,o;i<a;++i){if((o=r[i]).name===t){return o.value}}return null}return this.each((n==null?ma:xa)(e,t,n))}function wa(t,n,e){var r=t._id;t.each(function(){var t=pa(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)});return function(t){return da(t,r).value[n]}}function ba(t,n){var e;return(typeof n==="number"?Wr:n instanceof Ge?Ur:(e=Ge(n))?(n=e,Ur):ti)(t,n)}function Ma(t){return function(){this.removeAttribute(t)}}function ka(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sa(n,e,r){var i,a;return function(){var t=this.getAttribute(n);return t===r?null:t===i?a:a=e(i=t,r)}}function Aa(n,e,r){var i,a;return function(){var t=this.getAttributeNS(n.space,n.local);return t===r?null:t===i?a:a=e(i=t,r)}}function Ca(e,r,i){var a,o,u;return function(){var t,n=i(this);if(n==null)return void this.removeAttribute(e);t=this.getAttribute(e);return t===n?null:t===a&&n===o?u:u=r(a=t,o=n)}}function Na(e,r,i){var a,o,u;return function(){var t,n=i(this);if(n==null)return void this.removeAttributeNS(e.space,e.local);t=this.getAttributeNS(e.space,e.local);return t===n?null:t===a&&n===o?u:u=r(a=t,o=n)}}function Ta(t,n){var e=gt(t),r=e==="transform"?di:ba;return this.attrTween(t,typeof n==="function"?(e.local?Na:Ca)(e,r,wa(this,"attr."+t,n)):n==null?(e.local?ka:Ma)(e):(e.local?Aa:Sa)(e,r,n+""))}function Ea(r,t){function n(){var n=this,e=t.apply(n,arguments);return e&&function(t){n.setAttributeNS(r.space,r.local,e(t))}}n._value=t;return n}function ja(r,t){function n(){var n=this,e=t.apply(n,arguments);return e&&function(t){n.setAttribute(r,e(t))}}n._value=t;return n}function Oa(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!=="function")throw new Error;var r=gt(t);return this.tween(e,(r.local?Ea:ja)(r,n))}function La(t,n){return function(){ha(this,t).delay=+n.apply(this,arguments)}}function Ia(t,n){return n=+n,function(){ha(this,t).delay=n}}function Pa(t){var n=this._id;return arguments.length?this.each((typeof t==="function"?La:Ia)(n,t)):da(this.node(),n).delay}function Ra(t,n){return function(){pa(this,t).duration=+n.apply(this,arguments)}}function Da(t,n){return n=+n,function(){pa(this,t).duration=n}}function za(t){var n=this._id;return arguments.length?this.each((typeof t==="function"?Ra:Da)(n,t)):da(this.node(),n).duration}function Fa(t,n){if(typeof n!=="function")throw new Error;return function(){pa(this,t).ease=n}}function Ba(t){var n=this._id;return arguments.length?this.each(Fa(n,t)):da(this.node(),n).ease}function qa(t){if(typeof t!=="function")t=Tt(t);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var a=n[i],o=a.length,u=r[i]=[],s,c=0;c<o;++c){if((s=a[c])&&t.call(s,s.__data__,c,a)){u.push(s)}}}return new fo(r,this._parents,this._name,this._id)}function Ua(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u){for(var s=n[u],c=e[u],f=s.length,l=o[u]=new Array(f),h,p=0;p<f;++p){if(h=s[p]||c[p]){l[p]=h}}}for(;u<r;++u){o[u]=n[u]}return new fo(o,this._parents,this._name,this._id)}function Ha(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");if(n>=0)t=t.slice(0,n);return!t||t==="start"})}function Ya(e,r,i){var a,o,u=Ha(r)?ha:pa;return function(){var t=u(this,e),n=t.on;if(n!==a)(o=(a=n).copy()).on(r,i);t.on=o}}function Ga(t,n){var e=this._id;return arguments.length<2?da(this.node(),e).on.on(t):this.each(Ya(e,t,n))}function Va(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;if(t)t.removeChild(this)}}function Xa(){return this.on("end.remove",Va(this._id))}function Wa(t){var n=this._name,e=this._id;if(typeof t!=="function")t=wt(t);for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o){for(var u=r[o],s=u.length,c=a[o]=new Array(s),f,l,h=0;h<s;++h){if((f=u[h])&&(l=t.call(f,f.__data__,h,u))){if("__data__"in f)l.__data__=f.__data__;c[h]=l;la(c[h],n,e,h,c,da(f,e))}}}return new fo(a,this._parents,n,e)}function Za(t){var n=this._name,e=this._id;if(typeof t!=="function")t=kt(t);for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u){for(var s=r[u],c=s.length,f,l=0;l<c;++l){if(f=s[l]){for(var h=t.call(f,f.__data__,l,s),p,d=da(f,e),v=0,g=h.length;v<g;++v){if(p=h[v]){la(p,n,e,v,h,d)}}a.push(h);o.push(f)}}}return new fo(a,o,n,e)}var $a=ae.prototype.constructor;function Ja(){return new $a(this._groups,this._parents)}function Ka(e,r){var i,a,o;return function(){var t=cn(this,e),n=(this.style.removeProperty(e),cn(this,e));return t===n?null:t===i&&n===a?o:o=r(i=t,a=n)}}function Qa(t){return function(){this.style.removeProperty(t)}}function to(n,e,r){var i,a;return function(){var t=cn(this,n);return t===r?null:t===i?a:a=e(i=t,r)}}function no(e,r,i){var a,o,u;return function(){var t=cn(this,e),n=i(this);if(n==null)n=(this.style.removeProperty(e),cn(this,e));return t===n?null:t===a&&n===o?u:u=r(a=t,o=n)}}function eo(t,n,e){var r=(t+="")==="transform"?pi:ba;return n==null?this.styleTween(t,Ka(t,r)).on("end.style."+t,Qa(t)):this.styleTween(t,typeof n==="function"?no(t,r,wa(this,"style."+t,n)):to(t,r,n+""),e)}function ro(r,t,i){function n(){var n=this,e=t.apply(n,arguments);return e&&function(t){n.style.setProperty(r,e(t),i)}}n._value=t;return n}function io(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!=="function")throw new Error;return this.tween(r,ro(t,n,e==null?"":e))}function ao(t){return function(){this.textContent=t}}function oo(n){return function(){var t=n(this);this.textContent=t==null?"":t}}function uo(t){return this.tween("text",typeof t==="function"?oo(wa(this,"text",t)):ao(t==null?"":t+""))}function so(){var t=this._name,n=this._id,e=ho();for(var r=this._groups,i=r.length,a=0;a<i;++a){for(var o=r[a],u=o.length,s,c=0;c<u;++c){if(s=o[c]){var f=da(s,n);la(s,t,e,c,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}}}return new fo(r,this._parents,t,e)}var co=0;function fo(t,n,e,r){this._groups=t;this._parents=n;this._name=e;this._id=r}function lo(t){return ae().transition(t)}function ho(){return++co}var po=ae.prototype;fo.prototype=lo.prototype={constructor:fo,select:Wa,selectAll:Za,filter:qa,merge:Ua,selection:Ja,transition:so,call:po.call,nodes:po.nodes,node:po.node,size:po.size,empty:po.empty,each:po.each,on:Ga,attr:Ta,attrTween:Oa,style:eo,styleTween:io,text:uo,remove:Xa,tween:_a,delay:Pa,duration:za,ease:Ba};function vo(t){return+t}function go(t){return t*t}function yo(t){return t*(2-t)}function mo(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function xo(t){return t*t*t}function _o(t){return--t*t*t+1}function wo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bo=3;var Mo=function t(n){n=+n;function e(t){return Math.pow(t,n)}e.exponent=t;return e}(bo);var ko=function t(n){n=+n;function e(t){return 1-Math.pow(1-t,n)}e.exponent=t;return e}(bo);var So=function t(n){n=+n;function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}e.exponent=t;return e}(bo);var Ao=Math.PI;var Co=Ao/2;function No(t){return 1-Math.cos(t*Co)}function To(t){return Math.sin(t*Co)}function Eo(t){return(1-Math.cos(Ao*t))/2}function jo(t){return Math.pow(2,10*t-10)}function Oo(t){return 1-Math.pow(2,-10*t)}function Lo(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Io(t){return 1-Math.sqrt(1-t*t)}function Po(t){return Math.sqrt(1- --t*t)}function Ro(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Do=4/11;var zo=6/11;var Fo=8/11;var Bo=3/4;var qo=9/11;var Uo=10/11;var Ho=15/16;var Yo=21/22;var Go=63/64;var Vo=1/Do/Do;function Xo(t){return 1-Wo(1-t)}function Wo(t){return(t=+t)<Do?Vo*t*t:t<Fo?Vo*(t-=zo)*t+Bo:t<Uo?Vo*(t-=qo)*t+Ho:Vo*(t-=Yo)*t+Go}function Zo(t){return((t*=2)<=1?1-Wo(1-t):Wo(t-1)+1)/2}var $o=1.70158;var Jo=function t(n){n=+n;function e(t){return t*t*((n+1)*t-n)}e.overshoot=t;return e}($o);var Ko=function t(n){n=+n;function e(t){return--t*t*((n+1)*t+n)+1}e.overshoot=t;return e}($o);var Qo=function t(n){n=+n;function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}e.overshoot=t;return e}($o);var tu=2*Math.PI;var nu=1;var eu=.3;var ru=function n(e,r){var i=Math.asin(1/(e=Math.max(1,e)))*(r/=tu);function t(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/r)}t.amplitude=function(t){return n(t,r*tu)};t.period=function(t){return n(e,t)};return t}(nu,eu);var iu=function n(e,r){var i=Math.asin(1/(e=Math.max(1,e)))*(r/=tu);function t(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/r)}t.amplitude=function(t){return n(t,r*tu)};t.period=function(t){return n(e,t)};return t}(nu,eu);var au=function n(e,r){var i=Math.asin(1/(e=Math.max(1,e)))*(r/=tu);function t(t){return((t=t*2-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/r):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/r))/2}t.amplitude=function(t){return n(t,r*tu)};t.period=function(t){return n(e,t)};return t}(nu,eu);var ou={time:null,delay:0,duration:250,ease:wo};function uu(t,n){var e;while(!(e=t.__transition)||!(e=e[n])){if(!(t=t.parentNode)){return ou.time=Gi(),ou}}return e}function su(t){var n,e;if(t instanceof fo){n=t._id,t=t._name}else{n=ho(),(e=ou).time=Gi(),t=t==null?null:t+""}for(var r=this._groups,i=r.length,a=0;a<i;++a){for(var o=r[a],u=o.length,s,c=0;c<u;++c){if(s=o[c]){la(s,t,n,c,o,e||uu(s,n))}}}return new fo(r,this._parents,t,n)}ae.prototype.interrupt=ya;ae.prototype.transition=su;var cu=[null];function fu(t,n){var e=t.__transition,r,i;if(e){n=n==null?null:n+"";for(i in e){if((r=e[i]).state>aa&&r.name===n){return new fo([[t]],cu,n,+i)}}}return null}function lu(t){return function(){return t}}function hu(t,n,e){this.target=t;this.type=n;this.selection=e}function pu(){U.event.stopImmediatePropagation()}function du(){U.event.preventDefault();U.event.stopImmediatePropagation()}var vu={name:"drag"};var gu={name:"space"};var yu={name:"handle"};var mu={name:"center"};var xu={name:"x",handles:["e","w"].map(Cu),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}};var _u={name:"y",handles:["n","s"].map(Cu),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}};var wu={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Cu),input:function(t){return t},output:function(t){return t}};var bu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Mu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"};var ku={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"};var Su={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var Au={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function Cu(t){return{type:t}}function Nu(){return!U.event.button}function Tu(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Eu(t){while(!t.__brush)if(!(t=t.parentNode))return;return t.__brush}function ju(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ou(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function Lu(){return Ru(xu)}function Iu(){return Ru(_u)}function Pu(){return Ru(wu)}function Ru(D){var n=Tu,z=Nu,e=ct(i,"start","brush","end"),r=6,F;function i(t){var n=t.property("__brush",u).selectAll(".overlay").data([Cu("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bu.overlay).merge(n).each(function(){var t=Eu(this).extent;oe(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])});t.selectAll(".selection").data([Cu("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var e=t.selectAll(".handle").data(D.handles,function(t){return t.type});e.exit().remove();e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return bu[t.type]});t.each(B).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}i.move=function(t,u){if(t.selection){t.on("start.brush",function(){q(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){q(this,arguments).end()}).tween("brush",function(){var n=this,e=n.__brush,r=q(n,arguments),t=e.selection,i=D.input(typeof u==="function"?u.apply(this,arguments):u,e.extent),a=ni(t,i);function o(t){e.selection=t===1&&ju(i)?null:a(t);B.call(n);r.brush()}return t&&i?o:o(1)})}else{t.each(function(){var t=this,n=arguments,e=t.__brush,r=D.input(typeof u==="function"?u.apply(t,n):u,e.extent),i=q(t,n).beforestart();ga(t);e.selection=r==null||ju(r)?null:r;B.call(t);i.start().brush().end()})}};function B(){var t=oe(this),n=Eu(this).selection;if(n){t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]);t.selectAll(".handle").style("display",null).attr("x",function(t){return t.type[t.type.length-1]==="e"?n[1][0]-r/2:n[0][0]-r/2}).attr("y",function(t){return t.type[0]==="s"?n[1][1]-r/2:n[0][1]-r/2}).attr("width",function(t){return t.type==="n"||t.type==="s"?n[1][0]-n[0][0]+r:r}).attr("height",function(t){return t.type==="e"||t.type==="w"?n[1][1]-n[0][1]+r:r})}else{t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}}function q(t,n){return t.__brush.emitter||new a(t,n)}function a(t,n){this.that=t;this.args=n;this.state=t.__brush;this.active=0}a.prototype={beforestart:function(){if(++this.active===1)this.state.emitter=this,this.starting=true;return this},start:function(){if(this.starting)this.starting=false,this.emit("start");return this},brush:function(){this.emit("brush");return this},end:function(){if(--this.active===0)delete this.state.emitter,this.emit("end");return this},emit:function(t){Kn(new hu(i,t,D.output(this.state.selection)),e.apply,e,[t,this.that,this.args])}};function o(){if(U.event.touches){if(U.event.changedTouches.length<U.event.touches.length)return du()}else if(F)return;if(!z.apply(this,arguments))return;var n=this,e=U.event.target.__data__.type,r=(U.event.metaKey?e="overlay":e)==="selection"?vu:U.event.altKey?mu:yu,i=D===_u?null:Su[e],a=D===xu?null:Au[e],o=Eu(n),t=o.extent,u=o.selection,s=t[0][0],c,f,l=t[0][1],h,p,d=t[1][0],v,g,y=t[1][1],m,x,_,w,b,M=i&&a&&U.event.shiftKey,k,S,A=pe(n),C=A,N=q(n,arguments).beforestart();if(e==="overlay"){o.selection=u=[[c=D===_u?s:A[0],h=D===xu?l:A[1]],[v=D===_u?d:c,m=D===xu?y:h]]}else{c=u[0][0];h=u[0][1];v=u[1][0];m=u[1][1]}f=c;p=h;g=v;x=m;var T=oe(n).attr("pointer-events","none");var E=T.selectAll(".overlay").attr("cursor",bu[e]);if(U.event.touches){T.on("touchmove.brush",O,true).on("touchend.brush touchcancel.brush",I,true)}else{var j=oe(U.event.view).on("keydown.brush",P,true).on("keyup.brush",R,true).on("mousemove.brush",O,true).on("mouseup.brush",I,true);xe(U.event.view)}pu();ga(n);B.call(n);N.start();function O(){var t=pe(n);if(M&&!k&&!S){if(Math.abs(t[0]-C[0])>Math.abs(t[1]-C[1]))S=true;else k=true}C=t;b=true;du();L()}function L(){var t;_=C[0]-A[0];w=C[1]-A[1];switch(r){case gu:case vu:{if(i)_=Math.max(s-c,Math.min(d-v,_)),f=c+_,g=v+_;if(a)w=Math.max(l-h,Math.min(y-m,w)),p=h+w,x=m+w;break}case yu:{if(i<0)_=Math.max(s-c,Math.min(d-c,_)),f=c+_,g=v;else if(i>0)_=Math.max(s-v,Math.min(d-v,_)),f=c,g=v+_;if(a<0)w=Math.max(l-h,Math.min(y-h,w)),p=h+w,x=m;else if(a>0)w=Math.max(l-m,Math.min(y-m,w)),p=h,x=m+w;break}case mu:{if(i)f=Math.max(s,Math.min(d,c-_*i)),g=Math.max(s,Math.min(d,v+_*i));if(a)p=Math.max(l,Math.min(y,h-w*a)),x=Math.max(l,Math.min(y,m+w*a));break}}if(g<f){i*=-1;t=c,c=v,v=t;t=f,f=g,g=t;if(e in Mu)E.attr("cursor",bu[e=Mu[e]])}if(x<p){a*=-1;t=h,h=m,m=t;t=p,p=x,x=t;if(e in ku)E.attr("cursor",bu[e=ku[e]])}if(o.selection)u=o.selection;if(k)f=u[0][0],g=u[1][0];if(S)p=u[0][1],x=u[1][1];if(u[0][0]!==f||u[0][1]!==p||u[1][0]!==g||u[1][1]!==x){o.selection=[[f,p],[g,x]];B.call(n);N.brush()}}function I(){pu();if(U.event.touches){if(U.event.touches.length)return;if(F)clearTimeout(F);F=setTimeout(function(){F=null},500);T.on("touchmove.brush touchend.brush touchcancel.brush",null)}else{_e(U.event.view,b);j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null)}T.attr("pointer-events","all");E.attr("cursor",bu.overlay);if(o.selection)u=o.selection;if(ju(u))o.selection=null,B.call(n);N.end()}function P(){switch(U.event.keyCode){case 16:{M=i&&a;break}case 18:{if(r===yu){if(i)v=g-_*i,c=f+_*i;if(a)m=x-w*a,h=p+w*a;r=mu;L()}break}case 32:{if(r===yu||r===mu){if(i<0)v=g-_;else if(i>0)c=f-_;if(a<0)m=x-w;else if(a>0)h=p-w;r=gu;E.attr("cursor",bu.selection);L()}break}default:return}du()}function R(){switch(U.event.keyCode){case 16:{if(M){k=S=M=false;L()}break}case 18:{if(r===mu){if(i<0)v=g;else if(i>0)c=f;if(a<0)m=x;else if(a>0)h=p;r=yu;L()}break}case 32:{if(r===gu){if(U.event.altKey){if(i)v=g-_*i,c=f+_*i;if(a)m=x-w*a,h=p+w*a;r=mu}else{if(i<0)v=g;else if(i>0)c=f;if(a<0)m=x;else if(a>0)h=p;r=yu}E.attr("cursor",bu[e]);L()}break}default:return}du()}}function u(){var t=this.__brush||{selection:null};t.extent=n.apply(this,arguments);t.dim=D;return t}i.extent=function(t){return arguments.length?(n=typeof t==="function"?t:lu([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),i):n};i.filter=function(t){return arguments.length?(z=typeof t==="function"?t:lu(!!t),i):z};i.handleSize=function(t){return arguments.length?(r=+t,i):r};i.on=function(){var t=e.on.apply(e,arguments);return t===e?i:t};return i}var Du=Math.cos;var zu=Math.sin;var Fu=Math.PI;var Bu=Fu/2;var qu=Fu*2;var Uu=Math.max;function Hu(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}function Yu(){var w=0,b=null,M=null,k=null;function n(r){var t=r.length,e=[],n=S(t),i=[],a=[],o=a.groups=new Array(t),u=new Array(t*t),s,c,f,l,h,p;s=0,h=-1;while(++h<t){c=0,p=-1;while(++p<t){c+=r[h][p]}e.push(c);i.push(S(t));s+=c}if(b)n.sort(function(t,n){return b(e[t],e[n])});if(M)i.forEach(function(t,e){t.sort(function(t,n){return M(r[e][t],r[e][n])})});s=Uu(0,qu-w*t)/s;l=s?w:qu/t;c=0,h=-1;while(++h<t){f=c,p=-1;while(++p<t){var d=n[h],v=i[d][p],g=r[d][v],y=c,m=c+=g*s;u[v*t+d]={index:d,subindex:v,startAngle:y,endAngle:m,value:g}}o[d]={index:d,startAngle:f,endAngle:c,value:e[d]};c+=l}h=-1;while(++h<t){p=h-1;while(++p<t){var x=u[p*t+h],_=u[h*t+p];if(x.value||_.value){a.push(x.value<_.value?{source:_,target:x}:{source:x,target:_})}}}return k?a.sort(k):a}n.padAngle=function(t){return arguments.length?(w=Uu(0,t),n):w};n.sortGroups=function(t){return arguments.length?(b=t,n):b};n.sortSubgroups=function(t){return arguments.length?(M=t,n):M};n.sortChords=function(t){return arguments.length?(t==null?k=null:(k=Hu(t))._=t,n):k&&k._};return n}var Gu=Array.prototype.slice;function Vu(t){return function(){return t}}var Xu=Math.PI;var Wu=2*Xu;var Zu=1e-6;var $u=Wu-Zu;function Ju(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function Ku(){return new Ju}Ju.prototype=Ku.prototype={constructor:Ju,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,u=e-t,s=r-n,c=a-t,f=o-n,l=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=n)}else if(!(l>Zu)){}else if(!(Math.abs(f*u-s*c)>Zu)||!i){this._+="L"+(this._x1=t)+","+(this._y1=n)}else{var h=e-a,p=r-o,d=u*u+s*s,v=h*h+p*p,g=Math.sqrt(d),y=Math.sqrt(l),m=i*Math.tan((Xu-Math.acos((d+l-v)/(2*g*y)))/2),x=m/y,_=m/g;if(Math.abs(x-1)>Zu){this._+="L"+(t+x*c)+","+(n+x*f)}this._+="A"+i+","+i+",0,0,"+ +(f*h>c*p)+","+(this._x1=t+_*u)+","+(this._y1=n+_*s)}},arc:function(t,n,e,r,i,a){t=+t,n=+n,e=+e;var o=e*Math.cos(r),u=e*Math.sin(r),s=t+o,c=n+u,f=1^a,l=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);if(this._x1===null){this._+="M"+s+","+c}else if(Math.abs(this._x1-s)>Zu||Math.abs(this._y1-c)>Zu){this._+="L"+s+","+c}if(!e)return;if(l<0)l=l%Wu+Wu;if(l>$u){this._+="A"+e+","+e+",0,1,"+f+","+(t-o)+","+(n-u)+"A"+e+","+e+",0,1,"+f+","+(this._x1=s)+","+(this._y1=c)}else if(l>Zu){this._+="A"+e+","+e+",0,"+ +(l>=Xu)+","+f+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))}},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function Qu(t){return t.source}function ts(t){return t.target}function ns(t){return t.radius}function es(t){return t.startAngle}function rs(t){return t.endAngle}function is(){var h=Qu,p=ts,d=ns,v=es,g=rs,y=null;function n(){var t,n=Gu.call(arguments),e=h.apply(this,n),r=p.apply(this,n),i=+d.apply(this,(n[0]=e,n)),a=v.apply(this,n)-Bu,o=g.apply(this,n)-Bu,u=i*Du(a),s=i*zu(a),c=+d.apply(this,(n[0]=r,n)),f=v.apply(this,n)-Bu,l=g.apply(this,n)-Bu;if(!y)y=t=Ku();y.moveTo(u,s);y.arc(0,0,i,a,o);if(a!==f||o!==l){y.quadraticCurveTo(0,0,c*Du(f),c*zu(f));y.arc(0,0,c,f,l)}y.quadraticCurveTo(0,0,u,s);y.closePath();if(t)return y=null,t+""||null}n.radius=function(t){return arguments.length?(d=typeof t==="function"?t:Vu(+t),n):d};n.startAngle=function(t){return arguments.length?(v=typeof t==="function"?t:Vu(+t),n):v};n.endAngle=function(t){return arguments.length?(g=typeof t==="function"?t:Vu(+t),n):g};n.source=function(t){return arguments.length?(h=t,n):h};n.target=function(t){return arguments.length?(p=t,n):p};n.context=function(t){return arguments.length?(y=t==null?null:t,n):y};return n}var as="$";function os(){}os.prototype=us.prototype={constructor:os,has:function(t){return as+t in this},get:function(t){return this[as+t]},set:function(t,n){this[as+t]=n;return this},remove:function(t){var n=as+t;return n in this&&delete this[n]},clear:function(){for(var t in this)if(t[0]===as)delete this[t]},keys:function(){var t=[];for(var n in this)if(n[0]===as)t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)if(n[0]===as)t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)if(n[0]===as)t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)if(n[0]===as)++t;return t},empty:function(){for(var t in this)if(t[0]===as)return false;return true},each:function(t){for(var n in this)if(n[0]===as)t(this[n],n.slice(1),this)}};function us(t,n){var e=new os;if(t instanceof os)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r=-1,i=t.length,a;if(n==null)while(++r<i)e.set(r,t[r]);else while(++r<i)e.set(n(a=t[r],r,t),a)}else if(t)for(var o in t)e.set(o,t[o]);return e}function ss(){var h=[],n=[],p,d,e;function v(t,e,r,i){if(e>=h.length){if(p!=null)t.sort(p);return d!=null?d(t):t}var n=-1,a=t.length,o=h[e++],u,s,c=us(),f,l=r();while(++n<a){if(f=c.get(u=o(s=t[n])+"")){f.push(s)}else{c.set(u,[s])}}c.each(function(t,n){i(l,n,v(t,e,r,i))});return l}function a(t,e){if(++e>h.length)return t;var r,i=n[e-1];if(d!=null&&e>=h.length)r=t.entries();else r=[],t.each(function(t,n){r.push({key:n,values:a(t,e)})});return i!=null?r.sort(function(t,n){return i(t.key,n.key)}):r}return e={object:function(t){return v(t,0,cs,fs)},map:function(t){return v(t,0,ls,hs)},entries:function(t){return a(v(t,0,ls,hs),0)},key:function(t){h.push(t);return e},sortKeys:function(t){n[h.length-1]=t;return e},sortValues:function(t){p=t;return e},rollup:function(t){d=t;return e}}}function cs(){return{}}function fs(t,n,e){t[n]=e}function ls(){return us()}function hs(t,n,e){t.set(n,e)}function ps(){}var ds=us.prototype;ps.prototype=vs.prototype={constructor:ps,has:ds.has,add:function(t){t+="";this[as+t]=t;return this},remove:ds.remove,clear:ds.clear,values:ds.keys,size:ds.size,empty:ds.empty,each:ds.each};function vs(t,n){var e=new ps;if(t instanceof ps)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(n==null)while(++r<i)e.add(t[r]);else while(++r<i)e.add(n(t[r],r,t))}return e}function gs(t){var n=[];for(var e in t)n.push(e);return n}function ys(t){var n=[];for(var e in t)n.push(t[e]);return n}function ms(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n}var xs={};var _s={};var ws=34;var bs=10;var Ms=13;function ks(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function Ss(e,r){var i=ks(e);return function(t,n){return r(i(t),n,e)}}function As(t){var e=Object.create(null),r=[];t.forEach(function(t){for(var n in t){if(!(n in e)){r.push(e[n]=n)}}});return r}function Cs(r){var n=new RegExp('["'+r+"\n\r]"),l=r.charCodeAt(0);function t(t,e){var r,i,n=a(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?Ss(t,e):ks(t)});n.columns=i||[];return n}function a(r,t){var n=[],i=r.length,a=0,e=0,o,u=i<=0,s=false;if(r.charCodeAt(i-1)===bs)--i;if(r.charCodeAt(i-1)===Ms)--i;function c(){if(u)return _s;if(s)return s=false,xs;var t,n=a,e;if(r.charCodeAt(n)===ws){while(a++<i&&r.charCodeAt(a)!==ws||r.charCodeAt(++a)===ws);if((t=a)>=i)u=true;else if((e=r.charCodeAt(a++))===bs)s=true;else if(e===Ms){s=true;if(r.charCodeAt(a)===bs)++a}return r.slice(n+1,t-1).replace(/""/g,'"')}while(a<i){if((e=r.charCodeAt(t=a++))===bs)s=true;else if(e===Ms){s=true;if(r.charCodeAt(a)===bs)++a}else if(e!==l)continue;return r.slice(n,t)}return u=true,r.slice(n,i)}while((o=c())!==_s){var f=[];while(o!==xs&&o!==_s)f.push(o),o=c();if(t&&(f=t(f,e++))==null)continue;n.push(f)}return n}function e(t,e){if(e==null)e=As(t);return[e.map(u).join(r)].concat(t.map(function(n){return e.map(function(t){return u(n[t])}).join(r)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(t){return t.map(u).join(r)}function u(t){return t==null?"":n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:t,parseRows:a,format:e,formatRows:i}}var Ns=Cs(",");var Ts=Ns.parse;var Es=Ns.parseRows;var js=Ns.format;var Os=Ns.formatRows;var Ls=Cs("\t");var Is=Ls.parse;var Ps=Ls.parseRows;var Rs=Ls.format;var Ds=Ls.formatRows;function zs(a,o){var u;if(a==null)a=0;if(o==null)o=0;function n(){var t,n=u.length,e,r=0,i=0;for(t=0;t<n;++t){e=u[t],r+=e.x,i+=e.y}for(r=r/n-a,i=i/n-o,t=0;t<n;++t){e=u[t],e.x-=r,e.y-=i}}n.initialize=function(t){u=t};n.x=function(t){return arguments.length?(a=+t,n):a};n.y=function(t){return arguments.length?(o=+t,n):o};return n}function Fs(t){return function(){return t}}function Bs(){return(Math.random()-.5)*1e-6}function qs(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return Us(this.cover(n,e),n,e,t)}function Us(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,a=t._root,o={data:r},u=t._x0,s=t._y0,c=t._x1,f=t._y1,l,h,p,d,v,g,y,m;if(!a)return t._root=o,t;while(a.length){if(v=n>=(l=(u+c)/2))u=l;else c=l;if(g=e>=(h=(s+f)/2))s=h;else f=h;if(i=a,!(a=a[y=g<<1|v]))return i[y]=o,t}p=+t._x.call(null,a.data);d=+t._y.call(null,a.data);if(n===p&&e===d)return o.next=a,i?i[y]=o:t._root=o,t;do{i=i?i[y]=new Array(4):t._root=new Array(4);if(v=n>=(l=(u+c)/2))u=l;else c=l;if(g=e>=(h=(s+f)/2))s=h;else f=h}while((y=g<<1|v)===(m=(d>=h)<<1|p>=l));return i[m]=a,i[y]=o,t}function Hs(t){var n,e,r=t.length,i,a,o=new Array(r),u=new Array(r),s=Infinity,c=Infinity,f=-Infinity,l=-Infinity;for(e=0;e<r;++e){if(isNaN(i=+this._x.call(null,n=t[e]))||isNaN(a=+this._y.call(null,n)))continue;o[e]=i;u[e]=a;if(i<s)s=i;if(i>f)f=i;if(a<c)c=a;if(a>l)l=a}if(f<s)s=this._x0,f=this._x1;if(l<c)c=this._y0,l=this._y1;this.cover(s,c).cover(f,l);for(e=0;e<r;++e){Us(this,o[e],u[e],t[e])}return this}function Ys(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(e)){i=(e=Math.floor(t))+1;a=(r=Math.floor(n))+1}else if(e>t||t>i||r>n||n>a){var o=i-e,u=this._root,s,c;switch(c=(n<(r+a)/2)<<1|t<(e+i)/2){case 0:{do{s=new Array(4),s[c]=u,u=s}while(o*=2,i=e+o,a=r+o,t>i||n>a);break}case 1:{do{s=new Array(4),s[c]=u,u=s}while(o*=2,e=i-o,a=r+o,e>t||n>a);break}case 2:{do{s=new Array(4),s[c]=u,u=s}while(o*=2,i=e+o,r=a-o,t>i||r>n);break}case 3:{do{s=new Array(4),s[c]=u,u=s}while(o*=2,e=i-o,r=a-o,e>t||r>n);break}}if(this._root&&this._root.length)this._root=u}else return this;this._x0=e;this._y0=r;this._x1=i;this._y1=a;return this}function Gs(){var n=[];this.visit(function(t){if(!t.length)do{n.push(t.data)}while(t=t.next)});return n}function Vs(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}function Xs(t,n,e,r,i){this.node=t;this.x0=n;this.y0=e;this.x1=r;this.y1=i}function Ws(t,n,e){var r,i=this._x0,a=this._y0,o,u,s,c,f=this._x1,l=this._y1,h=[],p=this._root,d,v;if(p)h.push(new Xs(p,i,a,f,l));if(e==null)e=Infinity;else{i=t-e,a=n-e;f=t+e,l=n+e;e*=e}while(d=h.pop()){if(!(p=d.node)||(o=d.x0)>f||(u=d.y0)>l||(s=d.x1)<i||(c=d.y1)<a)continue;if(p.length){var g=(o+s)/2,y=(u+c)/2;h.push(new Xs(p[3],g,y,s,c),new Xs(p[2],o,y,g,c),new Xs(p[1],g,u,s,y),new Xs(p[0],o,u,g,y));if(v=(n>=y)<<1|t>=g){d=h[h.length-1];h[h.length-1]=h[h.length-1-v];h[h.length-1-v]=d}}else{var m=t-+this._x.call(null,p.data),x=n-+this._y.call(null,p.data),_=m*m+x*x;if(_<e){var w=Math.sqrt(e=_);i=t-w,a=n-w;f=t+w,l=n+w;r=p.data}}}return r}function Zs(t){if(isNaN(f=+this._x.call(null,t))||isNaN(l=+this._y.call(null,t)))return this;var n,e=this._root,r,i,a,o=this._x0,u=this._y0,s=this._x1,c=this._y1,f,l,h,p,d,v,g,y;if(!e)return this;if(e.length)while(true){if(d=f>=(h=(o+s)/2))o=h;else s=h;if(v=l>=(p=(u+c)/2))u=p;else c=p;if(!(n=e,e=e[g=v<<1|d]))return this;if(!e.length)break;if(n[g+1&3]||n[g+2&3]||n[g+3&3])r=n,y=g}while(e.data!==t)if(!(i=e,e=e.next))return this;if(a=e.next)delete e.next;if(i)return a?i.next=a:delete i.next,this;if(!n)return this._root=a,this;a?n[g]=a:delete n[g];if((e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length){if(r)r[y]=e;else this._root=e}return this}function $s(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Js(){return this._root}function Ks(){var n=0;this.visit(function(t){if(!t.length)do{++n}while(t=t.next)});return n}function Qs(t){var n=[],e,r=this._root,i,a,o,u,s;if(r)n.push(new Xs(r,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){if(!t(r=e.node,a=e.x0,o=e.y0,u=e.x1,s=e.y1)&&r.length){var c=(a+u)/2,f=(o+s)/2;if(i=r[3])n.push(new Xs(i,c,f,u,s));if(i=r[2])n.push(new Xs(i,a,f,c,s));if(i=r[1])n.push(new Xs(i,c,o,u,f));if(i=r[0])n.push(new Xs(i,a,o,c,f))}}return this}function tc(t){var n=[],e=[],r;if(this._root)n.push(new Xs(this._root,this._x0,this._y0,this._x1,this._y1));while(r=n.pop()){var i=r.node;if(i.length){var a,o=r.x0,u=r.y0,s=r.x1,c=r.y1,f=(o+s)/2,l=(u+c)/2;if(a=i[0])n.push(new Xs(a,o,u,f,l));if(a=i[1])n.push(new Xs(a,f,u,s,l));if(a=i[2])n.push(new Xs(a,o,l,f,c));if(a=i[3])n.push(new Xs(a,f,l,s,c))}e.push(r)}while(r=e.pop()){t(r.node,r.x0,r.y0,r.x1,r.y1)}return this}function nc(t){return t[0]}function ec(t){return arguments.length?(this._x=t,this):this._x}function rc(t){return t[1]}function ic(t){return arguments.length?(this._y=t,this):this._y}function ac(t,n,e){var r=new oc(n==null?nc:n,e==null?rc:e,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function oc(t,n,e,r,i,a){this._x=t;this._y=n;this._x0=e;this._y0=r;this._x1=i;this._y1=a;this._root=undefined}function uc(t){var n={data:t.data},e=n;while(t=t.next)e=e.next={data:t.data};return n}var sc=ac.prototype=oc.prototype;sc.copy=function(){var t=new oc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=uc(n),t;e=[{source:n,target:t._root=new Array(4)}];while(n=e.pop()){for(var i=0;i<4;++i){if(r=n.source[i]){if(r.length)e.push({source:r,target:n.target[i]=new Array(4)});else n.target[i]=uc(r)}}}return t};sc.add=qs;sc.addAll=Hs;sc.cover=Ys;sc.data=Gs;sc.extent=Vs;sc.find=Ws;sc.remove=Zs;sc.removeAll=$s;sc.root=Js;sc.size=Ks;sc.visit=Qs;sc.visitAfter=tc;sc.x=ec;sc.y=ic;function cc(t){return t.x+t.vx}function fc(t){return t.y+t.vy}function lc(r){var a,o,g=1,u=1;if(typeof r!=="function")r=Fs(r==null?1:+r);function n(){var t,n=a.length,e,l,h,p,d,v;for(var r=0;r<u;++r){e=ac(a,cc,fc).visitAfter(s);for(t=0;t<n;++t){l=a[t];d=o[l.index],v=d*d;h=l.x+l.vx;p=l.y+l.vy;e.visit(i)}}function i(t,n,e,r,i){var a=t.data,o=t.r,u=d+o;if(a){if(a.index>l.index){var s=h-a.x-a.vx,c=p-a.y-a.vy,f=s*s+c*c;if(f<u*u){if(s===0)s=Bs(),f+=s*s;if(c===0)c=Bs(),f+=c*c;f=(u-(f=Math.sqrt(f)))/f*g;l.vx+=(s*=f)*(u=(o*=o)/(v+o));l.vy+=(c*=f)*u;a.vx-=s*(u=1-u);a.vy-=c*u}}return}return n>h+u||r<h-u||e>p+u||i<p-u}}function s(t){if(t.data)return t.r=o[t.data.index];for(var n=t.r=0;n<4;++n){if(t[n]&&t[n].r>t.r){t.r=t[n].r}}}function e(){if(!a)return;var t,n=a.length,e;o=new Array(n);for(t=0;t<n;++t)e=a[t],o[e.index]=+r(e,t,a)}n.initialize=function(t){a=t;e()};n.iterations=function(t){return arguments.length?(u=+t,n):u};n.strength=function(t){return arguments.length?(g=+t,n):g};n.radius=function(t){return arguments.length?(r=typeof t==="function"?t:Fs(+t),e(),n):r};return n}function hc(t){return t.index}function pc(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function dc(l){var a=hc,e=t,h,r=Fs(30),p,o,u,d,v=1;if(l==null)l=[];function t(t){return 1/Math.min(u[t.source.index],u[t.target.index])}function n(t){for(var n=0,e=l.length;n<v;++n){for(var r=0,i,a,o,u,s,c,f;r<e;++r){i=l[r],a=i.source,o=i.target;u=o.x+o.vx-a.x-a.vx||Bs();s=o.y+o.vy-a.y-a.vy||Bs();c=Math.sqrt(u*u+s*s);c=(c-p[r])/c*t*h[r];u*=c,s*=c;o.vx-=u*(f=d[r]);o.vy-=s*f;a.vx+=u*(f=1-f);a.vy+=s*f}}}function i(){if(!o)return;var t,n=o.length,e=l.length,r=us(o,a),i;for(t=0,u=new Array(n);t<e;++t){i=l[t],i.index=t;if(typeof i.source!=="object")i.source=pc(r,i.source);if(typeof i.target!=="object")i.target=pc(r,i.target);u[i.source.index]=(u[i.source.index]||0)+1;u[i.target.index]=(u[i.target.index]||0)+1}for(t=0,d=new Array(e);t<e;++t){i=l[t],d[t]=u[i.source.index]/(u[i.source.index]+u[i.target.index])}h=new Array(e),s();p=new Array(e),c()}function s(){if(!o)return;for(var t=0,n=l.length;t<n;++t){h[t]=+e(l[t],t,l)}}function c(){if(!o)return;for(var t=0,n=l.length;t<n;++t){p[t]=+r(l[t],t,l)}}n.initialize=function(t){o=t;i()};n.links=function(t){return arguments.length?(l=t,i(),n):l};n.id=function(t){return arguments.length?(a=t,n):a};n.iterations=function(t){return arguments.length?(v=+t,n):v};n.strength=function(t){return arguments.length?(e=typeof t==="function"?t:Fs(+t),s(),n):e};n.distance=function(t){return arguments.length?(r=typeof t==="function"?t:Fs(+t),c(),n):r};return n}function vc(t){return t.x}function gc(t){return t.y}var yc=10;var mc=Math.PI*(3-Math.sqrt(5));function xc(f){var e,r=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,u=us(),t=Wi(c),s=ct("tick","end");if(f==null)f=[];function c(){l();s.call("tick",e);if(r<n){t.stop();s.call("end",e)}}function l(){var t,n=f.length,e;r+=(a-r)*i;u.each(function(t){t(r)});for(t=0;t<n;++t){e=f[t];if(e.fx==null)e.x+=e.vx*=o;else e.x=e.fx,e.vx=0;if(e.fy==null)e.y+=e.vy*=o;else e.y=e.fy,e.vy=0}}function h(){for(var t=0,n=f.length,e;t<n;++t){e=f[t],e.index=t;if(isNaN(e.x)||isNaN(e.y)){var r=yc*Math.sqrt(t),i=t*mc;e.x=r*Math.cos(i);e.y=r*Math.sin(i)}if(isNaN(e.vx)||isNaN(e.vy)){e.vx=e.vy=0}}}function p(t){if(t.initialize)t.initialize(f);return t}h();return e={tick:l,restart:function(){return t.restart(c),e},stop:function(){return t.stop(),e},nodes:function(t){return arguments.length?(f=t,h(),u.each(p),e):f},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(n=+t,e):n},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(n==null?u.remove(t):u.set(t,p(n)),e):u.get(t)},find:function(t,n,e){var r=0,i=f.length,a,o,u,s,c;if(e==null)e=Infinity;else e*=e;for(r=0;r<i;++r){s=f[r];a=t-s.x;o=n-s.y;u=a*a+o*o;if(u<e)c=s,e=u}return c},on:function(t,n){return arguments.length>1?(s.on(t,n),e):s.on(t)}}}function _c(){var i,s,c,r=Fs(-30),f,l=1,h=Infinity,p=.81;function n(t){var n,e=i.length,r=ac(i,vc,gc).visitAfter(a);for(c=t,n=0;n<e;++n)s=i[n],r.visit(o)}function e(){if(!i)return;var t,n=i.length,e;f=new Array(n);for(t=0;t<n;++t)e=i[t],f[e.index]=+r(e,t,i)}function a(t){var n=0,e,r,i=0,a,o,u;if(t.length){for(a=o=u=0;u<4;++u){if((e=t[u])&&(r=Math.abs(e.value))){n+=e.value,i+=r,a+=r*e.x,o+=r*e.y}}t.x=a/i;t.y=o/i}else{e=t;e.x=e.data.x;e.y=e.data.y;do{n+=f[e.data.index]}while(e=e.next)}t.value=n}function o(t,n,e,r){if(!t.value)return true;var i=t.x-s.x,a=t.y-s.y,o=r-n,u=i*i+a*a;if(o*o/p<u){if(u<h){if(i===0)i=Bs(),u+=i*i;if(a===0)a=Bs(),u+=a*a;if(u<l)u=Math.sqrt(l*u);s.vx+=i*t.value*c/u;s.vy+=a*t.value*c/u}return true}else if(t.length||u>=h)return;if(t.data!==s||t.next){if(i===0)i=Bs(),u+=i*i;if(a===0)a=Bs(),u+=a*a;if(u<l)u=Math.sqrt(l*u)}do{if(t.data!==s){o=f[t.data.index]*c/u;s.vx+=i*o;s.vy+=a*o}}while(t=t.next)}n.initialize=function(t){i=t;e()};n.strength=function(t){return arguments.length?(r=typeof t==="function"?t:Fs(+t),e(),n):r};n.distanceMin=function(t){return arguments.length?(l=t*t,n):Math.sqrt(l)};n.distanceMax=function(t){return arguments.length?(h=t*t,n):Math.sqrt(h)};n.theta=function(t){return arguments.length?(p=t*t,n):Math.sqrt(p)};return n}function wc(e,s,c){var f,r=Fs(.1),l,h;if(typeof e!=="function")e=Fs(+e);if(s==null)s=0;if(c==null)c=0;function n(t){for(var n=0,e=f.length;n<e;++n){var r=f[n],i=r.x-s||1e-6,a=r.y-c||1e-6,o=Math.sqrt(i*i+a*a),u=(h[n]-o)*l[n]*t/o;r.vx+=i*u;r.vy+=a*u}}function i(){if(!f)return;var t,n=f.length;l=new Array(n);h=new Array(n);for(t=0;t<n;++t){h[t]=+e(f[t],t,f);l[t]=isNaN(h[t])?0:+r(f[t],t,f)}}n.initialize=function(t){f=t,i()};n.strength=function(t){return arguments.length?(r=typeof t==="function"?t:Fs(+t),i(),n):r};n.radius=function(t){return arguments.length?(e=typeof t==="function"?t:Fs(+t),i(),n):e};n.x=function(t){return arguments.length?(s=+t,n):s};n.y=function(t){return arguments.length?(c=+t,n):c};return n}function bc(e){var r=Fs(.1),i,a,o;if(typeof e!=="function")e=Fs(e==null?0:+e);function n(t){for(var n=0,e=i.length,r;n<e;++n){r=i[n],r.vx+=(o[n]-r.x)*a[n]*t}}function u(){if(!i)return;var t,n=i.length;a=new Array(n);o=new Array(n);for(t=0;t<n;++t){a[t]=isNaN(o[t]=+e(i[t],t,i))?0:+r(i[t],t,i)}}n.initialize=function(t){i=t;u()};n.strength=function(t){return arguments.length?(r=typeof t==="function"?t:Fs(+t),u(),n):r};n.x=function(t){return arguments.length?(e=typeof t==="function"?t:Fs(+t),u(),n):e};return n}function Mc(e){var r=Fs(.1),i,a,o;if(typeof e!=="function")e=Fs(e==null?0:+e);function n(t){for(var n=0,e=i.length,r;n<e;++n){r=i[n],r.vy+=(o[n]-r.y)*a[n]*t}}function u(){if(!i)return;var t,n=i.length;a=new Array(n);o=new Array(n);for(t=0;t<n;++t){a[t]=isNaN(o[t]=+e(i[t],t,i))?0:+r(i[t],t,i)}}n.initialize=function(t){i=t;u()};n.strength=function(t){return arguments.length?(r=typeof t==="function"?t:Fs(+t),u(),n):r};n.y=function(t){return arguments.length?(e=typeof t==="function"?t:Fs(+t),u(),n):e};return n}function kc(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Sc(t){return t=kc(Math.abs(t)),t?t[1]:NaN}function Ac(u,s){return function(t,n){var e=t.length,r=[],i=0,a=u[0],o=0;while(e>0&&a>0){if(o+a+1>n)a=Math.max(1,n-o);r.push(t.substring(e-=a,e+a));if((o+=a+1)>n)break;a=u[i=(i+1)%u.length]}return r.reverse().join(s)}}function Cc(n){return function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}}function Nc(t,n){t=t.toPrecision(n);t:for(var e=t.length,r=1,i=-1,a;r<e;++r){switch(t[r]){case".":i=a=r;break;case"0":if(i===0)i=r;a=r;break;case"e":break t;default:if(i>0)i=0;break}}return i>0?t.slice(0,i)+t.slice(a+1):t}var Tc;function Ec(t,n){var e=kc(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(Tc=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+kc(t,Math.max(0,n+a-1))[0]}function jc(t,n){var e=kc(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Oc={"":Nc,"%":function(t,n){return(t*100).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return jc(t*100,n)},r:jc,s:Ec,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var Lc=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Ic(t){return new Pc(t)}Ic.prototype=Pc.prototype;function Pc(t){if(!(n=Lc.exec(t)))throw new Error("invalid format: "+t);var n,e=n[1]||" ",r=n[2]||">",i=n[3]||"-",a=n[4]||"",o=!!n[5],u=n[6]&&+n[6],s=!!n[7],c=n[8]&&+n[8].slice(1),f=n[9]||"";if(f==="n")s=true,f="g";else if(!Oc[f])f="";if(o||e==="0"&&r==="=")o=true,e="0",r="=";this.fill=e;this.align=r;this.sign=i;this.symbol=a;this.zero=o;this.width=u;this.comma=s;this.precision=c;this.type=f}Pc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};function Rc(t){return t}var Dc=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function zc(t){var w=t.grouping&&t.thousands?Ac(t.grouping,t.thousands):Rc,r=t.currency,b=t.decimal,M=t.numerals?Cc(t.numerals):Rc,i=t.percent||"%";function o(t){t=Ic(t);var c=t.fill,f=t.align,l=t.sign,n=t.symbol,h=t.zero,p=t.width,d=t.comma,v=t.precision,g=t.type;var y=n==="$"?r[0]:n==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m=n==="$"?r[1]:/[%p]/.test(g)?i:"";var x=Oc[g],_=!g||/[defgprs%]/.test(g);v=v==null?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function e(t){var n=y,e=m,r,i,a;if(g==="c"){e=x(t)+e;t=""}else{t=+t;var o=t<0;t=x(Math.abs(t),v);if(o&&+t===0)o=false;n=(o?l==="("?l:"-":l==="-"||l==="("?"":l)+n;e=(g==="s"?Dc[8+Tc/3]:"")+e+(o&&l==="("?")":"");if(_){r=-1,i=t.length;while(++r<i){if(a=t.charCodeAt(r),48>a||a>57){e=(a===46?b+t.slice(r+1):t.slice(r))+e;t=t.slice(0,r);break}}}}if(d&&!h)t=w(t,Infinity);var u=n.length+t.length+e.length,s=u<p?new Array(p-u+1).join(c):"";if(d&&h)t=w(s+t,s.length?p-e.length:Infinity),s="";switch(f){case"<":t=n+t+e+s;break;case"=":t=n+s+t+e;break;case"^":t=s.slice(0,u=s.length>>1)+n+t+e+s.slice(u);break;default:t=s+n+t+e;break}return M(t)}e.toString=function(){return t+""};return e}function n(t,n){var e=o((t=Ic(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(Sc(n)/3)))*3,i=Math.pow(10,-r),a=Dc[8+r/3];return function(t){return e(i*t)+a}}return{format:o,formatPrefix:n}}var Fc;Bc({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function Bc(t){Fc=zc(t);U.format=Fc.format;U.formatPrefix=Fc.formatPrefix;return Fc}function qc(t){return Math.max(0,-Sc(Math.abs(t)))}function Uc(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sc(n)/3)))*3-Sc(Math.abs(t)))}function Hc(t,n){t=Math.abs(t),n=Math.abs(n)-t;return Math.max(0,Sc(n)-Sc(t))+1}function Yc(){return new Gc}function Gc(){this.reset()}Gc.prototype={constructor:Gc,reset:function(){this.s=this.t=0},add:function(t){Xc(Vc,t,this.t);Xc(this,Vc.s,this.s);if(this.s)this.t+=Vc.t;else this.s=Vc.t},valueOf:function(){return this.s}};var Vc=new Gc;function Xc(t,n,e){var r=t.s=n+e,i=r-n,a=r-i;t.t=n-a+(e-i)}var Wc=1e-6;var Zc=1e-12;var $c=Math.PI;var Jc=$c/2;var Kc=$c/4;var Qc=$c*2;var tf=180/$c;var nf=$c/180;var ef=Math.abs;var rf=Math.atan;var af=Math.atan2;var of=Math.cos;var uf=Math.ceil;var sf=Math.exp;var cf=Math.log;var ff=Math.pow;var lf=Math.sin;var hf=Math.sign||function(t){return t>0?1:t<0?-1:0};var pf=Math.sqrt;var df=Math.tan;function vf(t){return t>1?0:t<-1?$c:Math.acos(t)}function gf(t){return t>1?Jc:t<-1?-Jc:Math.asin(t)}function yf(t){return(t=lf(t/2))*t}function mf(){}function xf(t,n){if(t&&wf.hasOwnProperty(t.type)){wf[t.type](t,n)}}var _f={Feature:function(t,n){xf(t.geometry,n)},FeatureCollection:function(t,n){var e=t.features,r=-1,i=e.length;while(++r<i)xf(e[r].geometry,n)}};var wf={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates;n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){bf(t.coordinates,n,0)},MultiLineString:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)bf(e[r],n,0)},Polygon:function(t,n){Mf(t.coordinates,n)},MultiPolygon:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)Mf(e[r],n)},GeometryCollection:function(t,n){var e=t.geometries,r=-1,i=e.length;while(++r<i)xf(e[r],n)}};function bf(t,n,e){var r=-1,i=t.length-e,a;n.lineStart();while(++r<i)a=t[r],n.point(a[0],a[1],a[2]);n.lineEnd()}function Mf(t,n){var e=-1,r=t.length;n.polygonStart();while(++e<r)bf(t[e],n,1);n.polygonEnd()}function kf(t,n){if(t&&_f.hasOwnProperty(t.type)){_f[t.type](t,n)}else{xf(t,n)}}var Sf=Yc();var Af=Yc();var Cf;var Nf;var Tf;var Ef;var jf;var Of={point:mf,lineStart:mf,lineEnd:mf,polygonStart:function(){Sf.reset();Of.lineStart=Lf;Of.lineEnd=If},polygonEnd:function(){var t=+Sf;Af.add(t<0?Qc+t:t);this.lineStart=this.lineEnd=this.point=mf},sphere:function(){Af.add(Qc)}};function Lf(){Of.point=Pf}function If(){Rf(Cf,Nf)}function Pf(t,n){Of.point=Rf;Cf=t,Nf=n;t*=nf,n*=nf;Tf=t,Ef=of(n=n/2+Kc),jf=lf(n)}function Rf(t,n){t*=nf,n*=nf;n=n/2+Kc;var e=t-Tf,r=e>=0?1:-1,i=r*e,a=of(n),o=lf(n),u=jf*o,s=Ef*a+u*of(i),c=u*r*lf(i);Sf.add(af(c,s));Tf=t,Ef=a,jf=o}function Df(t){Af.reset();kf(t,Of);return Af*2}function zf(t){return[af(t[1],t[0]),gf(t[2])]}function Ff(t){var n=t[0],e=t[1],r=of(e);return[r*of(n),r*lf(n),lf(e)]}function Bf(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function qf(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Uf(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Hf(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Yf(t){var n=pf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Gf;var Vf;var Xf;var Wf;var Zf;var $f;var Jf;var Kf;var Qf=Yc();var tl;var nl;var el={point:rl,lineStart:al,lineEnd:ol,polygonStart:function(){el.point=ul;el.lineStart=sl;el.lineEnd=cl;Qf.reset();Of.polygonStart()},polygonEnd:function(){Of.polygonEnd();el.point=rl;el.lineStart=al;el.lineEnd=ol;if(Sf<0)Gf=-(Xf=180),Vf=-(Wf=90);else if(Qf>Wc)Wf=90;else if(Qf<-Wc)Vf=-90;nl[0]=Gf,nl[1]=Xf}};function rl(t,n){tl.push(nl=[Gf=t,Xf=t]);if(n<Vf)Vf=n;if(n>Wf)Wf=n}function il(t,n){var e=Ff([t*nf,n*nf]);if(Kf){var r=qf(Kf,e),i=[r[1],-r[0],0],a=qf(i,r);Yf(a);a=zf(a);var o=t-Zf,u=o>0?1:-1,s=a[0]*tf*u,c,f=ef(o)>180;if(f^(u*Zf<s&&s<u*t)){c=a[1]*tf;if(c>Wf)Wf=c}else if(s=(s+360)%360-180,f^(u*Zf<s&&s<u*t)){c=-a[1]*tf;if(c<Vf)Vf=c}else{if(n<Vf)Vf=n;if(n>Wf)Wf=n}if(f){if(t<Zf){if(fl(Gf,t)>fl(Gf,Xf))Xf=t}else{if(fl(t,Xf)>fl(Gf,Xf))Gf=t}}else{if(Xf>=Gf){if(t<Gf)Gf=t;if(t>Xf)Xf=t}else{if(t>Zf){if(fl(Gf,t)>fl(Gf,Xf))Xf=t}else{if(fl(t,Xf)>fl(Gf,Xf))Gf=t}}}}else{tl.push(nl=[Gf=t,Xf=t])}if(n<Vf)Vf=n;if(n>Wf)Wf=n;Kf=e,Zf=t}function al(){el.point=il}function ol(){nl[0]=Gf,nl[1]=Xf;el.point=rl;Kf=null}function ul(t,n){if(Kf){var e=t-Zf;Qf.add(ef(e)>180?e+(e>0?360:-360):e)}else{$f=t,Jf=n}Of.point(t,n);il(t,n)}function sl(){Of.lineStart()}function cl(){ul($f,Jf);Of.lineEnd();if(ef(Qf)>Wc)Gf=-(Xf=180);nl[0]=Gf,nl[1]=Xf;Kf=null}function fl(t,n){return(n-=t)<0?n+360:n}function ll(t,n){return t[0]-n[0]}function hl(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function pl(t){var n,e,r,i,a,o,u;Wf=Xf=-(Gf=Vf=Infinity);tl=[];kf(t,el);if(e=tl.length){tl.sort(ll);for(n=1,r=tl[0],a=[r];n<e;++n){i=tl[n];if(hl(r,i[0])||hl(r,i[1])){if(fl(r[0],i[1])>fl(r[0],r[1]))r[1]=i[1];if(fl(i[0],r[1])>fl(r[0],r[1]))r[0]=i[0]}else{a.push(r=i)}}for(o=-Infinity,e=a.length-1,n=0,r=a[e];n<=e;r=i,++n){i=a[n];if((u=fl(r[1],i[0]))>o)o=u,Gf=i[0],Xf=r[1]}}tl=nl=null;return Gf===Infinity||Vf===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Gf,Vf],[Xf,Wf]]}var dl;var vl;var gl;var yl;var ml;var xl;var _l;var wl;var bl;var Ml;var kl;var Sl;var Al;var Cl;var Nl;var Tl;var El={sphere:mf,point:jl,lineStart:Ll,lineEnd:Rl,polygonStart:function(){El.lineStart=Dl;El.lineEnd=zl},polygonEnd:function(){El.lineStart=Ll;El.lineEnd=Rl}};function jl(t,n){t*=nf,n*=nf;var e=of(n);Ol(e*of(t),e*lf(t),lf(n))}function Ol(t,n,e){++dl;gl+=(t-gl)/dl;yl+=(n-yl)/dl;ml+=(e-ml)/dl}function Ll(){El.point=Il}function Il(t,n){t*=nf,n*=nf;var e=of(n);Cl=e*of(t);Nl=e*lf(t);Tl=lf(n);El.point=Pl;Ol(Cl,Nl,Tl)}function Pl(t,n){t*=nf,n*=nf;var e=of(n),r=e*of(t),i=e*lf(t),a=lf(n),o=af(pf((o=Nl*a-Tl*i)*o+(o=Tl*r-Cl*a)*o+(o=Cl*i-Nl*r)*o),Cl*r+Nl*i+Tl*a);vl+=o;xl+=o*(Cl+(Cl=r));_l+=o*(Nl+(Nl=i));wl+=o*(Tl+(Tl=a));Ol(Cl,Nl,Tl)}function Rl(){El.point=jl}function Dl(){El.point=Fl}function zl(){Bl(Sl,Al);El.point=jl}function Fl(t,n){Sl=t,Al=n;t*=nf,n*=nf;El.point=Bl;var e=of(n);Cl=e*of(t);Nl=e*lf(t);Tl=lf(n);Ol(Cl,Nl,Tl)}function Bl(t,n){t*=nf,n*=nf;var e=of(n),r=e*of(t),i=e*lf(t),a=lf(n),o=Nl*a-Tl*i,u=Tl*r-Cl*a,s=Cl*i-Nl*r,c=pf(o*o+u*u+s*s),f=gf(c),l=c&&-f/c;bl+=l*o;Ml+=l*u;kl+=l*s;vl+=f;xl+=f*(Cl+(Cl=r));_l+=f*(Nl+(Nl=i));wl+=f*(Tl+(Tl=a));Ol(Cl,Nl,Tl)}function ql(t){dl=vl=gl=yl=ml=xl=_l=wl=bl=Ml=kl=0;kf(t,El);var n=bl,e=Ml,r=kl,i=n*n+e*e+r*r;if(i<Zc){n=xl,e=_l,r=wl;if(vl<Wc)n=gl,e=yl,r=ml;i=n*n+e*e+r*r;if(i<Zc)return[NaN,NaN]}return[af(e,n)*tf,gf(r/pf(i))*tf]}function Ul(t){return function(){return t}}function Hl(e,r){function t(t,n){return t=e(t,n),r(t[0],t[1])}if(e.invert&&r.invert)t.invert=function(t,n){return t=r.invert(t,n),t&&e.invert(t[0],t[1])};return t}function Yl(t,n){return[t>$c?t-Qc:t<-$c?t+Qc:t,n]}Yl.invert=Yl;function Gl(t,n,e){return(t%=Qc)?n||e?Hl(Xl(t),Wl(n,e)):Xl(t):n||e?Wl(n,e):Yl}function Vl(e){return function(t,n){return t+=e,[t>$c?t-Qc:t<-$c?t+Qc:t,n]}}function Xl(t){var n=Vl(t);n.invert=Vl(-t);return n}function Wl(t,n){var u=of(t),s=lf(t),c=of(n),f=lf(n);function e(t,n){var e=of(n),r=of(t)*e,i=lf(t)*e,a=lf(n),o=a*u+r*s;return[af(i*c-o*f,r*u-a*s),gf(o*c+i*f)]}e.invert=function(t,n){var e=of(n),r=of(t)*e,i=lf(t)*e,a=lf(n),o=a*c-i*f;return[af(i*c+a*f,r*u+o*s),gf(o*u-r*s)]};return e}function Zl(n){n=Gl(n[0]*nf,n[1]*nf,n.length>2?n[2]*nf:0);function t(t){t=n(t[0]*nf,t[1]*nf);return t[0]*=tf,t[1]*=tf,t}t.invert=function(t){t=n.invert(t[0]*nf,t[1]*nf);return t[0]*=tf,t[1]*=tf,t};return t}function $l(t,n,e,r,i,a){if(!e)return;var o=of(n),u=lf(n),s=r*e;if(i==null){i=n+r*Qc;a=n-s/2}else{i=Jl(o,i);a=Jl(o,a);if(r>0?i<a:i>a)i+=r*Qc}for(var c,f=i;r>0?f>a:f<a;f-=s){c=zf([o,-u*of(f),-u*lf(f)]);t.point(c[0],c[1])}}function Jl(t,n){n=Ff(n),n[0]-=t;Yf(n);var e=vf(-n[1]);return((-n[2]<0?-e:e)+Qc-Wc)%Qc}function Kl(){var r=Ul([0,0]),i=Ul(90),a=Ul(6),o,u,s={point:t};function t(t,n){o.push(t=u(t,n));t[0]*=tf,t[1]*=tf}function n(){var t=r.apply(this,arguments),n=i.apply(this,arguments)*nf,e=a.apply(this,arguments)*nf;o=[];u=Gl(-t[0]*nf,-t[1]*nf,0).invert;$l(s,n,e,1);t={type:"Polygon",coordinates:[o]};o=u=null;return t}n.center=function(t){return arguments.length?(r=typeof t==="function"?t:Ul([+t[0],+t[1]]),n):r};n.radius=function(t){return arguments.length?(i=typeof t==="function"?t:Ul(+t),n):i};n.precision=function(t){return arguments.length?(a=typeof t==="function"?t:Ul(+t),n):a};return n}function Ql(){var n=[],e;return{point:function(t,n){e.push([t,n])},lineStart:function(){n.push(e=[])},lineEnd:mf,rejoin:function(){if(n.length>1)n.push(n.pop().concat(n.shift()))},result:function(){var t=n;n=[];e=null;return t}}}function th(t,n){return ef(t[0]-n[0])<Wc&&ef(t[1]-n[1])<Wc}function nh(t,n,e,r){this.x=t;this.z=n;this.o=e;this.e=r;this.v=false;this.n=this.p=null}function eh(t,n,e,r,a){var o=[],u=[],s,i;t.forEach(function(t){if((n=t.length-1)<=0)return;var n,e=t[0],r=t[n],i;if(th(e,r)){a.lineStart();for(s=0;s<n;++s)a.point((e=t[s])[0],e[1]);a.lineEnd();return}o.push(i=new nh(e,t,null,true));u.push(i.o=new nh(e,null,i,false));o.push(i=new nh(r,t,null,false));u.push(i.o=new nh(r,null,i,true))});if(!o.length)return;u.sort(n);rh(o);rh(u);for(s=0,i=u.length;s<i;++s){u[s].e=e=!e}var c=o[0],f,l;while(1){var h=c,p=true;while(h.v)if((h=h.n)===c)return;f=h.z;a.lineStart();do{h.v=h.o.v=true;if(h.e){if(p){for(s=0,i=f.length;s<i;++s)a.point((l=f[s])[0],l[1])}else{r(h.x,h.n.x,1,a)}h=h.n}else{if(p){f=h.p.z;for(s=f.length-1;s>=0;--s)a.point((l=f[s])[0],l[1])}else{r(h.x,h.p.x,-1,a)}h=h.p}h=h.o;f=h.z;p=!p}while(!h.v);a.lineEnd()}}function rh(t){if(!(n=t.length))return;var n,e=0,r=t[0],i;while(++e<n){r.n=i=t[e];i.p=r;r=i}r.n=i=t[0];i.p=r}var ih=Yc();function ah(t,n){var e=n[0],r=n[1],i=[lf(e),-of(e),0],a=0,o=0;ih.reset();for(var u=0,s=t.length;u<s;++u){if(!(f=(c=t[u]).length))continue;var c,f,l=c[f-1],h=l[0],p=l[1]/2+Kc,d=lf(p),v=of(p);for(var g=0;g<f;++g,h=m,d=_,v=w,l=y){var y=c[g],m=y[0],x=y[1]/2+Kc,_=lf(x),w=of(x),b=m-h,M=b>=0?1:-1,k=M*b,S=k>$c,A=d*_;ih.add(af(A*M*lf(k),v*w+A*of(k)));a+=S?b+M*Qc:b;if(S^h>=e^m>=e){var C=qf(Ff(l),Ff(y));Yf(C);var N=qf(i,C);Yf(N);var T=(S^b>=0?-1:1)*gf(N[2]);if(r>T||r===T&&(C[0]||C[1])){o+=S^b>=0?1:-1}}}}return(a<-Wc||a<Wc&&ih<-Wc)^o&1}function oh(g,y,m,x){return function(u){var e=y(u),s=Ql(),c=y(s),f=false,l,h,p;var n={point:r,lineStart:i,lineEnd:a,polygonStart:function(){n.point=d;n.lineStart=o;n.lineEnd=v;h=[];l=[]},polygonEnd:function(){n.point=r;n.lineStart=i;n.lineEnd=a;h=P(h);var t=ah(l,x);if(h.length){if(!f)u.polygonStart(),f=true;eh(h,sh,t,m,u)}else if(t){if(!f)u.polygonStart(),f=true;u.lineStart();m(null,null,1,u);u.lineEnd()}if(f)u.polygonEnd(),f=false;h=l=null},sphere:function(){u.polygonStart();u.lineStart();m(null,null,1,u);u.lineEnd();u.polygonEnd()}};function r(t,n){if(g(t,n))u.point(t,n)}function t(t,n){e.point(t,n)}function i(){n.point=t;e.lineStart()}function a(){n.point=r;e.lineEnd()}function d(t,n){p.push([t,n]);c.point(t,n)}function o(){c.lineStart();p=[]}function v(){d(p[0][0],p[0][1]);c.lineEnd();var t=c.clean(),n=s.result(),e,r=n.length,i,a,o;p.pop();l.push(p);p=null;if(!r)return;if(t&1){a=n[0];if((i=a.length-1)>0){if(!f)u.polygonStart(),f=true;u.lineStart();for(e=0;e<i;++e)u.point((o=a[e])[0],o[1]);u.lineEnd()}return}if(r>1&&t&2)n.push(n.pop().concat(n.shift()));h.push(n.filter(uh))}return n}}function uh(t){return t.length>1}function sh(t,n){return((t=t.x)[0]<0?t[1]-Jc-Wc:Jc-t[1])-((n=n.x)[0]<0?n[1]-Jc-Wc:Jc-n[1])}var ch=oh(function(){return true},fh,hh,[-$c,-Jc]);function fh(i){var a=NaN,o=NaN,u=NaN,s;return{lineStart:function(){i.lineStart();s=1},point:function(t,n){var e=t>0?$c:-$c,r=ef(t-a);if(ef(r-$c)<Wc){i.point(a,o=(o+n)/2>0?Jc:-Jc);i.point(u,o);i.lineEnd();i.lineStart();i.point(e,o);i.point(t,o);s=0}else if(u!==e&&r>=$c){if(ef(a-u)<Wc)a-=u*Wc;if(ef(t-e)<Wc)t-=e*Wc;o=lh(a,o,t,n);i.point(u,o);i.lineEnd();i.lineStart();i.point(e,o);s=0}i.point(a=t,o=n);u=e},lineEnd:function(){i.lineEnd();a=o=NaN},clean:function(){return 2-s}}}function lh(t,n,e,r){var i,a,o=lf(t-e);return ef(o)>Wc?rf((lf(n)*(a=of(r))*lf(e)-lf(r)*(i=of(n))*lf(t))/(i*a*o)):(n+r)/2}function hh(t,n,e,r){var i;if(t==null){i=e*Jc;r.point(-$c,i);r.point(0,i);r.point($c,i);r.point($c,0);r.point($c,-i);r.point(0,-i);r.point(-$c,-i);r.point(-$c,0);r.point(-$c,i)}else if(ef(t[0]-n[0])>Wc){var a=t[0]<n[0]?$c:-$c;i=e*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else{r.point(n[0],n[1])}}function ph(i){var E=of(i),a=6*nf,p=E>0,d=ef(E)>Wc;function t(t,n,e,r){$l(r,i,a,e,t,n)}function v(t,n){return of(t)*of(n)>E}function n(u){var s,c,f,l,h;return{lineStart:function(){l=f=false;h=1},point:function(t,n){var e=[t,n],r,i=v(t,n),a=p?i?0:y(t,n):i?y(t+(t<0?$c:-$c),n):0;if(!s&&(l=f=i))u.lineStart();if(i!==f){r=g(s,e);if(!r||th(s,r)||th(e,r)){e[0]+=Wc;e[1]+=Wc;i=v(e[0],e[1])}}if(i!==f){h=0;if(i){u.lineStart();r=g(e,s);u.point(r[0],r[1])}else{r=g(s,e);u.point(r[0],r[1]);u.lineEnd()}s=r}else if(d&&s&&p^i){var o;if(!(a&c)&&(o=g(e,s,true))){h=0;if(p){u.lineStart();u.point(o[0][0],o[0][1]);u.point(o[1][0],o[1][1]);u.lineEnd()}else{u.point(o[1][0],o[1][1]);u.lineEnd();u.lineStart();u.point(o[0][0],o[0][1])}}}if(i&&(!s||!th(s,e))){u.point(e[0],e[1])}s=e,f=i,c=a},lineEnd:function(){if(f)u.lineEnd();s=null},clean:function(){return h|(l&&f)<<1}}}function g(t,n,e){var r=Ff(t),i=Ff(n);var a=[1,0,0],o=qf(r,i),u=Bf(o,o),s=o[0],c=u-s*s;if(!c)return!e&&t;var f=E*u/c,l=-E*s/c,h=qf(a,o),p=Hf(a,f),d=Hf(o,l);Uf(p,d);var v=h,g=Bf(p,v),y=Bf(v,v),m=g*g-y*(Bf(p,p)-1);if(m<0)return;var x=pf(m),_=Hf(v,(-g-x)/y);Uf(_,p);_=zf(_);if(!e)return _;var w=t[0],b=n[0],M=t[1],k=n[1],S;if(b<w)S=w,w=b,b=S;var A=b-w,C=ef(A-$c)<Wc,N=C||A<Wc;if(!C&&k<M)S=M,M=k,k=S;if(N?C?M+k>0^_[1]<(ef(_[0]-w)<Wc?M:k):M<=_[1]&&_[1]<=k:A>$c^(w<=_[0]&&_[0]<=b)){var T=Hf(v,(-g+x)/y);Uf(T,p);return[_,zf(T)]}}function y(t,n){var e=p?i:$c-i,r=0;if(t<-e)r|=1;else if(t>e)r|=2;if(n<-e)r|=4;else if(n>e)r|=8;return r}return oh(v,n,t,p?[0,-i]:[-$c,i-$c])}function dh(t,n,e,r,i,a){var o=t[0],u=t[1],s=n[0],c=n[1],f=0,l=1,h=s-o,p=c-u,d;d=e-o;if(!h&&d>0)return;d/=h;if(h<0){if(d<f)return;if(d<l)l=d}else if(h>0){if(d>l)return;if(d>f)f=d}d=i-o;if(!h&&d<0)return;d/=h;if(h<0){if(d>l)return;if(d>f)f=d}else if(h>0){if(d<f)return;if(d<l)l=d}d=r-u;if(!p&&d>0)return;d/=p;if(p<0){if(d<f)return;if(d<l)l=d}else if(p>0){if(d>l)return;if(d>f)f=d}d=a-u;if(!p&&d<0)return;d/=p;if(p<0){if(d>l)return;if(d>f)f=d}else if(p>0){if(d<f)return;if(d<l)l=d}if(f>0)t[0]=o+f*h,t[1]=u+f*p;if(l<1)n[0]=o+l*h,n[1]=u+l*p;return true}var vh=1e9;var gh=-vh;function yh(b,M,k,S){function A(t,n){return b<=t&&t<=k&&M<=n&&n<=S}function C(t,n,e,r){var i=0,a=0;if(t==null||(i=o(t,e))!==(a=o(n,e))||u(t,n)<0^e>0){do{r.point(i===0||i===3?b:k,i>1?S:M)}while((i=(i+e+4)%4)!==a)}else{r.point(n[0],n[1])}}function o(t,n){return ef(t[0]-b)<Wc?n>0?0:3:ef(t[0]-k)<Wc?n>0?2:1:ef(t[1]-M)<Wc?n>0?1:0:n>0?3:2}function N(t,n){return u(t.x,n.x)}function u(t,n){var e=o(t,1),r=o(n,1);return e!==r?e-r:e===0?n[1]-t[1]:e===1?t[0]-n[0]:e===2?t[1]-n[1]:n[0]-t[0]}return function(r){var a=r,t=Ql(),i,l,o,u,s,c,f,h,p,d,v;var n={point:e,lineStart:x,lineEnd:_,polygonStart:y,polygonEnd:m};function e(t,n){if(A(t,n))a.point(t,n)}function g(){var t=0;for(var n=0,e=l.length;n<e;++n){for(var r=l[n],i=1,a=r.length,o=r[0],u,s,c=o[0],f=o[1];i<a;++i){u=c,s=f,o=r[i],c=o[0],f=o[1];if(s<=S){if(f>S&&(c-u)*(S-s)>(f-s)*(b-u))++t}else{if(f<=S&&(c-u)*(S-s)<(f-s)*(b-u))--t}}}return t}function y(){a=t,i=[],l=[],v=true}function m(){var t=g(),n=v&&t,e=(i=P(i)).length;if(n||e){r.polygonStart();if(n){r.lineStart();C(null,null,1,r);r.lineEnd()}if(e){eh(i,N,t,C,r)}r.polygonEnd()}a=r,i=l=o=null}function x(){n.point=w;if(l)l.push(o=[]);d=true;p=false;f=h=NaN}function _(){if(i){w(u,s);if(c&&p)t.rejoin();i.push(t.result())}n.point=e;if(p)a.lineEnd()}function w(t,n){var e=A(t,n);if(l)o.push([t,n]);if(d){u=t,s=n,c=e;d=false;if(e){a.lineStart();a.point(t,n)}}else{if(e&&p)a.point(t,n);else{var r=[f=Math.max(gh,Math.min(vh,f)),h=Math.max(gh,Math.min(vh,h))],i=[t=Math.max(gh,Math.min(vh,t)),n=Math.max(gh,Math.min(vh,n))];if(dh(r,i,b,M,k,S)){if(!p){a.lineStart();a.point(r[0],r[1])}a.point(i[0],i[1]);if(!e)a.lineEnd();v=false}else if(e){a.lineStart();a.point(t,n);v=false}}}f=t,h=n,p=e}return n}}function mh(){var n=0,e=0,r=960,i=500,a,o,u;return u={stream:function(t){return a&&o===t?a:a=yh(n,e,r,i)(o=t)},extent:function(t){return arguments.length?(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1],a=o=null,u):[[n,e],[r,i]]}}}var xh=Yc();var _h;var wh;var bh;var Mh={sphere:mf,point:mf,lineStart:kh,lineEnd:mf,polygonStart:mf,polygonEnd:mf};function kh(){Mh.point=Ah;Mh.lineEnd=Sh}function Sh(){Mh.point=Mh.lineEnd=mf}function Ah(t,n){t*=nf,n*=nf;_h=t,wh=lf(n),bh=of(n);Mh.point=Ch}function Ch(t,n){t*=nf,n*=nf;var e=lf(n),r=of(n),i=ef(t-_h),a=of(i),o=lf(i),u=r*o,s=bh*e-wh*r*a,c=wh*e+bh*r*a;xh.add(af(pf(u*u+s*s),c));_h=t,wh=e,bh=r}function Nh(t){xh.reset();kf(t,Mh);return+xh}var Th=[null,null];var Eh={type:"LineString",coordinates:Th};function jh(t,n){Th[0]=t;Th[1]=n;return Nh(Eh)}var Oh={Feature:function(t,n){return Ih(t.geometry,n)},FeatureCollection:function(t,n){var e=t.features,r=-1,i=e.length;while(++r<i)if(Ih(e[r].geometry,n))return true;return false}};var Lh={Sphere:function(){return true},Point:function(t,n){return Ph(t.coordinates,n)},MultiPoint:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)if(Ph(e[r],n))return true;return false},LineString:function(t,n){return Rh(t.coordinates,n)},MultiLineString:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)if(Rh(e[r],n))return true;return false},Polygon:function(t,n){return Dh(t.coordinates,n)},MultiPolygon:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)if(Dh(e[r],n))return true;return false},GeometryCollection:function(t,n){var e=t.geometries,r=-1,i=e.length;while(++r<i)if(Ih(e[r],n))return true;return false}};function Ih(t,n){return t&&Lh.hasOwnProperty(t.type)?Lh[t.type](t,n):false}function Ph(t,n){return jh(t,n)===0}function Rh(t,n){var e=jh(t[0],t[1]),r=jh(t[0],n),i=jh(n,t[1]);return r+i<=e+Wc}function Dh(t,n){return!!ah(t.map(zh),Fh(n))}function zh(t){return t=t.map(Fh),t.pop(),t}function Fh(t){return[t[0]*nf,t[1]*nf]}function Bh(t,n){return(t&&Oh.hasOwnProperty(t.type)?Oh[t.type]:Ih)(t,n)}function qh(t,n,e){var r=S(t,n-Wc,e).concat(n);return function(n){return r.map(function(t){return[n,t]})}}function Uh(t,n,e){var r=S(t,n-Wc,e).concat(n);return function(n){return r.map(function(t){return[t,n]})}}function Hh(){var n,e,r,i,a,o,u,s,c=10,f=c,l=90,h=360,p,d,v,g,y=2.5;function m(){return{type:"MultiLineString",coordinates:t()}}function t(){return S(uf(i/l)*l,r,l).map(v).concat(S(uf(s/h)*h,u,h).map(g)).concat(S(uf(e/c)*c,n,c).filter(function(t){return ef(t%l)>Wc}).map(p)).concat(S(uf(o/f)*f,a,f).filter(function(t){return ef(t%h)>Wc}).map(d))}m.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})};m.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(g(u).slice(1),v(r).reverse().slice(1),g(s).reverse().slice(1))]}};m.extent=function(t){if(!arguments.length)return m.extentMinor();return m.extentMajor(t).extentMinor(t)};m.extentMajor=function(t){if(!arguments.length)return[[i,s],[r,u]];i=+t[0][0],r=+t[1][0];s=+t[0][1],u=+t[1][1];if(i>r)t=i,i=r,r=t;if(s>u)t=s,s=u,u=t;return m.precision(y)};m.extentMinor=function(t){if(!arguments.length)return[[e,o],[n,a]];e=+t[0][0],n=+t[1][0];o=+t[0][1],a=+t[1][1];if(e>n)t=e,e=n,n=t;if(o>a)t=o,o=a,a=t;return m.precision(y)};m.step=function(t){if(!arguments.length)return m.stepMinor();return m.stepMajor(t).stepMinor(t)};m.stepMajor=function(t){if(!arguments.length)return[l,h];l=+t[0],h=+t[1];return m};m.stepMinor=function(t){if(!arguments.length)return[c,f];c=+t[0],f=+t[1];return m};m.precision=function(t){if(!arguments.length)return y;y=+t;p=qh(o,a,90);d=Uh(e,n,y);v=qh(s,u,90);g=Uh(i,r,y);return m};return m.extentMajor([[-180,-90+Wc],[180,90-Wc]]).extentMinor([[-180,-80-Wc],[180,80+Wc]])}function Yh(){return Hh()()}function Gh(t,n){var e=t[0]*nf,r=t[1]*nf,i=n[0]*nf,a=n[1]*nf,o=of(r),u=lf(r),s=of(a),c=lf(a),f=o*of(e),l=o*lf(e),h=s*of(i),p=s*lf(i),d=2*gf(pf(yf(a-r)+o*s*yf(i-e))),v=lf(d);var g=d?function(t){var n=lf(t*=d)/v,e=lf(d-t)/v,r=e*f+n*h,i=e*l+n*p,a=e*u+n*c;return[af(i,r)*tf,af(a,pf(r*r+i*i))*tf]}:function(){return[e*tf,r*tf]};g.distance=d;return g}function Vh(t){return t}var Xh=Yc();var Wh=Yc();var Zh;var $h;var Jh;var Kh;var Qh={point:mf,lineStart:mf,lineEnd:mf,polygonStart:function(){Qh.lineStart=tp;Qh.lineEnd=rp},polygonEnd:function(){Qh.lineStart=Qh.lineEnd=Qh.point=mf;Xh.add(ef(Wh));Wh.reset()},result:function(){var t=Xh/2;Xh.reset();return t}};function tp(){Qh.point=np}function np(t,n){Qh.point=ep;Zh=Jh=t,$h=Kh=n}function ep(t,n){Wh.add(Kh*t-Jh*n);Jh=t,Kh=n}function rp(){ep(Zh,$h)}var ip=Infinity;var ap=ip;var op=-ip;var up=op;var sp={point:cp,lineStart:mf,lineEnd:mf,polygonStart:mf,polygonEnd:mf,result:function(){var t=[[ip,ap],[op,up]];op=up=-(ap=ip=Infinity);return t}};function cp(t,n){if(t<ip)ip=t;if(t>op)op=t;if(n<ap)ap=n;if(n>up)up=n}var fp=0;var lp=0;var hp=0;var pp=0;var dp=0;var vp=0;var gp=0;var yp=0;var mp=0;var xp;var _p;var wp;var bp;var Mp={point:kp,lineStart:Sp,lineEnd:Np,polygonStart:function(){Mp.lineStart=Tp;Mp.lineEnd=Ep},polygonEnd:function(){Mp.point=kp;Mp.lineStart=Sp;Mp.lineEnd=Np},result:function(){var t=mp?[gp/mp,yp/mp]:vp?[pp/vp,dp/vp]:hp?[fp/hp,lp/hp]:[NaN,NaN];fp=lp=hp=pp=dp=vp=gp=yp=mp=0;return t}};function kp(t,n){fp+=t;lp+=n;++hp}function Sp(){Mp.point=Ap}function Ap(t,n){Mp.point=Cp;kp(wp=t,bp=n)}function Cp(t,n){var e=t-wp,r=n-bp,i=pf(e*e+r*r);pp+=i*(wp+t)/2;dp+=i*(bp+n)/2;vp+=i;kp(wp=t,bp=n)}function Np(){Mp.point=kp}function Tp(){Mp.point=jp}function Ep(){Op(xp,_p)}function jp(t,n){Mp.point=Op;kp(xp=wp=t,_p=bp=n)}function Op(t,n){var e=t-wp,r=n-bp,i=pf(e*e+r*r);pp+=i*(wp+t)/2;dp+=i*(bp+n)/2;vp+=i;i=bp*t-wp*n;gp+=i*(wp+t);yp+=i*(bp+n);mp+=i*3;kp(wp=t,bp=n)}function Lp(t){this._context=t}Lp.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0)this._context.closePath();this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n);this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n);this._context.arc(t,n,this._radius,0,Qc);break}}},result:mf};var Ip=Yc();var Pp;var Rp;var Dp;var zp;var Fp;var Bp={point:mf,lineStart:function(){Bp.point=qp},lineEnd:function(){if(Pp)Up(Rp,Dp);Bp.point=mf},polygonStart:function(){Pp=true},polygonEnd:function(){Pp=null},result:function(){var t=+Ip;Ip.reset();return t}};function qp(t,n){Bp.point=Up;Rp=zp=t,Dp=Fp=n}function Up(t,n){zp-=t,Fp-=n;Ip.add(pf(zp*zp+Fp*Fp));zp=t,Fp=n}function Hp(){this._string=[]}Hp.prototype={_radius:4.5,_circle:Yp(4.5),pointRadius:function(t){if((t=+t)!==this._radius)this._radius=t,this._circle=null;return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0)this._string.push("Z");this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._string.push("M",t,",",n);this._point=1;break}case 1:{this._string.push("L",t,",",n);break}default:{if(this._circle==null)this._circle=Yp(this._radius);this._string.push("M",t,",",n,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");this._string=[];return t}else{return null}}};function Yp(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Gp(n,e){var r=4.5,i,a;function o(t){if(t){if(typeof r==="function")a.pointRadius(+r.apply(this,arguments));kf(t,i(a))}return a.result()}o.area=function(t){kf(t,i(Qh));return Qh.result()};o.measure=function(t){kf(t,i(Bp));return Bp.result()};o.bounds=function(t){kf(t,i(sp));return sp.result()};o.centroid=function(t){kf(t,i(Mp));return Mp.result()};o.projection=function(t){return arguments.length?(i=t==null?(n=null,Vh):(n=t).stream,o):n};o.context=function(t){if(!arguments.length)return e;a=t==null?(e=null,new Hp):new Lp(e=t);if(typeof r!=="function")a.pointRadius(r);return o};o.pointRadius=function(t){if(!arguments.length)return r;r=typeof t==="function"?t:(a.pointRadius(+t),+t);return o};return o.projection(n).context(e)}function Vp(t){return{stream:Xp(t)}}function Xp(r){return function(t){var n=new Wp;for(var e in r)n[e]=r[e];n.stream=t;return n}}function Wp(){}Wp.prototype={constructor:Wp,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Zp(t,n,e){var r=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]);if(r!=null)t.clipExtent(null);kf(e,t.stream(sp));n(sp.result());if(r!=null)t.clipExtent(r);return t}function $p(o,u,t){return Zp(o,function(t){var n=u[1][0]-u[0][0],e=u[1][1]-u[0][1],r=Math.min(n/(t[1][0]-t[0][0]),e/(t[1][1]-t[0][1])),i=+u[0][0]+(n-r*(t[1][0]+t[0][0]))/2,a=+u[0][1]+(e-r*(t[1][1]+t[0][1]))/2;o.scale(150*r).translate([i,a])},t)}function Jp(t,n,e){return $p(t,[[0,0],n],e)}function Kp(a,o,t){return Zp(a,function(t){var n=+o,e=n/(t[1][0]-t[0][0]),r=(n-e*(t[1][0]+t[0][0]))/2,i=-e*t[0][1];a.scale(150*e).translate([r,i])},t)}function Qp(a,o,t){return Zp(a,function(t){var n=+o,e=n/(t[1][1]-t[0][1]),r=-e*t[0][0],i=(n-e*(t[1][1]+t[0][1]))/2;a.scale(150*e).translate([r,i])},t)}var td=16;var nd=of(30*nf);function ed(t,n){return+n?id(t,n):rd(t)}function rd(e){return Xp({point:function(t,n){t=e(t,n);this.stream.point(t[0],t[1])}})}function id(T,E){function j(t,n,e,r,i,a,o,u,s,c,f,l,h,p){var d=o-t,v=u-n,g=d*d+v*v;if(g>4*E&&h--){var y=r+c,m=i+f,x=a+l,_=pf(y*y+m*m+x*x),w=gf(x/=_),b=ef(ef(x)-1)<Wc||ef(e-s)<Wc?(e+s)/2:af(m,y),M=T(b,w),k=M[0],S=M[1],A=k-t,C=S-n,N=v*A-d*C;if(N*N/g>E||ef((d*A+v*C)/g-.5)>.3||r*c+i*f+a*l<nd){j(t,n,e,r,i,a,k,S,b,y/=_,m/=_,x,h,p);p.point(k,S);j(k,S,b,y,m,x,o,u,s,c,f,l,h,p)}}}return function(i){var e,r,a,o,u,s,c,f,l,h,p,d;var v={point:t,lineStart:n,lineEnd:y,polygonStart:function(){i.polygonStart();v.lineStart=m},polygonEnd:function(){i.polygonEnd();v.lineStart=n}};function t(t,n){t=T(t,n);i.point(t[0],t[1])}function n(){f=NaN;v.point=g;i.lineStart()}function g(t,n){var e=Ff([t,n]),r=T(t,n);j(f,l,c,h,p,d,f=r[0],l=r[1],c=t,h=e[0],p=e[1],d=e[2],td,i);i.point(f,l)}function y(){v.point=t;i.lineEnd()}function m(){n();v.point=x;v.lineEnd=_}function x(t,n){g(e=t,n),r=f,a=l,o=h,u=p,s=d;v.point=g}function _(){j(f,l,c,h,p,d,r,a,e,o,u,s,td,i);v.lineEnd=y;y()}return v}}var ad=Xp({point:function(t,n){this.stream.point(t*nf,n*nf)}});function od(r){return Xp({point:function(t,n){var e=r(t,n);return this.stream.point(e[0],e[1])}})}function ud(t){return sd(function(){return t})()}function sd(t){var e,r=150,n=480,i=250,a,o,u=0,s=0,c=0,f=0,l=0,h,p,d=null,v=ch,g=null,y,m,x,_=Vh,w=.5,b=ed(C,w),M,k;function S(t){t=p(t[0]*nf,t[1]*nf);return[t[0]*r+a,o-t[1]*r]}function A(t){t=p.invert((t[0]-a)/r,(o-t[1])/r);return t&&[t[0]*tf,t[1]*tf]}function C(t,n){return t=e(t,n),[t[0]*r+a,o-t[1]*r]}S.stream=function(t){return M&&k===t?M:M=ad(od(h)(v(b(_(k=t)))))};S.preclip=function(t){return arguments.length?(v=t,d=undefined,T()):v};S.postclip=function(t){return arguments.length?(_=t,g=y=m=x=null,T()):_};S.clipAngle=function(t){return arguments.length?(v=+t?ph(d=t*nf):(d=null,ch),T()):d*tf};S.clipExtent=function(t){return arguments.length?(_=t==null?(g=y=m=x=null,Vh):yh(g=+t[0][0],y=+t[0][1],m=+t[1][0],x=+t[1][1]),T()):g==null?null:[[g,y],[m,x]]};S.scale=function(t){return arguments.length?(r=+t,N()):r};S.translate=function(t){return arguments.length?(n=+t[0],i=+t[1],N()):[n,i]};S.center=function(t){return arguments.length?(u=t[0]%360*nf,s=t[1]%360*nf,N()):[u*tf,s*tf]};S.rotate=function(t){return arguments.length?(c=t[0]%360*nf,f=t[1]%360*nf,l=t.length>2?t[2]%360*nf:0,N()):[c*tf,f*tf,l*tf]};S.precision=function(t){return arguments.length?(b=ed(C,w=t*t),T()):pf(w)};S.fitExtent=function(t,n){return $p(S,t,n)};S.fitSize=function(t,n){return Jp(S,t,n)};S.fitWidth=function(t,n){return Kp(S,t,n)};S.fitHeight=function(t,n){return Qp(S,t,n)};function N(){p=Hl(h=Gl(c,f,l),e);var t=e(u,s);a=n-t[0]*r;o=i+t[1]*r;return T()}function T(){M=k=null;return S}return function(){e=t.apply(this,arguments);S.invert=e.invert&&A;return N()}}function cd(t){var n=0,e=$c/3,r=sd(t),i=r(n,e);i.parallels=function(t){return arguments.length?r(n=t[0]*nf,e=t[1]*nf):[n*tf,e*tf]};return i}function fd(t){var e=of(t);function n(t,n){return[t*e,lf(n)/e]}n.invert=function(t,n){return[t/e,gf(n*e)]};return n}function ld(t,n){var e=lf(t),r=(e+lf(n))/2;if(ef(r)<Wc)return fd(t);var i=1+e*(2*r-e),a=pf(i)/r;function o(t,n){var e=pf(i-2*r*lf(n))/r;return[e*lf(t*=r),a-e*of(t)]}o.invert=function(t,n){var e=a-n;return[af(t,ef(e))/r*hf(e),gf((i-(t*t+e*e)*r*r)/(2*r))]};return o}function hd(){return cd(ld).scale(155.424).center([0,33.6442])}function pd(){return hd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dd(r){var i=r.length;return{point:function(t,n){var e=-1;while(++e<i)r[e].point(t,n)},sphere:function(){var t=-1;while(++t<i)r[t].sphere()},lineStart:function(){var t=-1;while(++t<i)r[t].lineStart()},lineEnd:function(){var t=-1;while(++t<i)r[t].lineEnd()},polygonStart:function(){var t=-1;while(++t<i)r[t].polygonStart()},polygonEnd:function(){var t=-1;while(++t<i)r[t].polygonEnd()}}}function vd(){var n,e,a=pd(),i,o=hd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u,s=hd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,r,f={point:function(t,n){r=[t,n]}};function l(t){var n=t[0],e=t[1];return r=null,(i.point(n,e),r)||(u.point(n,e),r)||(c.point(n,e),r)}l.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(t)};l.stream=function(t){return n&&e===t?n:n=dd([a.stream(e=t),o.stream(t),s.stream(t)])};l.precision=function(t){if(!arguments.length)return a.precision();a.precision(t),o.precision(t),s.precision(t);return h()};l.scale=function(t){if(!arguments.length)return a.scale();a.scale(t),o.scale(t*.35),s.scale(t);return l.translate(a.translate())};l.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),e=+t[0],r=+t[1];i=a.translate(t).clipExtent([[e-.455*n,r-.238*n],[e+.455*n,r+.238*n]]).stream(f);u=o.translate([e-.307*n,r+.201*n]).clipExtent([[e-.425*n+Wc,r+.12*n+Wc],[e-.214*n-Wc,r+.234*n-Wc]]).stream(f);c=s.translate([e-.205*n,r+.212*n]).clipExtent([[e-.214*n+Wc,r+.166*n+Wc],[e-.115*n-Wc,r+.234*n-Wc]]).stream(f);return h()};l.fitExtent=function(t,n){return $p(l,t,n)};l.fitSize=function(t,n){return Jp(l,t,n)};l.fitWidth=function(t,n){return Kp(l,t,n)};l.fitHeight=function(t,n){return Qp(l,t,n)};function h(){n=e=null;return l}return l.scale(1070)}function gd(a){return function(t,n){var e=of(t),r=of(n),i=a(e*r);return[i*r*lf(t),i*lf(n)]}}function yd(o){return function(t,n){var e=pf(t*t+n*n),r=o(e),i=lf(r),a=of(r);return[af(t*i,e*a),gf(e&&n*i/e)]}}var md=gd(function(t){return pf(2/(1+t))});md.invert=yd(function(t){return 2*gf(t/2)});function xd(){return ud(md).scale(124.75).clipAngle(180-.001)}var _d=gd(function(t){return(t=vf(t))&&t/lf(t)});_d.invert=yd(function(t){return t});function wd(){return ud(_d).scale(79.4188).clipAngle(180-.001)}function bd(t,n){return[t,cf(df((Jc+n)/2))]}bd.invert=function(t,n){return[t,2*rf(sf(n))-Jc]};function Md(){return kd(bd).scale(961/Qc)}function kd(e){var r=ud(e),n=r.center,i=r.scale,a=r.translate,o=r.clipExtent,u=null,s,c,f;r.scale=function(t){return arguments.length?(i(t),l()):i()};r.translate=function(t){return arguments.length?(a(t),l()):a()};r.center=function(t){return arguments.length?(n(t),l()):n()};r.clipExtent=function(t){return arguments.length?(t==null?u=s=c=f=null:(u=+t[0][0],s=+t[0][1],c=+t[1][0],f=+t[1][1]),l()):u==null?null:[[u,s],[c,f]]};function l(){var t=$c*i(),n=r(Zl(r.rotate()).invert([0,0]));return o(u==null?[[n[0]-t,n[1]-t],[n[0]+t,n[1]+t]]:e===bd?[[Math.max(n[0]-t,u),s],[Math.min(n[0]+t,c),f]]:[[u,Math.max(n[1]-t,s)],[c,Math.min(n[1]+t,f)]])}return l()}function Sd(t){return df((Jc+t)/2)}function Ad(t,n){var e=of(t),i=t===n?lf(t):cf(e/of(n))/cf(Sd(n)/Sd(t)),a=e*ff(Sd(t),i)/i;if(!i)return bd;function r(t,n){if(a>0){if(n<-Jc+Wc)n=-Jc+Wc}else{if(n>Jc-Wc)n=Jc-Wc}var e=a/ff(Sd(n),i);return[e*lf(i*t),a-e*of(i*t)]}r.invert=function(t,n){var e=a-n,r=hf(i)*pf(t*t+e*e);return[af(t,ef(e))/i*hf(e),2*rf(ff(a/r,1/i))-Jc]};return r}function Cd(){return cd(Ad).scale(109.5).parallels([30,30])}function Nd(t,n){return[t,n]}Nd.invert=Nd;function Td(){return ud(Nd).scale(152.63)}function Ed(t,n){var e=of(t),i=t===n?lf(t):(e-of(n))/(n-t),a=e/i+t;if(ef(i)<Wc)return Nd;function r(t,n){var e=a-n,r=i*t;return[e*lf(r),a-e*of(r)]}r.invert=function(t,n){var e=a-n;return[af(t,ef(e))/i*hf(e),a-hf(i)*pf(t*t+e*e)]};return r}function jd(){return cd(Ed).scale(131.154).center([0,13.9389])}function Od(t,n){var e=of(n),r=of(t)*e;return[e*lf(t)/r,lf(n)/r]}Od.invert=yd(rf);function Ld(){return ud(Od).scale(144.049).clipAngle(60)}function Id(e,r,i,a){return e===1&&r===1&&i===0&&a===0?Vh:Xp({point:function(t,n){this.stream.point(t*e+i,n*r+a)}})}function Pd(){var n=1,e=0,r=0,i=1,a=1,o=Vh,u=null,s,c,f,l=Vh,h,p,d;function v(){h=p=null;return d}return d={stream:function(t){return h&&p===t?h:h=o(l(p=t))},postclip:function(t){return arguments.length?(l=t,u=s=c=f=null,v()):l},clipExtent:function(t){return arguments.length?(l=t==null?(u=s=c=f=null,Vh):yh(u=+t[0][0],s=+t[0][1],c=+t[1][0],f=+t[1][1]),v()):u==null?null:[[u,s],[c,f]]},scale:function(t){return arguments.length?(o=Id((n=+t)*i,n*a,e,r),v()):n},translate:function(t){return arguments.length?(o=Id(n*i,n*a,e=+t[0],r=+t[1]),v()):[e,r]},reflectX:function(t){return arguments.length?(o=Id(n*(i=t?-1:1),n*a,e,r),v()):i<0},reflectY:function(t){return arguments.length?(o=Id(n*i,n*(a=t?-1:1),e,r),v()):a<0},fitExtent:function(t,n){return $p(d,t,n)},fitSize:function(t,n){return Jp(d,t,n)},fitWidth:function(t,n){return Kp(d,t,n)},fitHeight:function(t,n){return Qp(d,t,n)}}}function Rd(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),n*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}Rd.invert=function(t,n){var e=n,r=25,i;do{var a=e*e,o=a*a;e-=i=(e*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-n)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(ef(i)>Wc&&--r>0);return[t/(.8707+(a=e*e)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),e]};function Dd(){return ud(Rd).scale(175.295)}function zd(t,n){return[of(n)*lf(t),lf(n)]}zd.invert=yd(gf);function Fd(){return ud(zd).scale(249.5).clipAngle(90+Wc)}function Bd(t,n){var e=of(n),r=1+of(t)*e;return[e*lf(t)/r,lf(n)/r]}Bd.invert=yd(function(t){return 2*rf(t)});function qd(){return ud(Bd).scale(250).clipAngle(142)}function Ud(t,n){return[cf(df((Jc+n)/2)),-t]}Ud.invert=function(t,n){return[-n,2*rf(sf(t))-Jc]};function Hd(){var t=kd(Ud),n=t.center,e=t.rotate;t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])};t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])};return e([0,0,90]).scale(159.155)}function Yd(t,n){return t.parent===n.parent?1:2}function Gd(t){return t.reduce(Vd,0)/t.length}function Vd(t,n){return t+n.x}function Xd(t){return 1+t.reduce(Wd,0)}function Wd(t,n){return Math.max(t,n.y)}function Zd(t){var n;while(n=t.children)t=n[0];return t}function $d(t){var n;while(n=t.children)t=n[n.length-1];return t}function Jd(){var u=Yd,s=1,c=1,f=false;function n(n){var e,r=0;n.eachAfter(function(t){var n=t.children;if(n){t.x=Gd(n);t.y=Xd(n)}else{t.x=e?r+=u(t,e):0;t.y=0;e=t}});var t=Zd(n),i=$d(n),a=t.x-u(t,i)/2,o=i.x+u(i,t)/2;return n.eachAfter(f?function(t){t.x=(t.x-n.x)*s;t.y=(n.y-t.y)*c}:function(t){t.x=(t.x-a)/(o-a)*s;t.y=(1-(n.y?t.y/n.y:1))*c})}n.separation=function(t){return arguments.length?(u=t,n):u};n.size=function(t){return arguments.length?(f=false,s=+t[0],c=+t[1],n):f?null:[s,c]};n.nodeSize=function(t){return arguments.length?(f=true,s=+t[0],c=+t[1],n):f?[s,c]:null};return n}function Kd(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else while(--r>=0)n+=e[r].value;t.value=n}function Qd(){return this.eachAfter(Kd)}function tv(t){var n=this,e,r=[n],i,a,o;do{e=r.reverse(),r=[];while(n=e.pop()){t(n),i=n.children;if(i)for(a=0,o=i.length;a<o;++a){r.push(i[a])}}}while(r.length);return this}function nv(t){var n=this,e=[n],r,i;while(n=e.pop()){t(n),r=n.children;if(r)for(i=r.length-1;i>=0;--i){e.push(r[i])}}return this}function ev(t){var n=this,e=[n],r=[],i,a,o;while(n=e.pop()){r.push(n),i=n.children;if(i)for(a=0,o=i.length;a<o;++a){e.push(i[a])}}while(n=r.pop()){t(n)}return this}function rv(i){return this.eachAfter(function(t){var n=+i(t.data)||0,e=t.children,r=e&&e.length;while(--r>=0)n+=e[r].value;t.value=n})}function iv(n){return this.eachBefore(function(t){if(t.children){t.children.sort(n)}})}function av(t){var n=this,e=ov(n,t),r=[n];while(n!==e){n=n.parent;r.push(n)}var i=r.length;while(t!==e){r.splice(i,0,t);t=t.parent}return r}function ov(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop();n=r.pop();while(t===n){i=t;t=e.pop();n=r.pop()}return i}function uv(){var t=this,n=[t];while(t=t.parent){n.push(t)}return n}function sv(){var n=[];this.each(function(t){n.push(t)});return n}function cv(){var n=[];this.eachBefore(function(t){if(!t.children){n.push(t)}});return n}function fv(){var n=this,e=[];n.each(function(t){if(t!==n){e.push({source:t.parent,target:t})}});return e}function lv(t,n){var e=new gv(t),r=+t.value&&(e.value=t.value),i,a=[e],o,u,s,c;if(n==null)n=pv;while(i=a.pop()){if(r)i.value=+i.data.value;if((u=n(i.data))&&(c=u.length)){i.children=new Array(c);for(s=c-1;s>=0;--s){a.push(o=i.children[s]=new gv(u[s]));o.parent=i;o.depth=i.depth+1}}}return e.eachBefore(vv)}function hv(){return lv(this).eachBefore(dv)}function pv(t){return t.children}function dv(t){t.data=t.data.data}function vv(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function gv(t){this.data=t;this.depth=this.height=0;this.parent=null}gv.prototype=lv.prototype={constructor:gv,count:Qd,each:tv,eachAfter:ev,eachBefore:nv,sum:rv,sort:iv,path:av,ancestors:uv,descendants:sv,leaves:cv,links:fv,copy:hv};var yv=Array.prototype.slice;function mv(t){var n=t.length,e,r;while(n){r=Math.random()*n--|0;e=t[n];t[n]=t[r];t[r]=e}return t}function xv(t){var n=0,e=(t=mv(yv.call(t))).length,r=[],i,a;while(n<e){i=t[n];if(a&&bv(a,i))++n;else a=kv(r=_v(r,i)),n=0}return a}function _v(t,n){var e,r;if(Mv(n,t))return[n];for(e=0;e<t.length;++e){if(wv(n,t[e])&&Mv(Av(t[e],n),t)){return[t[e],n]}}for(e=0;e<t.length-1;++e){for(r=e+1;r<t.length;++r){if(wv(Av(t[e],t[r]),n)&&wv(Av(t[e],n),t[r])&&wv(Av(t[r],n),t[e])&&Mv(Cv(t[e],t[r],n),t)){return[t[e],t[r],n]}}}throw new Error}function wv(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function bv(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Mv(t,n){for(var e=0;e<n.length;++e){if(!bv(t,n[e])){return false}}return true}function kv(t){switch(t.length){case 1:return Sv(t[0]);case 2:return Av(t[0],t[1]);case 3:return Cv(t[0],t[1],t[2])}}function Sv(t){return{x:t.x,y:t.y,r:t.r}}function Av(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,u=n.r,s=a-e,c=o-r,f=u-i,l=Math.sqrt(s*s+c*c);return{x:(e+a+s/l*f)/2,y:(r+o+c/l*f)/2,r:(l+i+u)/2}}function Cv(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,u=n.y,s=n.r,c=e.x,f=e.y,l=e.r,h=r-o,p=r-c,d=i-u,v=i-f,g=s-a,y=l-a,m=r*r+i*i-a*a,x=m-o*o-u*u+s*s,_=m-c*c-f*f+l*l,w=p*d-h*v,b=(d*_-v*x)/(w*2)-r,M=(v*g-d*y)/w,k=(p*x-h*_)/(w*2)-i,S=(h*y-p*g)/w,A=M*M+S*S-1,C=2*(a+b*M+k*S),N=b*b+k*k-a*a,T=-(A?(C+Math.sqrt(C*C-4*A*N))/(2*A):N/C);return{x:r+b+M*T,y:i+k+S*T,r:T}}function Nv(t,n,e){var r=t.x,i=t.y,a=n.r+e.r,o=t.r+e.r,u=n.x-r,s=n.y-i,c=u*u+s*s;if(c){var f=.5+((o*=o)-(a*=a))/(2*c),l=Math.sqrt(Math.max(0,2*a*(o+c)-(o-=c)*o-a*a))/(2*c);e.x=r+f*u+l*s;e.y=i+f*s-l*u}else{e.x=r+o;e.y=i}}function Tv(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i-1e-6>e*e+r*r}function Ev(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function jv(t){this._=t;this.next=null;this.previous=null}function Ov(t){if(!(i=t.length))return 0;var n,e,r,i,a,o,u,s,c,f,l;n=t[0],n.x=0,n.y=0;if(!(i>1))return n.r;e=t[1],n.x=-e.r,e.x=n.r,e.y=0;if(!(i>2))return n.r+e.r;Nv(e,n,r=t[2]);n=new jv(n),e=new jv(e),r=new jv(r);n.next=r.previous=e;e.next=n.previous=r;r.next=e.previous=n;t:for(u=3;u<i;++u){Nv(n._,e._,r=t[u]),r=new jv(r);s=e.next,c=n.previous,f=e._.r,l=n._.r;do{if(f<=l){if(Tv(s._,r._)){e=s,n.next=e,e.previous=n,--u;continue t}f+=s._.r,s=s.next}else{if(Tv(c._,r._)){n=c,n.next=e,e.previous=n,--u;continue t}l+=c._.r,c=c.previous}}while(s!==c.next);r.previous=n,r.next=e,n.next=e.previous=e=r;a=Ev(n);while((r=r.next)!==e){if((o=Ev(r))<a){n=r,a=o}}e=n.next}n=[e._],r=e;while((r=r.next)!==e)n.push(r._);r=xv(n);for(u=0;u<i;++u)n=t[u],n.x-=r.x,n.y-=r.y;return r.r}function Lv(t){Ov(t);return t}function Iv(t){return t==null?null:Pv(t)}function Pv(t){if(typeof t!=="function")throw new Error;return t}function Rv(){return 0}function Dv(t){return function(){return t}}function zv(t){return Math.sqrt(t.value)}function Fv(){var n=null,e=1,r=1,i=Rv;function a(t){t.x=e/2,t.y=r/2;if(n){t.eachBefore(Bv(n)).eachAfter(qv(i,.5)).eachBefore(Uv(1))}else{t.eachBefore(Bv(zv)).eachAfter(qv(Rv,1)).eachAfter(qv(i,t.r/Math.min(e,r))).eachBefore(Uv(Math.min(e,r)/(2*t.r)))}return t}a.radius=function(t){return arguments.length?(n=Iv(t),a):n};a.size=function(t){return arguments.length?(e=+t[0],r=+t[1],a):[e,r]};a.padding=function(t){return arguments.length?(i=typeof t==="function"?t:Dv(+t),a):i};return a}function Bv(n){return function(t){if(!t.children){t.r=Math.max(0,+n(t)||0)}}}function qv(o,u){return function(t){if(n=t.children){var n,e,r=n.length,i=o(t)*u||0,a;if(i)for(e=0;e<r;++e)n[e].r+=i;a=Ov(n);if(i)for(e=0;e<r;++e)n[e].r-=i;t.r=a+i}}}function Uv(e){return function(t){var n=t.parent;t.r*=e;if(n){t.x=n.x+e*t.x;t.y=n.y+e*t.y}}}function Hv(t){t.x0=Math.round(t.x0);t.y0=Math.round(t.y0);t.x1=Math.round(t.x1);t.y1=Math.round(t.y1)}function Yv(t,n,e,r,i){var a=t.children,o,u=-1,s=a.length,c=t.value&&(r-n)/t.value;while(++u<s){o=a[u],o.y0=e,o.y1=i;o.x0=n,o.x1=n+=o.value*c}}function Gv(){var e=1,r=1,u=0,i=false;function n(t){var n=t.height+1;t.x0=t.y0=u;t.x1=e;t.y1=r/n;t.eachBefore(a(r,n));if(i)t.eachBefore(Hv);return t}function a(a,o){return function(t){if(t.children){Yv(t,t.x0,a*(t.depth+1)/o,t.x1,a*(t.depth+2)/o)}var n=t.x0,e=t.y0,r=t.x1-u,i=t.y1-u;if(r<n)n=r=(n+r)/2;if(i<e)e=i=(e+i)/2;t.x0=n;t.y0=e;t.x1=r;t.y1=i}}n.round=function(t){return arguments.length?(i=!!t,n):i};n.size=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]};n.padding=function(t){return arguments.length?(u=+t,n):u};return n}var Vv="$";var Xv={depth:-1};var Wv={};function Zv(t){return t.id}function $v(t){return t.parentId}function Jv(){var l=Zv,h=$v;function n(t){var n,e,r=t.length,i,a,o,u=new Array(r),s,c,f={};for(e=0;e<r;++e){n=t[e],o=u[e]=new gv(n);if((s=l(n,e,t))!=null&&(s+="")){c=Vv+(o.id=s);f[c]=c in f?Wv:o}}for(e=0;e<r;++e){o=u[e],s=h(t[e],e,t);if(s==null||!(s+="")){if(i)throw new Error("multiple roots");i=o}else{a=f[Vv+s];if(!a)throw new Error("missing: "+s);if(a===Wv)throw new Error("ambiguous: "+s);if(a.children)a.children.push(o);else a.children=[o];o.parent=a}}if(!i)throw new Error("no root");i.parent=Xv;i.eachBefore(function(t){t.depth=t.parent.depth+1;--r}).eachBefore(vv);i.parent=null;if(r>0)throw new Error("cycle");return i}n.id=function(t){return arguments.length?(l=Pv(t),n):l};n.parentId=function(t){return arguments.length?(h=Pv(t),n):h};return n}function Kv(t,n){return t.parent===n.parent?1:2}function Qv(t){var n=t.children;return n?n[0]:t.t}function tg(t){var n=t.children;return n?n[n.length-1]:t.t}function ng(t,n,e){var r=e/(n.i-t.i);n.c-=r;n.s+=e;t.c+=r;n.z+=e;n.m+=e}function eg(t){var n=0,e=0,r=t.children,i=r.length,a;while(--i>=0){a=r[i];a.z+=n;a.m+=n;n+=a.s+(e+=a.c)}}function rg(t,n,e){return t.a.parent===n.parent?t.a:e}function ig(t,n){this._=t;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=n}ig.prototype=Object.create(gv.prototype);function ag(t){var n=new ig(t,0),e,r=[n],i,a,o,u;while(e=r.pop()){if(a=e._.children){e.children=new Array(u=a.length);for(o=u-1;o>=0;--o){r.push(i=e.children[o]=new ig(a[o],o));i.parent=e}}}(n.parent=new ig(null,0)).children=[n];return n}function og(){var h=Kv,c=1,f=1,l=null;function n(t){var n=ag(t);n.eachAfter(p),n.parent.m=-n.z;n.eachBefore(d);if(l)t.eachBefore(v);else{var e=t,r=t,i=t;t.eachBefore(function(t){if(t.x<e.x)e=t;if(t.x>r.x)r=t;if(t.depth>i.depth)i=t});var a=e===r?1:h(e,r)/2,o=a-e.x,u=c/(r.x+a+o),s=f/(i.depth||1);t.eachBefore(function(t){t.x=(t.x+o)*u;t.y=t.depth*s})}return t}function p(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n){eg(t);var i=(n[0].z+n[n.length-1].z)/2;if(r){t.z=r.z+h(t._,r._);t.m=t.z-i}else{t.z=i}}else if(r){t.z=r.z+h(t._,r._)}t.parent.A=a(t,r,t.parent.A||e[0])}function d(t){t._.x=t.z+t.parent.m;t.m+=t.parent.m}function a(t,n,e){if(n){var r=t,i=t,a=n,o=r.parent.children[0],u=r.m,s=i.m,c=a.m,f=o.m,l;while(a=tg(a),r=Qv(r),a&&r){o=Qv(o);i=tg(i);i.a=t;l=a.z+c-r.z-u+h(a._,r._);if(l>0){ng(rg(a,t,e),t,l);u+=l;s+=l}c+=a.m;u+=r.m;f+=o.m;s+=i.m}if(a&&!tg(i)){i.t=a;i.m+=c-s}if(r&&!Qv(o)){o.t=r;o.m+=u-f;e=t}}return e}function v(t){t.x*=c;t.y=t.depth*f}n.separation=function(t){return arguments.length?(h=t,n):h};n.size=function(t){return arguments.length?(l=false,c=+t[0],f=+t[1],n):l?null:[c,f]};n.nodeSize=function(t){return arguments.length?(l=true,c=+t[0],f=+t[1],n):l?[c,f]:null};return n}function ug(t,n,e,r,i){var a=t.children,o,u=-1,s=a.length,c=t.value&&(i-e)/t.value;while(++u<s){o=a[u],o.x0=n,o.x1=r;o.y0=e,o.y1=e+=o.value*c}}var sg=(1+Math.sqrt(5))/2;function cg(t,n,e,r,i,a){var o=[],u=n.children,s,c,f=0,l=0,h=u.length,p,d,v=n.value,g,y,m,x,_,w,b;while(f<h){p=i-e,d=a-r;do{g=u[l++].value}while(!g&&l<h);y=m=g;w=Math.max(d/p,p/d)/(v*t);b=g*g*w;_=Math.max(m/b,b/y);for(;l<h;++l){g+=c=u[l].value;if(c<y)y=c;if(c>m)m=c;b=g*g*w;x=Math.max(m/b,b/y);if(x>_){g-=c;break}_=x}o.push(s={value:g,dice:p<d,children:u.slice(f,l)});if(s.dice)Yv(s,e,r,i,v?r+=d*g/v:a);else ug(s,e,r,v?e+=p*g/v:i,a);v-=g,f=l}return o}var fg=function n(a){function t(t,n,e,r,i){cg(a,t,n,e,r,i)}t.ratio=function(t){return n((t=+t)>1?t:1)};return t}(sg);function lg(){var o=fg,n=false,e=1,r=1,u=[0],s=Rv,c=Rv,f=Rv,l=Rv,h=Rv;function i(t){t.x0=t.y0=0;t.x1=e;t.y1=r;t.eachBefore(a);u=[0];if(n)t.eachBefore(Hv);return t}function a(t){var n=u[t.depth],e=t.x0+n,r=t.y0+n,i=t.x1-n,a=t.y1-n;if(i<e)e=i=(e+i)/2;if(a<r)r=a=(r+a)/2;t.x0=e;t.y0=r;t.x1=i;t.y1=a;if(t.children){n=u[t.depth+1]=s(t)/2;e+=h(t)-n;r+=c(t)-n;i-=f(t)-n;a-=l(t)-n;if(i<e)e=i=(e+i)/2;if(a<r)r=a=(r+a)/2;o(t,e,r,i,a)}}i.round=function(t){return arguments.length?(n=!!t,i):n};i.size=function(t){return arguments.length?(e=+t[0],r=+t[1],i):[e,r]};i.tile=function(t){return arguments.length?(o=Pv(t),i):o};i.padding=function(t){return arguments.length?i.paddingInner(t).paddingOuter(t):i.paddingInner()};i.paddingInner=function(t){return arguments.length?(s=typeof t==="function"?t:Dv(+t),i):s};i.paddingOuter=function(t){return arguments.length?i.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):i.paddingTop()};i.paddingTop=function(t){return arguments.length?(c=typeof t==="function"?t:Dv(+t),i):c};i.paddingRight=function(t){return arguments.length?(f=typeof t==="function"?t:Dv(+t),i):f};i.paddingBottom=function(t){return arguments.length?(l=typeof t==="function"?t:Dv(+t),i):l};i.paddingLeft=function(t){return arguments.length?(h=typeof t==="function"?t:Dv(+t),i):h};return i}function hg(t,n,e,r,i){var y=t.children,a,o=y.length,u,m=new Array(o+1);for(m[0]=u=a=0;a<o;++a){m[a+1]=u+=y[a].value}x(0,o,t.value,n,e,r,i);function x(t,n,e,r,i,a,o){if(t>=n-1){var u=y[t];u.x0=r,u.y0=i;u.x1=a,u.y1=o;return}var s=m[t],c=e/2+s,f=t+1,l=n-1;while(f<l){var h=f+l>>>1;if(m[h]<c)f=h+1;else l=h}if(c-m[f-1]<m[f]-c&&t+1<f)--f;var p=m[f]-s,d=e-p;if(a-r>o-i){var v=(r*d+a*p)/e;x(t,f,p,r,i,v,o);x(f,n,d,v,i,a,o)}else{var g=(i*d+o*p)/e;x(t,f,p,r,i,a,g);x(f,n,d,r,g,a,o)}}}function pg(t,n,e,r,i){(t.depth&1?ug:Yv)(t,n,e,r,i)}var dg=function n(p){function t(t,n,e,r,i){if((a=t._squarify)&&a.ratio===p){var a,o,u,s,c=-1,f,l=a.length,h=t.value;while(++c<l){o=a[c],u=o.children;for(s=o.value=0,f=u.length;s<f;++s)o.value+=u[s].value;if(o.dice)Yv(o,n,e,r,e+=(i-e)*o.value/h);else ug(o,n,e,n+=(r-n)*o.value/h,i);h-=o.value}}else{t._squarify=a=cg(p,t,n,e,r,i);a.ratio=p}}t.ratio=function(t){return n((t=+t)>1?t:1)};return t}(sg);function vg(t){var n=-1,e=t.length,r,i=t[e-1],a=0;while(++n<e){r=i;i=t[n];a+=r[1]*i[0]-r[0]*i[1]}return a/2}function gg(t){var n=-1,e=t.length,r=0,i=0,a,o=t[e-1],u,s=0;while(++n<e){a=o;o=t[n];s+=u=a[0]*o[1]-o[0]*a[1];r+=(a[0]+o[0])*u;i+=(a[1]+o[1])*u}return s*=3,[r/s,i/s]}function yg(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function mg(t,n){return t[0]-n[0]||t[1]-n[1]}function xg(t){var n=t.length,e=[0,1],r=2;for(var i=2;i<n;++i){while(r>1&&yg(t[e[r-2]],t[e[r-1]],t[i])<=0)--r;e[r++]=i}return e.slice(0,r)}function _g(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];r.sort(mg);for(n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var a=xg(r),o=xg(i);var u=o[0]===a[0],s=o[o.length-1]===a[a.length-1],c=[];for(n=a.length-1;n>=0;--n)c.push(t[r[a[n]][2]]);for(n=+u;n<o.length-s;++n)c.push(t[r[o[n]][2]]);return c}function wg(t,n){var e=t.length,r=t[e-1],i=n[0],a=n[1],o=r[0],u=r[1],s,c,f=false;for(var l=0;l<e;++l){r=t[l],s=r[0],c=r[1];if(c>a!==u>a&&i<(o-s)*(a-c)/(u-c)+s)f=!f;o=s,u=c}return f}function bg(t){var n=-1,e=t.length,r=t[e-1],i,a,o=r[0],u=r[1],s=0;while(++n<e){i=o;a=u;r=t[n];o=r[0];u=r[1];i-=o;a-=u;s+=Math.sqrt(i*i+a*a)}return s}var Mg=[].slice;var kg={};function Sg(t){this._size=t;this._call=this._error=null;this._tasks=[];this._data=[];this._waiting=this._active=this._ended=this._start=0}Sg.prototype=jg.prototype={constructor:Sg,defer:function(t){if(typeof t!=="function")throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(this._error!=null)return this;var n=Mg.call(arguments,1);n.push(t);++this._waiting,this._tasks.push(n);Ag(this);return this},abort:function(){if(this._error==null)Tg(this,new Error("abort"));return this},await:function(e){if(typeof e!=="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");this._call=function(t,n){e.apply(null,[t].concat(n))};Eg(this);return this},awaitAll:function(t){if(typeof t!=="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");this._call=t;Eg(this);return this}};function Ag(n){if(!n._start){try{Cg(n)}catch(t){if(n._tasks[n._ended+n._active-1])Tg(n,t);else if(!n._data)throw t}}}function Cg(t){while(t._start=t._waiting&&t._active<t._size){var n=t._ended+t._active,e=t._tasks[n],r=e.length-1,i=e[r];e[r]=Ng(t,n);--t._waiting,++t._active;e=i.apply(null,e);if(!t._tasks[n])continue;t._tasks[n]=e||kg}}function Ng(e,r){return function(t,n){if(!e._tasks[r])return;--e._active,++e._ended;e._tasks[r]=null;if(e._error!=null)return;if(t!=null){Tg(e,t)}else{e._data[r]=n;if(e._waiting)Ag(e);else Eg(e)}}}function Tg(t,n){var e=t._tasks.length,r;t._error=n;t._data=undefined;t._waiting=NaN;while(--e>=0){if(r=t._tasks[e]){t._tasks[e]=null;if(r.abort){try{r.abort()}catch(n){}}}}t._active=NaN;Eg(t)}function Eg(t){if(!t._active&&t._call){var n=t._data;t._data=undefined;t._call(t._error,n)}}function jg(t){if(t==null)t=Infinity;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Sg(t)}function Og(){return Math.random()}var Lg=function t(e){function n(t,n){t=t==null?0:+t;n=n==null?1:+n;if(arguments.length===1)n=t,t=0;else n-=t;return function(){return e()*n+t}}n.source=t;return n}(Og);var Ig=function t(a){function n(n,e){var r,i;n=n==null?0:+n;e=e==null?1:+e;return function(){var t;if(r!=null)t=r,r=null;else do{r=a()*2-1;t=a()*2-1;i=r*r+t*t}while(!i||i>1);return n+e*t*Math.sqrt(-2*Math.log(i)/i)}}n.source=t;return n}(Og);var Pg=function t(n){function e(){var t=Ig.source(n).apply(this,arguments);return function(){return Math.exp(t())}}e.source=t;return e}(Og);var Rg=function t(r){function n(e){return function(){for(var t=0,n=0;n<e;++n)t+=r();return t}}n.source=t;return n}(Og);var Dg=function t(e){function n(t){var n=Rg.source(e)(t);return function(){return n()/t}}n.source=t;return n}(Og);var zg=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}e.source=t;return e}(Og);function Fg(r,t){var i,a=ct("beforesend","progress","load","error"),o,u=us(),s=new XMLHttpRequest,c=null,f=null,l,h,p=0;if(typeof XDomainRequest!=="undefined"&&!("withCredentials"in s)&&/^(http(s)?:)?\/\//.test(r))s=new XDomainRequest;"onload"in s?s.onload=s.onerror=s.ontimeout=n:s.onreadystatechange=function(t){s.readyState>3&&n(t)};function n(t){var n=s.status,e;if(!n&&qg(s)||n>=200&&n<300||n===304){if(l){try{e=l.call(i,s)}catch(t){a.call("error",i,t);return}}else{e=s}a.call("load",i,e)}else{a.call("error",i,t)}}s.onprogress=function(t){a.call("progress",i,t)};i={header:function(t,n){t=(t+"").toLowerCase();if(arguments.length<2)return u.get(t);if(n==null)u.remove(t);else u.set(t,n+"");return i},mimeType:function(t){if(!arguments.length)return o;o=t==null?null:t+"";return i},responseType:function(t){if(!arguments.length)return h;h=t;return i},timeout:function(t){if(!arguments.length)return p;p=+t;return i},user:function(t){return arguments.length<1?c:(c=t==null?null:t+"",i)},password:function(t){return arguments.length<1?f:(f=t==null?null:t+"",i)},response:function(t){l=t;return i},get:function(t,n){return i.send("GET",t,n)},post:function(t,n){return i.send("POST",t,n)},send:function(t,n,e){s.open(t,r,true,c,f);if(o!=null&&!u.has("accept"))u.set("accept",o+",*/*");if(s.setRequestHeader)u.each(function(t,n){s.setRequestHeader(n,t)});if(o!=null&&s.overrideMimeType)s.overrideMimeType(o);if(h!=null)s.responseType=h;if(p>0)s.timeout=p;if(e==null&&typeof n==="function")e=n,n=null;if(e!=null&&e.length===1)e=Bg(e);if(e!=null)i.on("error",e).on("load",function(t){e(null,t)});a.call("beforesend",i,s);s.send(n==null?null:n);return i},abort:function(){s.abort();return i},on:function(){var t=a.on.apply(a,arguments);return t===a?i:t}};if(t!=null){if(typeof t!=="function")throw new Error("invalid callback: "+t);return i.get(t)}return i}function Bg(e){return function(t,n){e(t==null?n:null)}}function qg(t){var n=t.responseType;return n&&n!=="text"?t.response:t.responseText}function Ug(r,i){return function(t,n){var e=Fg(t).mimeType(r).response(i);if(n!=null){if(typeof n!=="function")throw new Error("invalid callback: "+n);return e.get(n)}return e}}var Hg=Ug("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)});var Yg=Ug("application/json",function(t){return JSON.parse(t.responseText)});var Gg=Ug("text/plain",function(t){return t.responseText});var Vg=Ug("application/xml",function(t){var n=t.responseXML;if(!n)throw new Error("parse error");return n});function Xg(i,a){return function(t,n,e){if(arguments.length<3)e=n,n=null;var r=Fg(t).mimeType(i);r.row=function(t){return arguments.length?r.response(Wg(a,n=t)):n};r.row(n);return e?r.get(e):r}}function Wg(n,e){return function(t){return n(t.responseText,e)}}var Zg=Xg("text/csv",Ts);var $g=Xg("text/tab-separated-values",Is);var Jg=Array.prototype;var Kg=Jg.map;var Qg=Jg.slice;var ty={name:"implicit"};function ny(r){var a=us(),o=[],i=ty;r=r==null?[]:Qg.call(r);function u(t){var n=t+"",e=a.get(n);if(!e){if(i!==ty)return i;a.set(n,e=o.push(t))}return r[(e-1)%r.length]}u.domain=function(t){if(!arguments.length)return o.slice();o=[],a=us();var n=-1,e=t.length,r,i;while(++n<e)if(!a.has(i=(r=t[n])+""))a.set(i,o.push(r));return u};u.range=function(t){return arguments.length?(r=Qg.call(t),u):r.slice()};u.unknown=function(t){return arguments.length?(i=t,u):i};u.copy=function(){return ny().domain(o).range(r).unknown(i)};return u}function ey(){var t=ny().unknown(undefined),a=t.domain,o=t.range,u=[0,1],s,c,f=false,l=0,h=0,p=.5;delete t.unknown;function n(){var t=a().length,n=u[1]<u[0],e=u[n-0],r=u[1-n];s=(r-e)/Math.max(1,t-l+h*2);if(f)s=Math.floor(s);e+=(r-e-s*(t-l))*p;c=s*(1-l);if(f)e=Math.round(e),c=Math.round(c);var i=S(t).map(function(t){return e+s*t});return o(n?i.reverse():i)}t.domain=function(t){return arguments.length?(a(t),n()):a()};t.range=function(t){return arguments.length?(u=[+t[0],+t[1]],n()):u.slice()};t.rangeRound=function(t){return u=[+t[0],+t[1]],f=true,n()};t.bandwidth=function(){return c};t.step=function(){return s};t.round=function(t){return arguments.length?(f=!!t,n()):f};t.padding=function(t){return arguments.length?(l=h=Math.max(0,Math.min(1,t)),n()):l};t.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),n()):l};t.paddingOuter=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),n()):h};t.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),n()):p};t.copy=function(){return ey().domain(a()).range(u).round(f).paddingInner(l).paddingOuter(h).align(p)};return n()}function ry(t){var n=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return ry(n())};return t}function iy(){return ry(ey().paddingInner(1))}function ay(t){return function(){return t}}function oy(t){return+t}var uy=[0,1];function sy(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:ay(e)}function cy(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}function fy(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}function ly(t,n,e,r){var i=t[0],a=t[1],o=n[0],u=n[1];if(a<i)i=e(a,i),o=r(u,o);else i=e(i,a),o=r(o,u);return function(t){return o(i(t))}}function hy(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),u=-1;if(e[i]<e[0]){e=e.slice().reverse();t=t.slice().reverse()}while(++u<i){a[u]=n(e[u],e[u+1]);o[u]=r(t[u],t[u+1])}return function(t){var n=v(e,t,1,i)-1;return o[n](a[n](t))}}function py(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function dy(n,e){var r=uy,i=uy,a=ni,o=false,u,s,c;function f(){u=Math.min(r.length,i.length)>2?hy:ly;s=c=null;return t}function t(t){return(s||(s=u(r,i,o?cy(n):n,a)))(+t)}t.invert=function(t){return(c||(c=u(i,r,sy,o?fy(e):e)))(+t)};t.domain=function(t){return arguments.length?(r=Kg.call(t,oy),f()):r.slice()};t.range=function(t){return arguments.length?(i=Qg.call(t),f()):i.slice()};t.rangeRound=function(t){return i=Qg.call(t),a=ei,f()};t.clamp=function(t){return arguments.length?(o=!!t,f()):o};t.interpolate=function(t){return arguments.length?(a=t,f()):a};return f()}function vy(t,n,e){var r=t[0],i=t[t.length-1],a=A(r,i,n==null?10:n),o;e=Ic(e==null?",f":e);switch(e.type){case"s":{var u=Math.max(Math.abs(r),Math.abs(i));if(e.precision==null&&!isNaN(o=Uc(a,u)))e.precision=o;return U.formatPrefix(e,u)}case"":case"e":case"g":case"p":case"r":{if(e.precision==null&&!isNaN(o=Hc(a,Math.max(Math.abs(r),Math.abs(i)))))e.precision=o-(e.type==="e");break}case"f":case"%":{if(e.precision==null&&!isNaN(o=qc(a)))e.precision=o-(e.type==="%")*2;break}}return U.format(e)}function gy(u){var s=u.domain;u.ticks=function(t){var n=s();return b(n[0],n[n.length-1],t==null?10:t)};u.tickFormat=function(t,n){return vy(s(),t,n)};u.nice=function(t){if(t==null)t=10;var n=s(),e=0,r=n.length-1,i=n[e],a=n[r],o;if(a<i){o=i,i=a,a=o;o=e,e=r,r=o}o=M(i,a,t);if(o>0){i=Math.floor(i/o)*o;a=Math.ceil(a/o)*o;o=M(i,a,t)}else if(o<0){i=Math.ceil(i*o)/o;a=Math.floor(a*o)/o;o=M(i,a,t)}if(o>0){n[e]=Math.floor(i/o)*o;n[r]=Math.ceil(a/o)*o;s(n)}else if(o<0){n[e]=Math.ceil(i*o)/o;n[r]=Math.floor(a*o)/o;s(n)}return u};return u}function yy(){var t=dy(sy,Wr);t.copy=function(){return py(t,yy())};return gy(t)}function my(){var n=[0,1];function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=Kg.call(t,oy),e):n.slice()};e.copy=function(){return my().domain(n)};return gy(e)}function xy(t,n){t=t.slice();var e=0,r=t.length-1,i=t[e],a=t[r],o;if(a<i){o=e,e=r,r=o;o=i,i=a,a=o}t[e]=n.floor(i);t[r]=n.ceil(a);return t}function _y(n,e){return(e=Math.log(e/n))?function(t){return Math.log(t/n)/e}:ay(e)}function wy(n,e){return n<0?function(t){return-Math.pow(-e,t)*Math.pow(-n,1-t)}:function(t){return Math.pow(e,t)*Math.pow(n,1-t)}}function by(t){return isFinite(t)?+("1e"+t):t<0?0:t}function My(n){return n===10?by:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function ky(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function Sy(n){return function(t){return-n(-t)}}function Ay(){var n=dy(_y,wy).domain([1,10]),h=n.domain,p=10,d=ky(10),v=My(10);function e(){d=ky(p),v=My(p);if(h()[0]<0)d=Sy(d),v=Sy(v);return n}n.base=function(t){return arguments.length?(p=+t,e()):p};n.domain=function(t){return arguments.length?(h(t),e()):h()};n.ticks=function(t){var n=h(),e=n[0],r=n[n.length-1],i;if(i=r<e)a=e,e=r,r=a;var a=d(e),o=d(r),u,s,c,f=t==null?10:+t,l=[];if(!(p%1)&&o-a<f){a=Math.round(a)-1,o=Math.round(o)+1;if(e>0)for(;a<o;++a){for(s=1,u=v(a);s<p;++s){c=u*s;if(c<e)continue;if(c>r)break;l.push(c)}}else for(;a<o;++a){for(s=p-1,u=v(a);s>=1;--s){c=u*s;if(c<e)continue;if(c>r)break;l.push(c)}}}else{l=b(a,o,Math.min(o-a,f)).map(v)}return i?l.reverse():l};n.tickFormat=function(t,e){if(e==null)e=p===10?".0e":",";if(typeof e!=="function")e=U.format(e);if(t===Infinity)return e;if(t==null)t=10;var r=Math.max(1,p*t/n.ticks().length);return function(t){var n=t/v(Math.round(d(t)));if(n*p<p-.5)n*=p;return n<=r?e(t):""}};n.nice=function(){return h(xy(h(),{floor:function(t){return v(Math.floor(d(t)))},ceil:function(t){return v(Math.ceil(d(t)))}}))};n.copy=function(){return py(n,Ay().base(p))};return n}function Cy(t,n){return t<0?-Math.pow(-t,n):Math.pow(t,n)}function Ny(){var r=1,t=dy(e,i),n=t.domain;function e(n,e){return(e=Cy(e,r)-(n=Cy(n,r)))?function(t){return(Cy(t,r)-n)/e}:ay(e)}function i(n,e){e=Cy(e,r)-(n=Cy(n,r));return function(t){return Cy(n+e*t,1/r)}}t.exponent=function(t){return arguments.length?(r=+t,n(n())):r};t.copy=function(){return py(t,Ny().exponent(r))};return gy(t)}function Ty(){return Ny().exponent(.5)}function Ey(){var i=[],e=[],r=[];function a(){var t=0,n=Math.max(1,e.length);r=new Array(n-1);while(++t<n)r[t-1]=T(i,t/n);return o}function o(t){if(!isNaN(t=+t))return e[v(r,t)]}o.invertExtent=function(t){var n=e.indexOf(t);return n<0?[NaN,NaN]:[n>0?r[n-1]:i[0],n<r.length?r[n]:i[i.length-1]]};o.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var n=0,e=t.length,r;n<e;++n)if(r=t[n],r!=null&&!isNaN(r=+r))i.push(r);i.sort(u);return a()};o.range=function(t){return arguments.length?(e=Qg.call(t),a()):e.slice()};o.quantiles=function(){return r.slice()};o.copy=function(){return Ey().domain(i).range(e)};return o}function jy(){var e=0,r=1,i=1,a=[.5],o=[0,1];function n(t){if(t<=t)return o[v(a,t,0,i)]}function u(){var t=-1;a=new Array(i);while(++t<i)a[t]=((t+1)*r-(t-i)*e)/(i+1);return n}n.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],u()):[e,r]};n.range=function(t){return arguments.length?(i=(o=Qg.call(t)).length-1,u()):o.slice()};n.invertExtent=function(t){var n=o.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,a[0]]:n>=i?[a[i-1],r]:[a[n-1],a[n]]};n.copy=function(){return jy().domain([e,r]).range(o)};return gy(n)}function Oy(){var e=[.5],r=[0,1],n=1;function i(t){if(t<=t)return r[v(e,t,0,n)]}i.domain=function(t){return arguments.length?(e=Qg.call(t),n=Math.min(e.length,r.length-1),i):e.slice()};i.range=function(t){return arguments.length?(r=Qg.call(t),n=Math.min(e.length,r.length-1),i):r.slice()};i.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]};i.copy=function(){return Oy().domain(e).range(r)};return i}var Ly=new Date;var Iy=new Date;function Py(a,o,e,r){function u(t){return a(t=new Date(+t)),t}u.floor=u;u.ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t};u.round=function(t){var n=u(t),e=u.ceil(t);return t-n<e-t?n:e};u.offset=function(t,n){return o(t=new Date(+t),n==null?1:Math.floor(n)),t};u.range=function(t,n,e){var r=[],i;t=u.ceil(t);e=e==null?1:Math.floor(e);if(!(t<n)||!(e>0))return r;do{r.push(i=new Date(+t)),o(t,e),a(t)}while(i<t&&t<n);return r};u.filter=function(e){return Py(function(t){if(t>=t)while(a(t),!e(t))t.setTime(t-1)},function(t,n){if(t>=t){if(n<0)while(++n<=0){while(o(t,-1),!e(t)){}}else while(--n>=0){while(o(t,+1),!e(t)){}}}})};if(e){u.count=function(t,n){Ly.setTime(+t),Iy.setTime(+n);a(Ly),a(Iy);return Math.floor(e(Ly,Iy))};u.every=function(n){n=Math.floor(n);return!isFinite(n)||!(n>0)?null:!(n>1)?u:u.filter(r?function(t){return r(t)%n===0}:function(t){return u.count(0,t)%n===0})}}return u}var Ry=Py(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Ry.every=function(e){e=Math.floor(e);if(!isFinite(e)||!(e>0))return null;if(!(e>1))return Ry;return Py(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e})};var Dy=Ry.range;var zy=1e3;var Fy=6e4;var By=36e5;var qy=864e5;var Uy=6048e5;var Hy=Py(function(t){t.setTime(Math.floor(t/zy)*zy)},function(t,n){t.setTime(+t+n*zy)},function(t,n){return(n-t)/zy},function(t){return t.getUTCSeconds()});var Yy=Hy.range;var Gy=Py(function(t){t.setTime(Math.floor(t/Fy)*Fy)},function(t,n){t.setTime(+t+n*Fy)},function(t,n){return(n-t)/Fy},function(t){return t.getMinutes()});var Vy=Gy.range;var Xy=Py(function(t){var n=t.getTimezoneOffset()*Fy%By;if(n<0)n+=By;t.setTime(Math.floor((+t-n)/By)*By+n)},function(t,n){t.setTime(+t+n*By)},function(t,n){return(n-t)/By},function(t){return t.getHours()});var Wy=Xy.range;var Zy=Py(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Fy)/qy},function(t){return t.getDate()-1});var $y=Zy.range;function Jy(n){return Py(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7);t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Fy)/Uy})}var Ky=Jy(0);var Qy=Jy(1);var tm=Jy(2);var nm=Jy(3);var em=Jy(4);var rm=Jy(5);var im=Jy(6);var am=Ky.range;var om=Qy.range;var um=tm.range;var sm=nm.range;var cm=em.range;var fm=rm.range;var lm=im.range;var hm=Py(function(t){t.setDate(1);t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});var pm=hm.range;var dm=Py(function(t){t.setMonth(0,1);t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});dm.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Py(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e);t.setMonth(0,1);t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var vm=dm.range;var gm=Py(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Fy)},function(t,n){return(n-t)/Fy},function(t){return t.getUTCMinutes()});var ym=gm.range;var mm=Py(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*By)},function(t,n){return(n-t)/By},function(t){return t.getUTCHours()});var xm=mm.range;var _m=Py(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/qy},function(t){return t.getUTCDate()-1});var wm=_m.range;function bm(n){return Py(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7);t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/Uy})}var Mm=bm(0);var km=bm(1);var Sm=bm(2);var Am=bm(3);var Cm=bm(4);var Nm=bm(5);var Tm=bm(6);var Em=Mm.range;var jm=km.range;var Om=Sm.range;var Lm=Am.range;var Im=Cm.range;var Pm=Nm.range;var Rm=Tm.range;var Dm=Py(function(t){t.setUTCDate(1);t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});var zm=Dm.range;var Fm=Py(function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Fm.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Py(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e);t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var Bm=Fm.range;function qm(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);n.setFullYear(t.y);return n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Um(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));n.setUTCFullYear(t.y);return n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Hm(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Ym(t){var r=t.dateTime,i=t.date,a=t.time,n=t.periods,e=t.days,o=t.shortDays,u=t.months,s=t.shortMonths;var c=Jm(n),f=Km(n),l=Jm(e),h=Km(e),p=Jm(o),d=Km(o),v=Jm(u),g=Km(u),y=Jm(s),m=Km(s);var x={a:L,A:I,b:P,B:R,c:null,d:mx,e:mx,f:Mx,H:xx,I:_x,j:wx,L:bx,m:kx,M:Sx,p:D,Q:Qx,s:t_,S:Ax,u:Cx,U:Nx,V:Tx,w:Ex,W:jx,x:null,X:null,y:Ox,Y:Lx,Z:Ix,"%":Kx};var _={a:z,A:F,b:B,B:q,c:null,d:Px,e:Px,f:Bx,H:Rx,I:Dx,j:zx,L:Fx,m:qx,M:Ux,p:U,Q:Qx,s:t_,S:Hx,u:Yx,U:Gx,V:Vx,w:Xx,W:Wx,x:null,X:null,y:Zx,Y:$x,Z:Jx,"%":Kx};var w={a:A,A:C,b:N,B:T,c:E,d:sx,e:sx,f:dx,H:fx,I:fx,j:cx,L:px,m:ux,M:lx,p:S,Q:gx,s:yx,S:hx,u:tx,U:nx,V:ex,w:Qm,W:rx,x:j,X:O,y:ax,Y:ix,Z:ox,"%":vx};x.x=b(i,x);x.X=b(a,x);x.c=b(r,x);_.x=b(i,_);_.X=b(a,_);_.c=b(r,_);function b(s,c){return function(t){var n=[],e=-1,r=0,i=s.length,a,o,u;if(!(t instanceof Date))t=new Date(+t);while(++e<i){if(s.charCodeAt(e)===37){n.push(s.slice(r,e));if((o=Gm[a=s.charAt(++e)])!=null)a=s.charAt(++e);else o=a==="e"?" ":"0";if(u=c[a])a=u(t,o);n.push(a);r=e+1}}n.push(s.slice(r,e));return n.join("")}}function M(a,o){return function(t){var n=Hm(1900),e=k(n,a,t+="",0),r,i;if(e!=t.length)return null;if("Q"in n)return new Date(n.Q);if("p"in n)n.H=n.H%12+n.p*12;if("V"in n){if(n.V<1||n.V>53)return null;if(!("w"in n))n.w=1;if("Z"in n){r=Um(Hm(n.y)),i=r.getUTCDay();r=i>4||i===0?km.ceil(r):km(r);r=_m.offset(r,(n.V-1)*7);n.y=r.getUTCFullYear();n.m=r.getUTCMonth();n.d=r.getUTCDate()+(n.w+6)%7}else{r=o(Hm(n.y)),i=r.getDay();r=i>4||i===0?Qy.ceil(r):Qy(r);r=Zy.offset(r,(n.V-1)*7);n.y=r.getFullYear();n.m=r.getMonth();n.d=r.getDate()+(n.w+6)%7}}else if("W"in n||"U"in n){if(!("w"in n))n.w="u"in n?n.u%7:"W"in n?1:0;i="Z"in n?Um(Hm(n.y)).getUTCDay():o(Hm(n.y)).getDay();n.m=0;n.d="W"in n?(n.w+6)%7+n.W*7-(i+5)%7:n.w+n.U*7-(i+6)%7}if("Z"in n){n.H+=n.Z/100|0;n.M+=n.Z%100;return Um(n)}return o(n)}}function k(t,n,e,r){var i=0,a=n.length,o=e.length,u,s;while(i<a){if(r>=o)return-1;u=n.charCodeAt(i++);if(u===37){u=n.charAt(i++);s=w[u in Gm?n.charAt(i++):u];if(!s||(r=s(t,e,r))<0)return-1}else if(u!=e.charCodeAt(r++)){return-1}}return r}function S(t,n,e){var r=c.exec(n.slice(e));return r?(t.p=f[r[0].toLowerCase()],e+r[0].length):-1}function A(t,n,e){var r=p.exec(n.slice(e));return r?(t.w=d[r[0].toLowerCase()],e+r[0].length):-1}function C(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1}function N(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1}function T(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g[r[0].toLowerCase()],e+r[0].length):-1}function E(t,n,e){return k(t,r,n,e)}function j(t,n,e){return k(t,i,n,e)}function O(t,n,e){return k(t,a,n,e)}function L(t){return o[t.getDay()]}function I(t){return e[t.getDay()]}function P(t){return s[t.getMonth()]}function R(t){return u[t.getMonth()]}function D(t){return n[+(t.getHours()>=12)]}function z(t){return o[t.getUTCDay()]}function F(t){return e[t.getUTCDay()]}function B(t){return s[t.getUTCMonth()]}function q(t){return u[t.getUTCMonth()]}function U(t){return n[+(t.getUTCHours()>=12)]}return{format:function(t){var n=b(t+="",x);n.toString=function(){return t};return n},parse:function(t){var n=M(t+="",qm);n.toString=function(){return t};return n},utcFormat:function(t){var n=b(t+="",_);n.toString=function(){return t};return n},utcParse:function(t){var n=M(t,Um);n.toString=function(){return t};return n}}}var Gm={"-":"",_:" ",0:"0"};var Vm=/^\s*\d+/;var Xm=/^%/;var Wm=/[\\^$*+?|[\]().{}]/g;function Zm(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function $m(t){return t.replace(Wm,"\\$&")}function Jm(t){return new RegExp("^(?:"+t.map($m).join("|")+")","i")}function Km(t){var n={},e=-1,r=t.length;while(++e<r)n[t[e].toLowerCase()]=e;return n}function Qm(t,n,e){var r=Vm.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function tx(t,n,e){var r=Vm.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function nx(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function ex(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function rx(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function ix(t,n,e){var r=Vm.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function ax(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function ox(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function ux(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function sx(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function cx(t,n,e){var r=Vm.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function fx(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function lx(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function hx(t,n,e){var r=Vm.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function px(t,n,e){var r=Vm.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function dx(t,n,e){var r=Vm.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function vx(t,n,e){var r=Xm.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function gx(t,n,e){var r=Vm.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function yx(t,n,e){var r=Vm.exec(n.slice(e));return r?(t.Q=+r[0]*1e3,e+r[0].length):-1}function mx(t,n){return Zm(t.getDate(),n,2)}function xx(t,n){return Zm(t.getHours(),n,2)}function _x(t,n){return Zm(t.getHours()%12||12,n,2)}function wx(t,n){return Zm(1+Zy.count(dm(t),t),n,3)}function bx(t,n){return Zm(t.getMilliseconds(),n,3)}function Mx(t,n){return bx(t,n)+"000"}function kx(t,n){return Zm(t.getMonth()+1,n,2)}function Sx(t,n){return Zm(t.getMinutes(),n,2)}function Ax(t,n){return Zm(t.getSeconds(),n,2)}function Cx(t){var n=t.getDay();return n===0?7:n}function Nx(t,n){return Zm(Ky.count(dm(t),t),n,2)}function Tx(t,n){var e=t.getDay();t=e>=4||e===0?em(t):em.ceil(t);return Zm(em.count(dm(t),t)+(dm(t).getDay()===4),n,2)}function Ex(t){return t.getDay()}function jx(t,n){return Zm(Qy.count(dm(t),t),n,2)}function Ox(t,n){return Zm(t.getFullYear()%100,n,2)}function Lx(t,n){return Zm(t.getFullYear()%1e4,n,4)}function Ix(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Zm(n/60|0,"0",2)+Zm(n%60,"0",2)}function Px(t,n){return Zm(t.getUTCDate(),n,2)}function Rx(t,n){return Zm(t.getUTCHours(),n,2)}function Dx(t,n){return Zm(t.getUTCHours()%12||12,n,2)}function zx(t,n){return Zm(1+_m.count(Fm(t),t),n,3)}function Fx(t,n){return Zm(t.getUTCMilliseconds(),n,3)}function Bx(t,n){return Fx(t,n)+"000"}function qx(t,n){return Zm(t.getUTCMonth()+1,n,2)}function Ux(t,n){return Zm(t.getUTCMinutes(),n,2)}function Hx(t,n){return Zm(t.getUTCSeconds(),n,2)}function Yx(t){var n=t.getUTCDay();return n===0?7:n}function Gx(t,n){return Zm(Mm.count(Fm(t),t),n,2)}function Vx(t,n){var e=t.getUTCDay();t=e>=4||e===0?Cm(t):Cm.ceil(t);return Zm(Cm.count(Fm(t),t)+(Fm(t).getUTCDay()===4),n,2)}function Xx(t){return t.getUTCDay()}function Wx(t,n){return Zm(km.count(Fm(t),t),n,2)}function Zx(t,n){return Zm(t.getUTCFullYear()%100,n,2)}function $x(t,n){return Zm(t.getUTCFullYear()%1e4,n,4)}function Jx(){return"+0000"}function Kx(){return"%"}function Qx(t){return+t}function t_(t){return Math.floor(+t/1e3)}var n_;e_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e_(t){n_=Ym(t);U.timeFormat=n_.format;U.timeParse=n_.parse;U.utcFormat=n_.utcFormat;U.utcParse=n_.utcParse;return n_}var r_="%Y-%m-%dT%H:%M:%S.%LZ";function i_(t){return t.toISOString()}var a_=Date.prototype.toISOString?i_:U.utcFormat(r_);function o_(t){var n=new Date(t);return isNaN(n)?null:n}var u_=+new Date("2000-01-01T00:00:00.000Z")?o_:U.utcParse(r_);var s_=1e3;var c_=s_*60;var f_=c_*60;var l_=f_*24;var h_=l_*7;var p_=l_*30;var d_=l_*365;function v_(t){return new Date(t)}function g_(t){return t instanceof Date?+t:+new Date(+t)}function y_(o,n,e,r,i,a,u,s,c){var f=dy(sy,Wr),l=f.invert,h=f.domain;var p=c(".%L"),d=c(":%S"),v=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),m=c("%b %d"),x=c("%B"),_=c("%Y");var w=[[u,1,s_],[u,5,5*s_],[u,15,15*s_],[u,30,30*s_],[a,1,c_],[a,5,5*c_],[a,15,15*c_],[a,30,30*c_],[i,1,f_],[i,3,3*f_],[i,6,6*f_],[i,12,12*f_],[r,1,l_],[r,2,2*l_],[e,1,h_],[n,1,p_],[n,3,3*p_],[o,1,d_]];function b(t){return(u(t)<t?p:a(t)<t?d:i(t)<t?v:r(t)<t?g:n(t)<t?e(t)<t?y:m:o(t)<t?x:_)(t)}function M(t,n,e,r){if(t==null)t=10;if(typeof t==="number"){var i=Math.abs(e-n)/t,a=k(function(t){return t[2]}).right(w,i);if(a===w.length){r=A(n/d_,e/d_,t);t=o}else if(a){a=w[i/w[a-1][2]<w[a][2]/i?a-1:a];r=a[1];t=a[0]}else{r=Math.max(A(n,e,t),1);t=s}}return r==null?t:t.every(r)}f.invert=function(t){return new Date(l(t))};f.domain=function(t){return arguments.length?h(Kg.call(t,g_)):h().map(v_)};f.ticks=function(t,n){var e=h(),r=e[0],i=e[e.length-1],a=i<r,o;if(a)o=r,r=i,i=o;o=M(t,r,i,n);o=o?o.range(r,i+1):[];return a?o.reverse():o};f.tickFormat=function(t,n){return n==null?b:c(n)};f.nice=function(t,n){var e=h();return(t=M(t,e[0],e[e.length-1],n))?h(xy(e,t)):f};f.copy=function(){return py(f,y_(o,n,e,r,i,a,u,s,c))};return f}function m_(){return y_(dm,hm,Ky,Zy,Xy,Gy,Hy,Ry,U.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function x_(){return y_(Fm,Dm,Mm,_m,mm,gm,Hy,Ry,U.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function __(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}var w_=__("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var b_=__("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var M_=__("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var k_=__("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var S_=Oi(jr(300,.5,0),jr(-240,.5,1));var A_=Oi(jr(-100,.75,.35),jr(80,1.5,.8));var C_=Oi(jr(260,.75,.35),jr(80,1.5,.8));var N_=jr();function T_(t){if(t<0||t>1)t-=Math.floor(t);var n=Math.abs(t-.5);N_.h=360*t-100;N_.s=1.5-1.5*n;N_.l=.8-.9*n;return N_+""}function E_(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}var j_=E_(__("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var O_=E_(__("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var L_=E_(__("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var I_=E_(__("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function P_(e){var r=0,i=1,a=false;function n(t){var n=(t-r)/(i-r);return e(a?Math.max(0,Math.min(1,n)):n)}n.domain=function(t){return arguments.length?(r=+t[0],i=+t[1],n):[r,i]};n.clamp=function(t){return arguments.length?(a=!!t,n):a};n.interpolator=function(t){return arguments.length?(e=t,n):e};n.copy=function(){return P_(e).domain([r,i]).clamp(a)};return gy(n)}function R_(n){return function t(){return n}}var D_=Math.abs;var z_=Math.atan2;var F_=Math.cos;var B_=Math.max;var q_=Math.min;var U_=Math.sin;var H_=Math.sqrt;var Y_=1e-12;var G_=Math.PI;var V_=G_/2;var X_=2*G_;function W_(t){return t>1?0:t<-1?G_:Math.acos(t)}function Z_(t){return t>=1?V_:t<=-1?-V_:Math.asin(t)}function $_(t){return t.innerRadius}function J_(t){return t.outerRadius}function K_(t){return t.startAngle}function Q_(t){return t.endAngle}function tw(t){return t&&t.padAngle}function nw(t,n,e,r,i,a,o,u){var s=e-t,c=r-n,f=o-i,l=u-a,h=(f*(n-a)-l*(t-i))/(l*s-f*c);return[t+h*s,n+h*c]}function ew(t,n,e,r,i,a,o){var u=t-e,s=n-r,c=(o?a:-a)/H_(u*u+s*s),f=c*s,l=-c*u,h=t+f,p=n+l,d=e+f,v=r+l,g=(h+d)/2,y=(p+v)/2,m=d-h,x=v-p,_=m*m+x*x,w=i-a,b=h*v-d*p,M=(x<0?-1:1)*H_(B_(0,w*w*_-b*b)),k=(b*x-m*M)/_,S=(-b*m-x*M)/_,A=(b*x+m*M)/_,C=(-b*m+x*M)/_,N=k-g,T=S-y,E=A-g,j=C-y;if(N*N+T*T>E*E+j*j)k=A,S=C;return{cx:k,cy:S,x01:-f,y01:-l,x11:k*(i/w-1),y11:S*(i/w-1)}}function rw(){var z=$_,F=J_,B=R_(0),q=null,U=K_,H=Q_,Y=tw,G=null;function n(){var t,n,e=+z.apply(this,arguments),r=+F.apply(this,arguments),i=U.apply(this,arguments)-V_,a=H.apply(this,arguments)-V_,o=D_(a-i),u=a>i;if(!G)G=t=Ku();if(r<e)n=r,r=e,e=n;if(!(r>Y_))G.moveTo(0,0);else if(o>X_-Y_){G.moveTo(r*F_(i),r*U_(i));G.arc(0,0,r,i,a,!u);if(e>Y_){G.moveTo(e*F_(a),e*U_(a));G.arc(0,0,e,a,i,u)}}else{var s=i,c=a,f=i,l=a,h=o,p=o,d=Y.apply(this,arguments)/2,v=d>Y_&&(q?+q.apply(this,arguments):H_(e*e+r*r)),g=q_(D_(r-e)/2,+B.apply(this,arguments)),y=g,m=g,x,_;if(v>Y_){var w=Z_(v/e*U_(d)),b=Z_(v/r*U_(d));if((h-=w*2)>Y_)w*=u?1:-1,f+=w,l-=w;else h=0,f=l=(i+a)/2;if((p-=b*2)>Y_)b*=u?1:-1,s+=b,c-=b;else p=0,s=c=(i+a)/2}var M=r*F_(s),k=r*U_(s),S=e*F_(l),A=e*U_(l);if(g>Y_){var C=r*F_(c),N=r*U_(c),T=e*F_(f),E=e*U_(f);if(o<G_){var j=h>Y_?nw(M,k,T,E,C,N,S,A):[S,A],O=M-j[0],L=k-j[1],I=C-j[0],P=N-j[1],R=1/U_(W_((O*I+L*P)/(H_(O*O+L*L)*H_(I*I+P*P)))/2),D=H_(j[0]*j[0]+j[1]*j[1]);y=q_(g,(e-D)/(R-1));m=q_(g,(r-D)/(R+1))}}if(!(p>Y_))G.moveTo(M,k);else if(m>Y_){x=ew(T,E,M,k,r,m,u);_=ew(C,N,S,A,r,m,u);G.moveTo(x.cx+x.x01,x.cy+x.y01);if(m<g)G.arc(x.cx,x.cy,m,z_(x.y01,x.x01),z_(_.y01,_.x01),!u);else{G.arc(x.cx,x.cy,m,z_(x.y01,x.x01),z_(x.y11,x.x11),!u);G.arc(0,0,r,z_(x.cy+x.y11,x.cx+x.x11),z_(_.cy+_.y11,_.cx+_.x11),!u);G.arc(_.cx,_.cy,m,z_(_.y11,_.x11),z_(_.y01,_.x01),!u)}}else G.moveTo(M,k),G.arc(0,0,r,s,c,!u);if(!(e>Y_)||!(h>Y_))G.lineTo(S,A);else if(y>Y_){x=ew(S,A,C,N,e,-y,u);_=ew(M,k,T,E,e,-y,u);G.lineTo(x.cx+x.x01,x.cy+x.y01);if(y<g)G.arc(x.cx,x.cy,y,z_(x.y01,x.x01),z_(_.y01,_.x01),!u);else{G.arc(x.cx,x.cy,y,z_(x.y01,x.x01),z_(x.y11,x.x11),!u);G.arc(0,0,e,z_(x.cy+x.y11,x.cx+x.x11),z_(_.cy+_.y11,_.cx+_.x11),u);G.arc(_.cx,_.cy,y,z_(_.y11,_.x11),z_(_.y01,_.x01),!u)}}else G.arc(0,0,e,l,f,u)}G.closePath();if(t)return G=null,t+""||null}n.centroid=function(){var t=(+z.apply(this,arguments)+ +F.apply(this,arguments))/2,n=(+U.apply(this,arguments)+ +H.apply(this,arguments))/2-G_/2;return[F_(n)*t,U_(n)*t]};n.innerRadius=function(t){return arguments.length?(z=typeof t==="function"?t:R_(+t),n):z};n.outerRadius=function(t){return arguments.length?(F=typeof t==="function"?t:R_(+t),n):F};n.cornerRadius=function(t){return arguments.length?(B=typeof t==="function"?t:R_(+t),n):B};n.padRadius=function(t){return arguments.length?(q=t==null?null:typeof t==="function"?t:R_(+t),n):q};n.startAngle=function(t){return arguments.length?(U=typeof t==="function"?t:R_(+t),n):U};n.endAngle=function(t){return arguments.length?(H=typeof t==="function"?t:R_(+t),n):H};n.padAngle=function(t){return arguments.length?(Y=typeof t==="function"?t:R_(+t),n):Y};n.context=function(t){return arguments.length?(G=t==null?null:t,n):G};return n}function iw(t){this._context=t}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function aw(t){return new iw(t)}function ow(t){return t[0]}function uw(t){return t[1]}function sw(){var o=ow,u=uw,s=R_(true),c=null,f=aw,l=null;function n(t){var n,e=t.length,r,i=false,a;if(c==null)l=f(a=Ku());for(n=0;n<=e;++n){if(!(n<e&&s(r=t[n],n,t))===i){if(i=!i)l.lineStart();else l.lineEnd()}if(i)l.point(+o(r,n,t),+u(r,n,t))}if(a)return l=null,a+""||null}n.x=function(t){return arguments.length?(o=typeof t==="function"?t:R_(+t),n):o};n.y=function(t){return arguments.length?(u=typeof t==="function"?t:R_(+t),n):u};n.defined=function(t){return arguments.length?(s=typeof t==="function"?t:R_(!!t),n):s};n.curve=function(t){return arguments.length?(f=t,c!=null&&(l=f(c)),n):f};n.context=function(t){return arguments.length?(t==null?c=l=null:l=f(c=t),n):c};return n}function cw(){var f=ow,l=null,h=R_(0),p=uw,d=R_(true),v=null,g=aw,y=null;function n(t){var n,e,r,i=t.length,a,o=false,u,s=new Array(i),c=new Array(i);if(v==null)y=g(u=Ku());for(n=0;n<=i;++n){if(!(n<i&&d(a=t[n],n,t))===o){if(o=!o){e=n;y.areaStart();y.lineStart()}else{y.lineEnd();y.lineStart();for(r=n-1;r>=e;--r){y.point(s[r],c[r])}y.lineEnd();y.areaEnd()}}if(o){s[n]=+f(a,n,t),c[n]=+h(a,n,t);y.point(l?+l(a,n,t):s[n],p?+p(a,n,t):c[n])}}if(u)return y=null,u+""||null}function t(){return sw().defined(d).curve(g).context(v)}n.x=function(t){return arguments.length?(f=typeof t==="function"?t:R_(+t),l=null,n):f};n.x0=function(t){return arguments.length?(f=typeof t==="function"?t:R_(+t),n):f};n.x1=function(t){return arguments.length?(l=t==null?null:typeof t==="function"?t:R_(+t),n):l};n.y=function(t){return arguments.length?(h=typeof t==="function"?t:R_(+t),p=null,n):h};n.y0=function(t){return arguments.length?(h=typeof t==="function"?t:R_(+t),n):h};n.y1=function(t){return arguments.length?(p=t==null?null:typeof t==="function"?t:R_(+t),n):p};n.lineX0=n.lineY0=function(){return t().x(f).y(h)};n.lineY1=function(){return t().x(f).y(p)};n.lineX1=function(){return t().x(l).y(h)};n.defined=function(t){return arguments.length?(d=typeof t==="function"?t:R_(!!t),n):d};n.curve=function(t){return arguments.length?(g=t,v!=null&&(y=g(v)),n):g};n.context=function(t){return arguments.length?(t==null?v=y=null:y=g(v=t),n):v};return n}function fw(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function lw(t){return t}function hw(){var d=lw,v=fw,g=null,y=R_(0),m=R_(X_),x=R_(0);function n(e){var t,n=e.length,r,i,a=0,o=new Array(n),u=new Array(n),s=+y.apply(this,arguments),c=Math.min(X_,Math.max(-X_,m.apply(this,arguments)-s)),f,l=Math.min(Math.abs(c)/n,x.apply(this,arguments)),h=l*(c<0?-1:1),p;for(t=0;t<n;++t){if((p=u[o[t]=t]=+d(e[t],t,e))>0){a+=p}}if(v!=null)o.sort(function(t,n){return v(u[t],u[n])});else if(g!=null)o.sort(function(t,n){return g(e[t],e[n])});for(t=0,i=a?(c-n*h)/a:0;t<n;++t,s=f){r=o[t],p=u[r],f=s+(p>0?p*i:0)+h,u[r]={data:e[r],index:t,value:p,startAngle:s,endAngle:f,padAngle:l}}return u}n.value=function(t){return arguments.length?(d=typeof t==="function"?t:R_(+t),n):d};n.sortValues=function(t){return arguments.length?(v=t,g=null,n):v};n.sort=function(t){return arguments.length?(g=t,v=null,n):g};n.startAngle=function(t){return arguments.length?(y=typeof t==="function"?t:R_(+t),n):y};n.endAngle=function(t){return arguments.length?(m=typeof t==="function"?t:R_(+t),n):m};n.padAngle=function(t){return arguments.length?(x=typeof t==="function"?t:R_(+t),n):x};return n}var pw=vw(aw);function dw(t){this._curve=t}dw.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function vw(n){function t(t){return new dw(n(t))}t._curve=n;return t}function gw(t){var n=t.curve;t.angle=t.x,delete t.x;t.radius=t.y,delete t.y;t.curve=function(t){return arguments.length?n(vw(t)):n()._curve};return t}function yw(){return gw(sw().curve(pw))}function mw(){var t=cw().curve(pw),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;t.angle=t.x,delete t.x;t.startAngle=t.x0,delete t.x0;t.endAngle=t.x1,delete t.x1;t.radius=t.y,delete t.y;t.innerRadius=t.y0,delete t.y0;t.outerRadius=t.y1,delete t.y1;t.lineStartAngle=function(){return gw(e())},delete t.lineX0;t.lineEndAngle=function(){return gw(r())},delete t.lineX1;t.lineInnerRadius=function(){return gw(i())},delete t.lineY0;t.lineOuterRadius=function(){return gw(a())},delete t.lineY1;t.curve=function(t){return arguments.length?n(vw(t)):n()._curve};return t}function xw(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}var _w=Array.prototype.slice;function ww(t){return t.source}function bw(t){return t.target}function Mw(i){var a=ww,o=bw,u=ow,s=uw,c=null;function n(){var t,n=_w.call(arguments),e=a.apply(this,n),r=o.apply(this,n);if(!c)c=t=Ku();i(c,+u.apply(this,(n[0]=e,n)),+s.apply(this,n),+u.apply(this,(n[0]=r,n)),+s.apply(this,n));if(t)return c=null,t+""||null}n.source=function(t){return arguments.length?(a=t,n):a};n.target=function(t){return arguments.length?(o=t,n):o};n.x=function(t){return arguments.length?(u=typeof t==="function"?t:R_(+t),n):u};n.y=function(t){return arguments.length?(s=typeof t==="function"?t:R_(+t),n):s};n.context=function(t){return arguments.length?(c=t==null?null:t,n):c};return n}function kw(t,n,e,r,i){t.moveTo(n,e);t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function Sw(t,n,e,r,i){t.moveTo(n,e);t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function Aw(t,n,e,r,i){var a=xw(n,e),o=xw(n,e=(e+i)/2),u=xw(r,e),s=xw(r,i);t.moveTo(a[0],a[1]);t.bezierCurveTo(o[0],o[1],u[0],u[1],s[0],s[1])}function Cw(){return Mw(kw)}function Nw(){return Mw(Sw)}function Tw(){var t=Mw(Aw);t.angle=t.x,delete t.x;t.radius=t.y,delete t.y;return t}var Ew={draw:function(t,n){var e=Math.sqrt(n/G_);t.moveTo(e,0);t.arc(0,0,e,0,X_)}};var jw={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e);t.lineTo(-e,-e);t.lineTo(-e,-3*e);t.lineTo(e,-3*e);t.lineTo(e,-e);t.lineTo(3*e,-e);t.lineTo(3*e,e);t.lineTo(e,e);t.lineTo(e,3*e);t.lineTo(-e,3*e);t.lineTo(-e,e);t.lineTo(-3*e,e);t.closePath()}};var Ow=Math.sqrt(1/3);var Lw=Ow*2;var Iw={draw:function(t,n){var e=Math.sqrt(n/Lw),r=e*Ow;t.moveTo(0,-e);t.lineTo(r,0);t.lineTo(0,e);t.lineTo(-r,0);t.closePath()}};var Pw=.8908130915292852;var Rw=Math.sin(G_/10)/Math.sin(7*G_/10);var Dw=Math.sin(X_/10)*Rw;var zw=-Math.cos(X_/10)*Rw;var Fw={draw:function(t,n){var e=Math.sqrt(n*Pw),r=Dw*e,i=zw*e;t.moveTo(0,-e);t.lineTo(r,i);for(var a=1;a<5;++a){var o=X_*a/5,u=Math.cos(o),s=Math.sin(o);t.lineTo(s*e,-u*e);t.lineTo(u*r-s*i,s*r+u*i)}t.closePath()}};var Bw={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}};var qw=Math.sqrt(3);var Uw={draw:function(t,n){var e=-Math.sqrt(n/(qw*3));t.moveTo(0,e*2);t.lineTo(-qw*e,-e);t.lineTo(qw*e,-e);t.closePath()}};var Hw=-.5;var Yw=Math.sqrt(3)/2;var Gw=1/Math.sqrt(12);var Vw=(Gw/2+1)*3;var Xw={draw:function(t,n){var e=Math.sqrt(n/Vw),r=e/2,i=e*Gw,a=r,o=e*Gw+e,u=-a,s=o;t.moveTo(r,i);t.lineTo(a,o);t.lineTo(u,s);t.lineTo(Hw*r-Yw*i,Yw*r+Hw*i);t.lineTo(Hw*a-Yw*o,Yw*a+Hw*o);t.lineTo(Hw*u-Yw*s,Yw*u+Hw*s);t.lineTo(Hw*r+Yw*i,Hw*i-Yw*r);t.lineTo(Hw*a+Yw*o,Hw*o-Yw*a);t.lineTo(Hw*u+Yw*s,Hw*s-Yw*u);t.closePath()}};var Ww=[Ew,jw,Iw,Bw,Fw,Uw,Xw];function Zw(){var n=R_(Ew),e=R_(64),r=null;function i(){var t;if(!r)r=t=Ku();n.apply(this,arguments).draw(r,+e.apply(this,arguments));if(t)return r=null,t+""||null}i.type=function(t){return arguments.length?(n=typeof t==="function"?t:R_(t),i):n};i.size=function(t){return arguments.length?(e=typeof t==="function"?t:R_(+t),i):e};i.context=function(t){return arguments.length?(r=t==null?null:t,i):r};return i}function $w(){}function Jw(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Kw(t){this._context=t}Kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Jw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jw(this,t,n);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=n}};function Qw(t){return new Kw(t)}function tb(t){this._context=t}tb.prototype={areaStart:$w,areaEnd:$w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;this._x2=t,this._y2=n;break;case 1:this._point=2;this._x3=t,this._y3=n;break;case 2:this._point=3;this._x4=t,this._y4=n;this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Jw(this,t,n);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=n}};function nb(t){return new tb(t)}function eb(t){this._context=t}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Jw(this,t,n);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=n}};function rb(t){return new eb(t)}function ib(t,n){this._basis=new Kw(t);this._beta=n}ib.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0){var r=t[0],i=n[0],a=t[e]-r,o=n[e]-i,u=-1,s;while(++u<=e){s=u/e;this._basis.point(this._beta*t[u]+(1-this._beta)*(r+s*a),this._beta*n[u]+(1-this._beta)*(i+s*o))}}this._x=this._y=null;this._basis.lineEnd()},point:function(t,n){this._x.push(+t);this._y.push(+n)}};var ab=function n(e){function t(t){return e===1?new Kw(t):new ib(t,e)}t.beta=function(t){return n(+t)};return t}(.85);function ob(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function ub(t,n){this._context=t;this._k=(1-n)/6}ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ob(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;this._x1=t,this._y1=n;break;case 2:this._point=3;default:ob(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=n}};var sb=function n(e){function t(t){return new ub(t,e)}t.tension=function(t){return n(+t)};return t}(0);function cb(t,n){this._context=t;this._k=(1-n)/6}cb.prototype={areaStart:$w,areaEnd:$w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;this._x3=t,this._y3=n;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3;this._x5=t,this._y5=n;break;default:ob(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=n}};var fb=function n(e){function t(t){return new cb(t,e)}t.tension=function(t){return n(+t)};return t}(0);function lb(t,n){this._context=t;this._k=(1-n)/6}lb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ob(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=n}};var hb=function n(e){function t(t){return new lb(t,e)}t.tension=function(t){return n(+t)};return t}(0);function pb(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Y_){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s;i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Y_){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-n*t._l12_2a)/f;o=(o*c+t._y1*t._l23_2a-e*t._l12_2a)/f}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function db(t,n){this._context=t;this._alpha=n}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;if(this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:pb(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=n}};var vb=function n(e){function t(t){return e?new db(t,e):new ub(t,0)}t.alpha=function(t){return n(+t)};return t}(.5);function gb(t,n){this._context=t;this._alpha=n}gb.prototype={areaStart:$w,areaEnd:$w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(t,n){t=+t,n=+n;if(this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=t,this._y3=n;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3;this._x5=t,this._y5=n;break;default:pb(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=n}};var yb=function n(e){function t(t){return e?new gb(t,e):new cb(t,0)}t.alpha=function(t){return n(+t)};return t}(.5);function mb(t,n){this._context=t;this._alpha=n}mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(t,n){t=+t,n=+n;if(this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pb(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=n}};var xb=function n(e){function t(t){return e?new mb(t,e):new lb(t,0)}t.alpha=function(t){return n(+t)};return t}(.5);function _b(t){this._context=t}_b.prototype={areaStart:$w,areaEnd:$w,lineStart:function(){this._point=0},lineEnd:function(){if(this._point)this._context.closePath()},point:function(t,n){t=+t,n=+n;if(this._point)this._context.lineTo(t,n);else this._point=1,this._context.moveTo(t,n)}};function wb(t){return new _b(t)}function bb(t){return t<0?-1:1}function Mb(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(bb(a)+bb(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function kb(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Sb(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*n,a-u,o-u*e,a,o)}function Ab(t){this._context=t}Ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sb(this,this._t0,kb(this,this._t0));break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,n){var e=NaN;t=+t,n=+n;if(t===this._x1&&n===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;Sb(this,kb(this,e=Mb(this,t,n)),e);break;default:Sb(this,this._t0,e=Mb(this,t,n));break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=n;this._t0=e}};function Cb(t){this._context=new Nb(t)}(Cb.prototype=Object.create(Ab.prototype)).point=function(t,n){Ab.prototype.point.call(this,n,t)};function Nb(t){this._context=t}Nb.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}};function Tb(t){return new Ab(t)}function Eb(t){return new Cb(t)}function jb(t){this._context=t}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e){this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]);if(e===2){this._context.lineTo(t[1],n[1])}else{var r=Ob(t),i=Ob(n);for(var a=0,o=1;o<e;++a,++o){this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],n[o])}}}if(this._line||this._line!==0&&e===1)this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(t,n){this._x.push(+t);this._y.push(+n)}};function Ob(t){var n,e=t.length-1,r,i=new Array(e),a=new Array(e),o=new Array(e);i[0]=0,a[0]=2,o[0]=t[0]+2*t[1];for(n=1;n<e-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];i[e-1]=2,a[e-1]=7,o[e-1]=8*t[e-1]+t[e];for(n=1;n<e;++n)r=i[n]/a[n-1],a[n]-=r,o[n]-=r*o[n-1];i[e-1]=o[e-1]/a[e-1];for(n=e-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];a[e-1]=(t[e]+i[e-1])/2;for(n=0;n<e-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function Lb(t){return new jb(t)}function Ib(t,n){this._context=t;this._t=n}Ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,n);this._context.lineTo(t,n)}else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y);this._context.lineTo(e,n)}break}}this._x=t,this._y=n}};function Pb(t){return new Ib(t,.5)}function Rb(t){return new Ib(t,0)}function Db(t){return new Ib(t,1)}function zb(t,n){if(!((o=t.length)>1))return;for(var e=1,r,i,a=t[n[0]],o,u=a.length;e<o;++e){i=a,a=t[n[e]];for(r=0;r<u;++r){a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}}}function Fb(t){var n=t.length,e=new Array(n);while(--n>=0)e[n]=n;return e}function Bb(t,n){return t[n]}function qb(){var l=R_([]),h=Fb,p=zb,d=Bb;function n(t){var n=l.apply(this,arguments),e,r=t.length,i=n.length,a=new Array(i),o;for(e=0;e<i;++e){for(var u=n[e],s=a[e]=new Array(r),c=0,f;c<r;++c){s[c]=f=[0,+d(t[c],u,c,t)];f.data=t[c]}s.key=u}for(e=0,o=h(a);e<i;++e){a[o[e]].index=e}p(a,o);return a}n.keys=function(t){return arguments.length?(l=typeof t==="function"?t:R_(_w.call(t)),n):l};n.value=function(t){return arguments.length?(d=typeof t==="function"?t:R_(+t),n):d};n.order=function(t){return arguments.length?(h=t==null?Fb:typeof t==="function"?t:R_(_w.call(t)),n):h};n.offset=function(t){return arguments.length?(p=t==null?zb:t,n):p};return n}function Ub(t,n){if(!((r=t.length)>0))return;for(var e,r,i=0,a=t[0].length,o;i<a;++i){for(o=e=0;e<r;++e)o+=t[e][i][1]||0;if(o)for(e=0;e<r;++e)t[e][i][1]/=o}zb(t,n)}function Hb(t,n){if(!((s=t.length)>1))return;for(var e,r=0,i,a,o,u,s,c=t[n[0]].length;r<c;++r){for(o=u=0,e=0;e<s;++e){if((a=(i=t[n[e]][r])[1]-i[0])>=0){i[0]=o,i[1]=o+=a}else if(a<0){i[1]=u,i[0]=u+=a}else{i[0]=o}}}}function Yb(t,n){if(!((i=t.length)>0))return;for(var e=0,r=t[n[0]],i,a=r.length;e<a;++e){for(var o=0,u=0;o<i;++o)u+=t[o][e][1]||0;r[e][1]+=r[e][0]=-u/2}zb(t,n)}function Gb(t,n){if(!((o=t.length)>0)||!((a=(i=t[n[0]]).length)>0))return;for(var e=0,r=1,i,a,o;r<a;++r){for(var u=0,s=0,c=0;u<o;++u){var f=t[n[u]],l=f[r][1]||0,h=f[r-1][1]||0,p=(l-h)/2;for(var d=0;d<u;++d){var v=t[n[d]],g=v[r][1]||0,y=v[r-1][1]||0;p+=g-y}s+=l,c+=p*l}i[r-1][1]+=i[r-1][0]=e;if(s)e-=c/s}i[r-1][1]+=i[r-1][0]=e;zb(t,n)}function Vb(t){var e=t.map(Xb);return Fb(t).sort(function(t,n){return e[t]-e[n]})}function Xb(t){var n=0,e=-1,r=t.length,i;while(++e<r)if(i=+t[e][1])n+=i;return n}function Wb(t){return Vb(t).reverse()}function Zb(t){var n=t.length,e,r,i=t.map(Xb),a=Fb(t).sort(function(t,n){return i[n]-i[t]}),o=0,u=0,s=[],c=[];for(e=0;e<n;++e){r=a[e];if(o<u){o+=i[r];s.push(r)}else{u+=i[r];c.push(r)}}return c.reverse().concat(s)}function $b(t){return Fb(t).reverse()}function Jb(t){return function(){return t}}function Kb(t){return t[0]}function Qb(t){return t[1]}function tM(){this._=null}function nM(t){t.U=t.C=t.L=t.R=t.P=t.N=null}tM.prototype={constructor:tM,insert:function(t,n){var e,r,i;if(t){n.P=t;n.N=t.N;if(t.N)t.N.P=n;t.N=n;if(t.R){t=t.R;while(t.L)t=t.L;t.L=n}else{t.R=n}e=t}else if(this._){t=iM(this._);n.P=null;n.N=t;t.P=t.L=n;e=t}else{n.P=n.N=null;this._=n;e=null}n.L=n.R=null;n.U=e;n.C=true;t=n;while(e&&e.C){r=e.U;if(e===r.L){i=r.R;if(i&&i.C){e.C=i.C=false;r.C=true;t=r}else{if(t===e.R){eM(this,e);t=e;e=t.U}e.C=false;r.C=true;rM(this,r)}}else{i=r.L;if(i&&i.C){e.C=i.C=false;r.C=true;t=r}else{if(t===e.L){rM(this,e);t=e;e=t.U}e.C=false;r.C=true;eM(this,r)}}e=t.U}this._.C=false},remove:function(t){if(t.N)t.N.P=t.P;if(t.P)t.P.N=t.N;t.N=t.P=null;var n=t.U,e,r=t.L,i=t.R,a,o;if(!r)a=i;else if(!i)a=r;else a=iM(i);if(n){if(n.L===t)n.L=a;else n.R=a}else{this._=a}if(r&&i){o=a.C;a.C=t.C;a.L=r;r.U=a;if(a!==i){n=a.U;a.U=t.U;t=a.R;n.L=t;a.R=i;i.U=a}else{a.U=n;n=a;t=a.R}}else{o=t.C;t=a}if(t)t.U=n;if(o)return;if(t&&t.C){t.C=false;return}do{if(t===this._)break;if(t===n.L){e=n.R;if(e.C){e.C=false;n.C=true;eM(this,n);e=n.R}if(e.L&&e.L.C||e.R&&e.R.C){if(!e.R||!e.R.C){e.L.C=false;e.C=true;rM(this,e);e=n.R}e.C=n.C;n.C=e.R.C=false;eM(this,n);t=this._;break}}else{e=n.L;if(e.C){e.C=false;n.C=true;rM(this,n);e=n.L}if(e.L&&e.L.C||e.R&&e.R.C){if(!e.L||!e.L.C){e.R.C=false;e.C=true;eM(this,e);e=n.L}e.C=n.C;n.C=e.L.C=false;rM(this,n);t=this._;break}}e.C=true;t=n;n=n.U}while(!t.C);if(t)t.C=false}};function eM(t,n){var e=n,r=n.R,i=e.U;if(i){if(i.L===e)i.L=r;else i.R=r}else{t._=r}r.U=i;e.U=r;e.R=r.L;if(e.R)e.R.U=e;r.L=e}function rM(t,n){var e=n,r=n.L,i=e.U;if(i){if(i.L===e)i.L=r;else i.R=r}else{t._=r}r.U=i;e.U=r;e.L=r.R;if(e.L)e.L.U=e;r.R=e}function iM(t){while(t.L)t=t.L;return t}function aM(t,n,e,r){var i=[null,null],a=PM.push(i)-1;i.left=t;i.right=n;if(e)uM(i,t,n,e);if(r)uM(i,n,t,r);LM[t.index].halfedges.push(a);LM[n.index].halfedges.push(a);return i}function oM(t,n,e){var r=[n,e];r.left=t;return r}function uM(t,n,e,r){if(!t[0]&&!t[1]){t[0]=r;t.left=n;t.right=e}else if(t.left===e){t[1]=r}else{t[0]=r}}function sM(t,n,e,r,i){var a=t[0],o=t[1],u=a[0],s=a[1],c=o[0],f=o[1],l=0,h=1,p=c-u,d=f-s,v;v=n-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<l)return;if(v<h)h=v}else if(p>0){if(v>h)return;if(v>l)l=v}v=r-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;if(v>l)l=v}else if(p>0){if(v<l)return;if(v<h)h=v}v=e-s;if(!d&&v>0)return;v/=d;if(d<0){if(v<l)return;if(v<h)h=v}else if(d>0){if(v>h)return;if(v>l)l=v}v=i-s;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;if(v>l)l=v}else if(d>0){if(v<l)return;if(v<h)h=v}if(!(l>0)&&!(h<1))return true;if(l>0)t[0]=[u+l*p,s+l*d];if(h<1)t[1]=[u+h*p,s+h*d];return true}function cM(t,n,e,r,i){var a=t[1];if(a)return true;var o=t[0],u=t.left,s=t.right,c=u[0],f=u[1],l=s[0],h=s[1],p=(c+l)/2,d=(f+h)/2,v,g;if(h===f){if(p<n||p>=r)return;if(c>l){if(!o)o=[p,e];else if(o[1]>=i)return;a=[p,i]}else{if(!o)o=[p,i];else if(o[1]<e)return;a=[p,e]}}else{v=(c-l)/(h-f);g=d-v*p;if(v<-1||v>1){if(c>l){if(!o)o=[(e-g)/v,e];else if(o[1]>=i)return;a=[(i-g)/v,i]}else{if(!o)o=[(i-g)/v,i];else if(o[1]<e)return;a=[(e-g)/v,e]}}else{if(f<h){if(!o)o=[n,v*n+g];else if(o[0]>=r)return;a=[r,v*r+g]}else{if(!o)o=[r,v*r+g];else if(o[0]<n)return;a=[n,v*n+g]}}}t[0]=o;t[1]=a;return true}function fM(t,n,e,r){var i=PM.length,a;while(i--){if(!cM(a=PM[i],t,n,e,r)||!sM(a,t,n,e,r)||!(Math.abs(a[0][0]-a[1][0])>EM||Math.abs(a[0][1]-a[1][1])>EM)){delete PM[i]}}}function lM(t){return LM[t.index]={site:t,halfedges:[]}}function hM(t,n){var e=t.site,r=n.left,i=n.right;if(e===i)i=r,r=e;if(i)return Math.atan2(i[1]-r[1],i[0]-r[0]);if(e===r)r=n[1],i=n[0];else r=n[0],i=n[1];return Math.atan2(r[0]-i[0],i[1]-r[1])}function pM(t,n){return n[+(n.left!==t.site)]}function dM(t,n){return n[+(n.left===t.site)]}function vM(){for(var t=0,n=LM.length,e,r,i,a;t<n;++t){if((e=LM[t])&&(a=(r=e.halfedges).length)){var o=new Array(a),u=new Array(a);for(i=0;i<a;++i)o[i]=i,u[i]=hM(e,PM[r[i]]);o.sort(function(t,n){return u[n]-u[t]});for(i=0;i<a;++i)u[i]=r[o[i]];for(i=0;i<a;++i)r[i]=u[i]}}}function gM(t,n,e,r){var i=LM.length,a,o,u,s,c,f,l,h,p,d,v,g,y=true;for(a=0;a<i;++a){if(o=LM[a]){u=o.site;c=o.halfedges;s=c.length;while(s--){if(!PM[c[s]]){c.splice(s,1)}}s=0,f=c.length;while(s<f){d=dM(o,PM[c[s]]),v=d[0],g=d[1];l=pM(o,PM[c[++s%f]]),h=l[0],p=l[1];if(Math.abs(v-h)>EM||Math.abs(g-p)>EM){c.splice(s,0,PM.push(oM(u,d,Math.abs(v-t)<EM&&r-g>EM?[t,Math.abs(h-t)<EM?p:r]:Math.abs(g-r)<EM&&e-v>EM?[Math.abs(p-r)<EM?h:e,r]:Math.abs(v-e)<EM&&g-n>EM?[e,Math.abs(h-e)<EM?p:n]:Math.abs(g-n)<EM&&v-t>EM?[Math.abs(p-n)<EM?h:t,n]:null))-1);++f}}if(f)y=false}}if(y){var m,x,_,w=Infinity;for(a=0,y=null;a<i;++a){if(o=LM[a]){u=o.site;m=u[0]-t;x=u[1]-n;_=m*m+x*x;if(_<w)w=_,y=o}}if(y){var b=[t,n],M=[t,r],k=[e,r],S=[e,n];y.halfedges.push(PM.push(oM(u=y.site,b,M))-1,PM.push(oM(u,M,k))-1,PM.push(oM(u,k,S))-1,PM.push(oM(u,S,b))-1)}}for(a=0;a<i;++a){if(o=LM[a]){if(!o.halfedges.length){delete LM[a]}}}}var yM=[];var mM;function xM(){nM(this);this.x=this.y=this.arc=this.site=this.cy=null}function _M(t){var n=t.P,e=t.N;if(!n||!e)return;var r=n.site,i=t.site,a=e.site;if(r===a)return;var o=i[0],u=i[1],s=r[0]-o,c=r[1]-u,f=a[0]-o,l=a[1]-u;var h=2*(s*l-c*f);if(h>=-jM)return;var p=s*s+c*c,d=f*f+l*l,v=(l*p-c*d)/h,g=(s*d-f*p)/h;var y=yM.pop()||new xM;y.arc=t;y.site=i;y.x=v+o;y.y=(y.cy=g+u)+Math.sqrt(v*v+g*g);t.circle=y;var m=null,x=IM._;while(x){if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{m=x.P;break}}else{if(x.R)x=x.R;else{m=x;break}}}IM.insert(m,y);if(!m)mM=y}function wM(t){var n=t.circle;if(n){if(!n.P)mM=n.N;IM.remove(n);yM.push(n);nM(n);t.circle=null}}var bM=[];function MM(){nM(this);this.edge=this.site=this.circle=null}function kM(t){var n=bM.pop()||new MM;n.site=t;return n}function SM(t){wM(t);OM.remove(t);bM.push(t);nM(t)}function AM(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],a=t.P,o=t.N,u=[t];SM(t);var s=a;while(s.circle&&Math.abs(e-s.circle.x)<EM&&Math.abs(r-s.circle.cy)<EM){a=s.P;u.unshift(s);SM(s);s=a}u.unshift(s);wM(s);var c=o;while(c.circle&&Math.abs(e-c.circle.x)<EM&&Math.abs(r-c.circle.cy)<EM){o=c.N;u.push(c);SM(c);c=o}u.push(c);wM(c);var f=u.length,l;for(l=1;l<f;++l){c=u[l];s=u[l-1];uM(c.edge,s.site,c.site,i)}s=u[0];c=u[f-1];c.edge=aM(s.site,c.site,null,i);_M(s);_M(c)}function CM(t){var n=t[0],e=t[1],r,i,a,o,u=OM._;while(u){a=NM(u,e)-n;if(a>EM)u=u.L;else{o=n-TM(u,e);if(o>EM){if(!u.R){r=u;break}u=u.R}else{if(a>-EM){r=u.P;i=u}else if(o>-EM){r=u;i=u.N}else{r=i=u}break}}}lM(t);var s=kM(t);OM.insert(r,s);if(!r&&!i)return;if(r===i){wM(r);i=kM(r.site);OM.insert(s,i);s.edge=i.edge=aM(r.site,s.site);_M(r);_M(i);return}if(!i){s.edge=aM(r.site,s.site);return}wM(r);wM(i);var c=r.site,f=c[0],l=c[1],h=t[0]-f,p=t[1]-l,d=i.site,v=d[0]-f,g=d[1]-l,y=2*(h*g-p*v),m=h*h+p*p,x=v*v+g*g,_=[(g*m-p*x)/y+f,(h*x-v*m)/y+l];uM(i.edge,c,d,_);s.edge=aM(c,t,null,_);i.edge=aM(t,d,null,_);_M(r);_M(i)}function NM(t,n){var e=t.site,r=e[0],i=e[1],a=i-n;if(!a)return r;var o=t.P;if(!o)return-Infinity;e=o.site;var u=e[0],s=e[1],c=s-n;if(!c)return u;var f=u-r,l=1/a-1/c,h=f/c;if(l)return(-h+Math.sqrt(h*h-2*l*(f*f/(-2*c)-s+c/2+i-a/2)))/l+r;return(r+u)/2}function TM(t,n){var e=t.N;if(e)return NM(e,n);var r=t.site;return r[1]===n?r[0]:Infinity}var EM=1e-6;var jM=1e-12;var OM;var LM;var IM;var PM;function RM(t,n,e){return(t[0]-e[0])*(n[1]-t[1])-(t[0]-n[0])*(e[1]-t[1])}function DM(t,n){return n[1]-t[1]||n[0]-t[0]}function zM(t,n){var e=t.sort(DM).pop(),r,i,a;PM=[];LM=new Array(t.length);OM=new tM;IM=new tM;while(true){a=mM;if(e&&(!a||e[1]<a.y||e[1]===a.y&&e[0]<a.x)){if(e[0]!==r||e[1]!==i){CM(e);r=e[0],i=e[1]}e=t.pop()}else if(a){AM(a.arc)}else{break}}vM();if(n){var o=+n[0][0],u=+n[0][1],s=+n[1][0],c=+n[1][1];fM(o,u,s,c);gM(o,u,s,c)}this.edges=PM;this.cells=LM;OM=IM=PM=LM=null}zM.prototype={constructor:zM,polygons:function(){var e=this.edges;return this.cells.map(function(n){var t=n.halfedges.map(function(t){return pM(n,e[t])});t.data=n.site.data;return t})},triangles:function(){var c=[],f=this.edges;this.cells.forEach(function(t,n){if(!(a=(r=t.halfedges).length))return;var e=t.site,r,i=-1,a,o,u=f[r[a-1]],s=u.left===e?u.right:u.left;while(++i<a){o=s;u=f[r[i]];s=u.left===e?u.right:u.left;if(o&&s&&n<o.index&&n<s.index&&RM(e,o,s)<0){c.push([e.data,o.data,s.data])}}});return c},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(o,u,t){var s=this,n,c=s._found||0,e=s.cells.length,f;while(!(f=s.cells[c]))if(++c>=e)return null;var r=o-f.site[0],i=u-f.site[1],l=r*r+i*i;do{f=s.cells[n=c],c=null;f.halfedges.forEach(function(t){var n=s.edges[t],e=n.left;if((e===f.site||!e)&&!(e=n.right))return;var r=o-e[0],i=u-e[1],a=r*r+i*i;if(a<l)l=a,c=e.index})}while(c!==null);s._found=n;return t==null||l<=t*t?f.site:null}};function FM(){var i=Kb,a=Qb,n=null;function e(r){return new zM(r.map(function(t,n){var e=[Math.round(i(t,n,r)/EM)*EM,Math.round(a(t,n,r)/EM)*EM];e.index=n;e.data=t;return e}),n)}e.polygons=function(t){return e(t).polygons()};e.links=function(t){return e(t).links()};e.triangles=function(t){return e(t).triangles()};e.x=function(t){return arguments.length?(i=typeof t==="function"?t:Jb(+t),e):i};e.y=function(t){return arguments.length?(a=typeof t==="function"?t:Jb(+t),e):a};e.extent=function(t){return arguments.length?(n=t==null?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]};e.size=function(t){return arguments.length?(n=t==null?null:[[0,0],[+t[0],+t[1]]],e):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]};return e}function BM(t){return function(){return t}}function qM(t,n,e){this.target=t;this.type=n;this.transform=e}function UM(t,n,e){this.k=t;this.x=n;this.y=e}UM.prototype={constructor:UM,scale:function(t){return t===1?this:new UM(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new UM(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var HM=new UM(1,0,0);YM.prototype=UM.prototype;function YM(t){return t.__zoom||HM}function GM(){U.event.stopImmediatePropagation()}function VM(){U.event.preventDefault();U.event.stopImmediatePropagation()}function XM(){return!U.event.button}function WM(){var t=this,n,e;if(t instanceof SVGElement){t=t.ownerSVGElement||t;n=t.width.baseVal.value;e=t.height.baseVal.value}else{n=t.clientWidth;e=t.clientHeight}return[[0,0],[n,e]]}function ZM(){return this.__zoom||HM}function $M(){return-U.event.deltaY*(U.event.deltaMode?120:1)/500}function JM(){return"ontouchstart"in this}function KM(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],a=t.invertY(n[0][1])-e[0][1],o=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function QM(){var u=XM,l=WM,p=KM,a=$M,n=JM,o=[0,Infinity],d=[[-Infinity,-Infinity],[Infinity,Infinity]],s=250,h=bi,c=[],e=ct("start","zoom","end"),v,f,g=500,y=150,m=0;function x(t){t.property("__zoom",ZM).on("wheel.zoom",r).on("mousedown.zoom",i).on("dblclick.zoom",A).filter(n).on("touchstart.zoom",C).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",ZM);if(t!==e){M(t,n)}else{e.interrupt().each(function(){k(this,arguments).start().zoom(null,typeof n==="function"?n.apply(this,arguments):n).end()})}};x.scaleBy=function(t,e){x.scaleTo(t,function(){var t=this.__zoom.k,n=typeof e==="function"?e.apply(this,arguments):e;return t*n})};x.scaleTo=function(t,a){x.transform(t,function(){var t=l.apply(this,arguments),n=this.__zoom,e=b(t),r=n.invert(e),i=typeof a==="function"?a.apply(this,arguments):a;return p(w(_(n,i),e,r),t,d)})};x.translateBy=function(t,n,e){x.transform(t,function(){return p(this.__zoom.translate(typeof n==="function"?n.apply(this,arguments):n,typeof e==="function"?e.apply(this,arguments):e),l.apply(this,arguments),d)})};x.translateTo=function(t,r,i){x.transform(t,function(){var t=l.apply(this,arguments),n=this.__zoom,e=b(t);return p(HM.translate(e[0],e[1]).scale(n.k).translate(typeof r==="function"?-r.apply(this,arguments):-r,typeof i==="function"?-i.apply(this,arguments):-i),t,d)})};function _(t,n){n=Math.max(o[0],Math.min(o[1],n));return n===t.k?t:new UM(n,t.x,t.y)}function w(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new UM(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function M(t,c,f){t.on("start.zoom",function(){k(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).end()}).tween("zoom",function(){var t=this,n=arguments,r=k(t,n),e=l.apply(t,n),i=f||b(e),a=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),o=t.__zoom,u=typeof c==="function"?c.apply(t,n):c,s=h(o.invert(i).concat(a/o.k),u.invert(i).concat(a/u.k));return function(t){if(t===1)t=u;else{var n=s(t),e=a/n[2];t=new UM(e,i[0]-n[0]*e,i[1]-n[1]*e)}r.zoom(null,t)}})}function k(t,n){for(var e=0,r=c.length,i;e<r;++e){if((i=c[e]).that===t){return i}}return new S(t,n)}function S(t,n){this.that=t;this.args=n;this.index=-1;this.active=0;this.extent=l.apply(t,n)}S.prototype={start:function(){if(++this.active===1){this.index=c.push(this)-1;this.emit("start")}return this},zoom:function(t,n){if(this.mouse&&t!=="mouse")this.mouse[1]=n.invert(this.mouse[0]);if(this.touch0&&t!=="touch")this.touch0[1]=n.invert(this.touch0[0]);if(this.touch1&&t!=="touch")this.touch1[1]=n.invert(this.touch1[0]);this.that.__zoom=n;this.emit("zoom");return this},end:function(){if(--this.active===0){c.splice(this.index,1);this.index=-1;this.emit("end")}return this},emit:function(t){Kn(new qM(x,t,this.that.__zoom),e.apply,e,[t,this.that,this.args])}};function r(){if(!u.apply(this,arguments))return;var t=k(this,arguments),n=this.__zoom,e=Math.max(o[0],Math.min(o[1],n.k*Math.pow(2,a.apply(this,arguments)))),r=pe(this);if(t.wheel){if(t.mouse[0][0]!==r[0]||t.mouse[0][1]!==r[1]){t.mouse[1]=n.invert(t.mouse[0]=r)}clearTimeout(t.wheel)}else if(n.k===e)return;else{t.mouse=[r,n.invert(r)];ga(this);t.start()}VM();t.wheel=setTimeout(i,y);t.zoom("mouse",p(w(_(n,e),t.mouse[0],t.mouse[1]),t.extent,d));function i(){t.wheel=null;t.end()}}function i(){if(f||!u.apply(this,arguments))return;var e=k(this,arguments),t=oe(U.event.view).on("mousemove.zoom",a,true).on("mouseup.zoom",o,true),n=pe(this),r=U.event.clientX,i=U.event.clientY;xe(U.event.view);GM();e.mouse=[n,this.__zoom.invert(n)];ga(this);e.start();function a(){VM();if(!e.moved){var t=U.event.clientX-r,n=U.event.clientY-i;e.moved=t*t+n*n>m}e.zoom("mouse",p(w(e.that.__zoom,e.mouse[0]=pe(e.that),e.mouse[1]),e.extent,d))}function o(){t.on("mousemove.zoom mouseup.zoom",null);_e(U.event.view,e.moved);VM();e.end()}}function A(){if(!u.apply(this,arguments))return;var t=this.__zoom,n=pe(this),e=t.invert(n),r=t.k*(U.event.shiftKey?.5:2),i=p(w(_(t,r),n,e),l.apply(this,arguments),d);VM();if(s>0)oe(this).transition().duration(s).call(M,i,n);else oe(this).call(x.transform,i)}function C(){if(!u.apply(this,arguments))return;var t=k(this,arguments),n=U.event.changedTouches,e,r=n.length,i,a,o;GM();for(i=0;i<r;++i){a=n[i],o=ve(this,n,a.identifier);o=[o,this.__zoom.invert(o),a.identifier];if(!t.touch0)t.touch0=o,e=true;else if(!t.touch1)t.touch1=o}if(v){v=clearTimeout(v);if(!t.touch1){t.end();o=oe(this).on("dblclick.zoom");if(o)o.apply(this,arguments);return}}if(e){v=setTimeout(function(){v=null},g);ga(this);t.start()}}function N(){var t=k(this,arguments),n=U.event.changedTouches,e=n.length,r,i,a,o;VM();if(v)v=clearTimeout(v);for(r=0;r<e;++r){i=n[r],a=ve(this,n,i.identifier);if(t.touch0&&t.touch0[2]===i.identifier)t.touch0[0]=a;else if(t.touch1&&t.touch1[2]===i.identifier)t.touch1[0]=a}i=t.that.__zoom;if(t.touch1){var u=t.touch0[0],s=t.touch0[1],c=t.touch1[0],f=t.touch1[1],l=(l=c[0]-u[0])*l+(l=c[1]-u[1])*l,h=(h=f[0]-s[0])*h+(h=f[1]-s[1])*h;i=_(i,Math.sqrt(l/h));a=[(u[0]+c[0])/2,(u[1]+c[1])/2];o=[(s[0]+f[0])/2,(s[1]+f[1])/2]}else if(t.touch0)a=t.touch0[0],o=t.touch0[1];else return;t.zoom("touch",p(w(i,a,o),t.extent,d))}function T(){var t=k(this,arguments),n=U.event.changedTouches,e=n.length,r,i;GM();if(f)clearTimeout(f);f=setTimeout(function(){f=null},g);for(r=0;r<e;++r){i=n[r];if(t.touch0&&t.touch0[2]===i.identifier)delete t.touch0;else if(t.touch1&&t.touch1[2]===i.identifier)delete t.touch1}if(t.touch1&&!t.touch0)t.touch0=t.touch1,delete t.touch1;if(t.touch0)t.touch0[1]=this.__zoom.invert(t.touch0[0]);else t.end()}x.wheelDelta=function(t){return arguments.length?(a=typeof t==="function"?t:BM(+t),x):a};x.filter=function(t){return arguments.length?(u=typeof t==="function"?t:BM(!!t),x):u};x.touchable=function(t){return arguments.length?(n=typeof t==="function"?t:BM(!!t),x):n};x.extent=function(t){return arguments.length?(l=typeof t==="function"?t:BM([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),x):l};x.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],x):[o[0],o[1]]};x.translateExtent=function(t){return arguments.length?(d[0][0]=+t[0][0],d[1][0]=+t[1][0],d[0][1]=+t[0][1],d[1][1]=+t[1][1],x):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]};x.constrain=function(t){return arguments.length?(p=t,x):p};x.duration=function(t){return arguments.length?(s=+t,x):s};x.interpolate=function(t){return arguments.length?(h=t,x):h};x.on=function(){var t=e.on.apply(e,arguments);return t===e?x:t};x.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,x):Math.sqrt(m)};return x}U.version=t;U.bisect=v;U.bisectRight=v;U.bisectLeft=r;U.ascending=u;U.bisector=k;U.cross=a;U.descending=o;U.deviation=l;U.extent=g;U.histogram=N;U.thresholdFreedmanDiaconis=E;U.thresholdScott=j;U.thresholdSturges=C;U.max=O;U.mean=L;U.median=I;U.merge=P;U.min=R;U.pairs=i;U.permute=D;U.quantile=T;U.range=S;U.scan=z;U.shuffle=F;U.sum=B;U.ticks=b;U.tickIncrement=M;U.tickStep=A;U.transpose=q;U.variance=s;U.zip=Y;U.axisTop=it;U.axisRight=at;U.axisBottom=ot;U.axisLeft=ut;U.brush=Pu;U.brushX=Lu;U.brushY=Iu;U.brushSelection=Ou;U.chord=Yu;U.ribbon=is;U.nest=ss;U.set=vs;U.map=us;U.keys=gs;U.values=ys;U.entries=ms;U.color=Ge;U.rgb=Ze;U.hsl=Qe;U.lab=pr;U.hcl=_r;U.cubehelix=jr;U.dispatch=ct;U.drag=Ce;U.dragDisable=xe;U.dragEnable=_e;U.dsvFormat=Cs;U.csvParse=Ts;U.csvParseRows=Es;U.csvFormat=js;U.csvFormatRows=Os;U.tsvParse=Is;U.tsvParseRows=Ps;U.tsvFormat=Rs;U.tsvFormatRows=Ds;U.easeLinear=vo;U.easeQuad=mo;U.easeQuadIn=go;U.easeQuadOut=yo;U.easeQuadInOut=mo;U.easeCubic=wo;U.easeCubicIn=xo;U.easeCubicOut=_o;U.easeCubicInOut=wo;U.easePoly=So;U.easePolyIn=Mo;U.easePolyOut=ko;U.easePolyInOut=So;U.easeSin=Eo;U.easeSinIn=No;U.easeSinOut=To;U.easeSinInOut=Eo;U.easeExp=Lo;U.easeExpIn=jo;U.easeExpOut=Oo;U.easeExpInOut=Lo;U.easeCircle=Ro;U.easeCircleIn=Io;U.easeCircleOut=Po;U.easeCircleInOut=Ro;U.easeBounce=Wo;U.easeBounceIn=Xo;U.easeBounceOut=Wo;U.easeBounceInOut=Zo;U.easeBack=Qo;U.easeBackIn=Jo;U.easeBackOut=Ko;U.easeBackInOut=Qo;U.easeElastic=iu;U.easeElasticIn=ru;U.easeElasticOut=iu;U.easeElasticInOut=au;U.forceCenter=zs;U.forceCollide=lc;U.forceLink=dc;U.forceManyBody=_c;U.forceRadial=wc;U.forceSimulation=xc;U.forceX=bc;U.forceY=Mc;U.formatDefaultLocale=Bc;U.formatLocale=zc;U.formatSpecifier=Ic;U.precisionFixed=qc;U.precisionPrefix=Uc;U.precisionRound=Hc;U.geoArea=Df;U.geoBounds=pl;U.geoCentroid=ql;U.geoCircle=Kl;U.geoClipAntimeridian=ch;U.geoClipCircle=ph;U.geoClipExtent=mh;U.geoClipRectangle=yh;U.geoContains=Bh;U.geoDistance=jh;U.geoGraticule=Hh;U.geoGraticule10=Yh;U.geoInterpolate=Gh;U.geoLength=Nh;U.geoPath=Gp;U.geoAlbers=pd;U.geoAlbersUsa=vd;U.geoAzimuthalEqualArea=xd;U.geoAzimuthalEqualAreaRaw=md;U.geoAzimuthalEquidistant=wd;U.geoAzimuthalEquidistantRaw=_d;U.geoConicConformal=Cd;U.geoConicConformalRaw=Ad;U.geoConicEqualArea=hd;U.geoConicEqualAreaRaw=ld;U.geoConicEquidistant=jd;U.geoConicEquidistantRaw=Ed;U.geoEquirectangular=Td;U.geoEquirectangularRaw=Nd;U.geoGnomonic=Ld;U.geoGnomonicRaw=Od;U.geoIdentity=Pd;U.geoProjection=ud;U.geoProjectionMutator=sd;U.geoMercator=Md;U.geoMercatorRaw=bd;U.geoNaturalEarth1=Dd;U.geoNaturalEarth1Raw=Rd;U.geoOrthographic=Fd;U.geoOrthographicRaw=zd;U.geoStereographic=qd;U.geoStereographicRaw=Bd;U.geoTransverseMercator=Hd;U.geoTransverseMercatorRaw=Ud;U.geoRotation=Zl;U.geoStream=kf;U.geoTransform=Vp;U.cluster=Jd;U.hierarchy=lv;U.pack=Fv;U.packSiblings=Lv;U.packEnclose=xv;U.partition=Gv;U.stratify=Jv;U.tree=og;U.treemap=lg;U.treemapBinary=hg;U.treemapDice=Yv;U.treemapSlice=ug;U.treemapSliceDice=pg;U.treemapSquarify=fg;U.treemapResquarify=dg;U.interpolate=ni;U.interpolateArray=Vr;U.interpolateBasis=Ir;U.interpolateBasisClosed=Pr;U.interpolateDate=Xr;U.interpolateNumber=Wr;U.interpolateObject=Zr;U.interpolateRound=ei;U.interpolateString=ti;U.interpolateTransformCss=pi;U.interpolateTransformSvg=di;U.interpolateZoom=bi;U.interpolateRgb=Ur;U.interpolateRgbBasis=Yr;U.interpolateRgbBasisClosed=Gr;U.interpolateHsl=ki;U.interpolateHslLong=Si;U.interpolateLab=Ai;U.interpolateHcl=Ni;U.interpolateHclLong=Ti;U.interpolateCubehelix=ji;U.interpolateCubehelixLong=Oi;U.quantize=Li;U.path=Ku;U.polygonArea=vg;U.polygonCentroid=gg;U.polygonHull=_g;U.polygonContains=wg;U.polygonLength=bg;U.quadtree=ac;U.queue=jg;U.randomUniform=Lg;U.randomNormal=Ig;U.randomLogNormal=Pg;U.randomBates=Dg;U.randomIrwinHall=Rg;U.randomExponential=zg;U.request=Fg;U.html=Hg;U.json=Yg;U.text=Gg;U.xml=Vg;U.csv=Zg;U.tsv=$g;U.scaleBand=ey;U.scalePoint=iy;U.scaleIdentity=my;U.scaleLinear=yy;U.scaleLog=Ay;U.scaleOrdinal=ny;U.scaleImplicit=ty;U.scalePow=Ny;U.scaleSqrt=Ty;U.scaleQuantile=Ey;U.scaleQuantize=jy;U.scaleThreshold=Oy;U.scaleTime=m_;U.scaleUtc=x_;U.schemeCategory10=w_;U.schemeCategory20b=b_;U.schemeCategory20c=M_;U.schemeCategory20=k_;U.interpolateCubehelixDefault=S_;U.interpolateRainbow=T_;U.interpolateWarm=A_;U.interpolateCool=C_;U.interpolateViridis=j_;U.interpolateMagma=O_;U.interpolateInferno=L_;U.interpolatePlasma=I_;U.scaleSequential=P_;U.create=ue;U.creator=xt;U.local=ce;U.matcher=Tt;U.mouse=pe;U.namespace=gt;U.namespaces=vt;U.clientPoint=he;U.select=oe;U.selectAll=de;U.selection=ae;U.selector=wt;U.selectorAll=kt;U.style=cn;U.touch=ve;U.touches=ge;U.window=rn;U.customEvent=Kn;U.arc=rw;U.area=cw;U.line=sw;U.pie=hw;U.areaRadial=mw;U.radialArea=mw;U.lineRadial=yw;U.radialLine=yw;U.pointRadial=xw;U.linkHorizontal=Cw;U.linkVertical=Nw;U.linkRadial=Tw;U.symbol=Zw;U.symbols=Ww;U.symbolCircle=Ew;U.symbolCross=jw;U.symbolDiamond=Iw;U.symbolSquare=Bw;U.symbolStar=Fw;U.symbolTriangle=Uw;U.symbolWye=Xw;U.curveBasisClosed=nb;U.curveBasisOpen=rb;U.curveBasis=Qw;U.curveBundle=ab;U.curveCardinalClosed=fb;U.curveCardinalOpen=hb;U.curveCardinal=sb;U.curveCatmullRomClosed=yb;U.curveCatmullRomOpen=xb;U.curveCatmullRom=vb;U.curveLinearClosed=wb;U.curveLinear=aw;U.curveMonotoneX=Tb;U.curveMonotoneY=Eb;U.curveNatural=Lb;U.curveStep=Pb;U.curveStepAfter=Db;U.curveStepBefore=Rb;U.stack=qb;U.stackOffsetExpand=Ub;U.stackOffsetDiverging=Hb;U.stackOffsetNone=zb;U.stackOffsetSilhouette=Yb;U.stackOffsetWiggle=Gb;U.stackOrderAscending=Vb;U.stackOrderDescending=Wb;U.stackOrderInsideOut=Zb;U.stackOrderNone=Fb;U.stackOrderReverse=$b;U.timeInterval=Py;U.timeMillisecond=Ry;U.timeMilliseconds=Dy;U.utcMillisecond=Ry;U.utcMilliseconds=Dy;U.timeSecond=Hy;U.timeSeconds=Yy;U.utcSecond=Hy;U.utcSeconds=Yy;U.timeMinute=Gy;U.timeMinutes=Vy;U.timeHour=Xy;U.timeHours=Wy;U.timeDay=Zy;U.timeDays=$y;U.timeWeek=Ky;U.timeWeeks=am;U.timeSunday=Ky;U.timeSundays=am;U.timeMonday=Qy;U.timeMondays=om;U.timeTuesday=tm;U.timeTuesdays=um;U.timeWednesday=nm;U.timeWednesdays=sm;U.timeThursday=em;U.timeThursdays=cm;U.timeFriday=rm;U.timeFridays=fm;U.timeSaturday=im;U.timeSaturdays=lm;U.timeMonth=hm;U.timeMonths=pm;U.timeYear=dm;U.timeYears=vm;U.utcMinute=gm;U.utcMinutes=ym;U.utcHour=mm;U.utcHours=xm;U.utcDay=_m;U.utcDays=wm;U.utcWeek=Mm;U.utcWeeks=Em;U.utcSunday=Mm;U.utcSundays=Em;U.utcMonday=km;U.utcMondays=jm;U.utcTuesday=Sm;U.utcTuesdays=Om;U.utcWednesday=Am;U.utcWednesdays=Lm;U.utcThursday=Cm;U.utcThursdays=Im;U.utcFriday=Nm;U.utcFridays=Pm;U.utcSaturday=Tm;U.utcSaturdays=Rm;U.utcMonth=Dm;U.utcMonths=zm;U.utcYear=Fm;U.utcYears=Bm;U.timeFormatDefaultLocale=e_;U.timeFormatLocale=Ym;U.isoFormat=a_;U.isoParse=u_;U.now=Gi;U.timer=Wi;U.timerFlush=Zi;U.timeout=ta;U.interval=na;U.transition=lo;U.active=fu;U.interrupt=ga;U.voronoi=FM;U.zoom=QM;U.zoomTransform=YM;U.zoomIdentity=HM;Object.defineProperty(U,"__esModule",{value:true})});(function(t,n){typeof exports==="object"&&typeof module!=="undefined"?n(exports,require("d3-selection"),require("d3-drag"),require("d3-shape"),require("d3-dispatch")):typeof define==="function"&&define.amd?define(["exports","d3-selection","d3-drag","d3-shape","d3-dispatch"],n):n(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3)})(this,function(t,M,g,f,r){"use strict";var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var b=function(t,n){if(!(t instanceof n)){throw new TypeError("Cannot call a class as a function")}};var a=function(){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(t,n,e){if(n)r(t.prototype,n);if(e)r(t,e);return t}}();var h=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){t[r]=e[r]}}}return t};var o=function t(n,e,r){if(n===null)n=Function.prototype;var i=Object.getOwnPropertyDescriptor(n,e);if(i===undefined){var a=Object.getPrototypeOf(n);if(a===null){return undefined}else{return t(a,e,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var u=function(t,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(n)Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n};var s=function(t,n){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:t};var c=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}else{return Array.from(t)}};var y=function(){function w(t){var n=t.x,e=n===undefined?0:n,r=t.y,i=r===undefined?0:r,a=t.nx,o=t.ny,u=t.dy,s=u===undefined?0:u,c=t.dx,f=c===undefined?0:c,l=t.color,h=l===undefined?"grey":l,p=t.data,d=t.type,v=t.subject,g=t.connector,y=t.note,m=t.disable,x=t.id,_=t.className;b(this,w);this._dx=a!==undefined?a-e:f;this._dy=o!==undefined?o-i:s;this._x=e;this._y=i;this._color=h;this.id=x;this._className=_||"";this._type=d||"";this.data=p;this.note=y||{};this.connector=g||{};this.subject=v||{};this.disable=m||[]}a(w,[{key:"updatePosition",value:function t(){if(this.type.setPosition){this.type.setPosition();if(this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0){this.type.redrawSubject()}}}},{key:"clearComponents",value:function t(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function t(){if(this.type.setOffset){this.type.setOffset();if(this.type.connector.selectAll(":not(.handle)").nodes().length!==0){this.type.redrawConnector()}this.type.redrawNote()}}},{key:"className",get:function t(){return this._className},set:function t(n){this._className=n;if(this.type.setClassName)this.type.setClassName()}},{key:"type",get:function t(){return this._type},set:function t(n){this._type=n;this.clearComponents()}},{key:"x",get:function t(){return this._x},set:function t(n){this._x=n;this.updatePosition()}},{key:"y",get:function t(){return this._y},set:function t(n){this._y=n;this.updatePosition()}},{key:"color",get:function t(){return this._color},set:function t(n){this._color=n;this.updatePosition()}},{key:"dx",get:function t(){return this._dx},set:function t(n){this._dx=n;this.updateOffset()}},{key:"dy",get:function t(){return this._dy},set:function t(n){this._dy=n;this.updateOffset()}},{key:"nx",set:function t(n){this._dx=n-this._x;this.updateOffset()}},{key:"ny",set:function t(n){this._dy=n-this._y;this.updateOffset()}},{key:"offset",get:function t(){return{x:this._dx,y:this._dy}},set:function t(n){var e=n.x,r=n.y;this._dx=e;this._dy=r;this.updateOffset()}},{key:"position",get:function t(){return{x:this._x,y:this._y}},set:function t(n){var e=n.x,r=n.y;this._x=e;this._y=r;this.updatePosition()}},{key:"translation",get:function t(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function t(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};if(this.data&&Object.keys(this.data).length>0)n.data=this.data;if(this.type)n.type=this.type;if(this._className)n.className=this._className;if(Object.keys(this.connector).length>0)n.connector=this.connector;if(Object.keys(this.subject).length>0)n.subject=this.subject;if(Object.keys(this.note).length>0)n.note=this.note;return n}}]);return w}();var m=function(){function i(t){var n=t.annotations,e=t.accessors,r=t.accessorsInverse;b(this,i);this.accessors=e;this.accessorsInverse=r;this.annotations=n}a(i,[{key:"clearTypes",value:function t(n){this.annotations.forEach(function(t){t.type=undefined;t.subject=n&&n.subject||t.subject;t.connector=n&&n.connector||t.connector;t.note=n&&n.note||t.note})}},{key:"setPositionWithAccessors",value:function t(){var n=this;this.annotations.forEach(function(t){t.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function t(n){this.annotations.forEach(function(t){if(t.type){t.type.editMode=n;t.type.updateEditMode()}})}},{key:"updateDisable",value:function t(e){this.annotations.forEach(function(n){n.disable=e;if(n.type){e.forEach(function(t){if(n.type[t]){n.type[t].remove&&n.type[t].remove();n.type[t]=undefined}})}})}},{key:"updateTextWrap",value:function t(n){this.annotations.forEach(function(t){if(t.type&&t.type.updateTextWrap){t.type.updateTextWrap(n)}})}},{key:"updateText",value:function t(){this.annotations.forEach(function(t){if(t.type&&t.type.drawText){t.type.drawText()}})}},{key:"updateNotePadding",value:function t(n){this.annotations.forEach(function(t){if(t.type){t.type.notePadding=n}})}},{key:"json",get:function t(){var r=this;return this.annotations.map(function(n){var e=n.json;if(r.accessorsInverse&&n.data){e.data={};Object.keys(r.accessorsInverse).forEach(function(t){e.data[t]=r.accessorsInverse[t]({x:n.x,y:n.y})})}return e})}},{key:"noteNodes",get:function t(){return this.annotations.map(function(t){return h({},t.type.getNoteBBoxOffset(),{positionX:t.x,positionY:t.y})})}}]);return i}();var p=function t(n){var e=n.cx,r=e===undefined?0:e,i=n.cy,a=i===undefined?0:i;return{move:{x:r,y:a}}};var d=function t(n){var e=n.cx,r=e===undefined?0:e,i=n.cy,a=i===undefined?0:i,o=n.r1,u=n.r2,s=n.padding;var c={move:{x:r,y:a}};if(o!==undefined){c.r1={x:r+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}}if(u!==undefined){c.r2={x:r+u/Math.sqrt(2),y:a+u/Math.sqrt(2)}}if(s!==undefined){c.padding={x:r+o+s,y:a}}return c};var v=function t(n){var e=n.group,r=n.handles,i=n.r,a=i===undefined?10:i;var o=e.selectAll("circle.handle").data(r);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(g.drag().container(M.select("g.annotations").node()).on("start",function(t){return t.start&&t.start(t)}).on("drag",function(t){return t.drag&&t.drag(t)}).on("end",function(t){return t.end&&t.end(t)}));e.selectAll("circle.handle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r||a}).attr("class",function(t){return"handle "+(t.className||"")});o.exit().remove()};var x=function t(n,e){if(n==="dynamic"||n==="left"||n==="right"){if(e<0){n="top"}else{n="bottom"}}return n};var _=function t(n,e){if(n==="dynamic"||n==="top"||n==="bottom"){if(e<0){n="right"}else{n="left"}}return n};var w=["topBottom","top","bottom"];var k=["leftRight","left","right"];var S=function(t){var n=t.padding,e=n===undefined?0:n,r=t.bbox,i=r===undefined?{x:0,y:0,width:0,height:0}:r,a=t.align,o=t.orientation,u=t.offset,s=u===undefined?{x:0,y:0}:u;var c=-i.x;var f=0;if(w.indexOf(o)!==-1){a=_(a,s.x);if(s.y<0&&o==="topBottom"||o==="top"){f-=i.height+e}else{f+=e}if(a==="middle"){c-=i.width/2}else if(a==="right"){c-=i.width}}else if(k.indexOf(o)!==-1){a=x(a,s.y);if(s.x<0&&o==="leftRight"||o==="left"){c-=i.width+e}else{c+=e}if(a==="middle"){f-=i.height/2}else if(a==="top"){f-=i.height}}return{x:c,y:f}};var A=function t(n){var e=n.data,r=n.curve,i=r===undefined?f.curveLinear:r,a=n.canvasContext,o=n.className,u=n.classID;var s=f.line().curve(i);var c={type:"path",className:o,classID:u,data:e};if(a){s.context(a);c.pathMethods=s}else{c.attrs={d:s(e)}}return c};var C=function t(n){var e=n.data,r=n.canvasContext,i=n.className,a=n.classID;var o={type:"path",className:i,classID:a,data:e};var u=f.arc().innerRadius(e.innerRadius||0).outerRadius(e.outerRadius||e.radius||2).startAngle(e.startAngle||0).endAngle(e.endAngle||2*Math.PI);if(r){u.context(r);o.pathMethods=lineGen}else{o.attrs={d:u()}}return o};var N=function(t){var n=t.align,e=t.x,r=e===undefined?0:e,i=t.y,a=i===undefined?0:i,o=t.bbox,u=t.offset;n=x(n,u.y);if(n==="top"){a-=o.height}else if(n==="middle"){a-=o.height/2}var s=[[r,a],[r,a+o.height]];return{components:[A({data:s,className:"note-line"})]}};var T=function(t){var n=t.align,e=t.x,r=e===undefined?0:e,i=t.y,a=i===undefined?0:i,o=t.offset,u=t.bbox;n=_(n,o.x);if(n==="right"){r-=u.width}else if(n==="middle"){r-=u.width/2}var s=[[r,a],[r+u.width,a]];return{components:[A({data:s,className:"note-line"})]}};var E=function t(n){var e=n.type,r=n.subjectType;var i=e.annotation;var a=i.position;var o=i.x-a.x,u=o+i.dx,s=i.y-a.y,c=s+i.dy;var f=i.subject;if(r==="circle"&&(f.outerRadius||f.radius)){var l=Math.sqrt((o-u)*(o-u)+(s-c)*(s-c));var h=Math.asin(-c/l);var p=f.outerRadius||f.radius+(f.radiusPadding||0);o=Math.abs(Math.cos(h)*p)*(u<0?-1:1);s=Math.abs(Math.sin(h)*p)*(c<0?-1:1)}if(r==="rect"){var d=f.width,v=f.height;if(d>0&&i.dx>0||d<0&&i.dx<0){if(Math.abs(d)>Math.abs(i.dx))o=d/2;else o=d}if(v>0&&i.dy>0||v<0&&i.dy<0){if(Math.abs(v)>Math.abs(i.dy))s=v/2;else s=v}if(o===d/2&&s===v/2){o=u;s=c}}return[[o,s],[u,c]]};var j=function(t){var n=E(t);return{components:[A({data:n,className:"connector"})]}};var O=function(t){var n=t.type,e=t.subjectType;var r=n.annotation;var i=r.position;var a=r.x-i.x,o=a+r.dx,u=r.y-i.y,s=u+r.dy;var c=r.subject;if(e==="rect"){var f=c.width,l=c.height;if(f>0&&r.dx>0||f<0&&r.dx<0){if(Math.abs(f)>Math.abs(r.dx))a=f/2;else a=f}if(l>0&&r.dy>0||l<0&&r.dy<0){if(Math.abs(l)>Math.abs(r.dy))u=l/2;else u=l}if(a===f/2&&u===l/2){a=o;u=s}}var h=[[a,u],[o,s]];var p=s-u;var d=o-a;var v=o;var g=s;var y=s<u&&o>a||o<a&&s>u?-1:1;if(Math.abs(d)<Math.abs(p)){v=o;g=u+d*y}else{g=s;v=a+p*y}if(e==="circle"&&(c.outerRadius||c.radius)){var m=(c.outerRadius||c.radius)+(c.radiusPadding||0);var x=m/Math.sqrt(2);if(Math.abs(d)>x&&Math.abs(p)>x){a=x*(o<0?-1:1);u=x*(s<0?-1:1);h=[[a,u],[v,g],[o,s]]}else if(Math.abs(d)>Math.abs(p)){var _=Math.asin(-s/m);a=Math.abs(Math.cos(_)*m)*(o<0?-1:1);h=[[a,s],[o,s]]}else{var w=Math.acos(o/m);u=Math.abs(Math.sin(w)*m)*(s<0?-1:1);h=[[o,u],[o,s]]}}else{h=[[a,u],[v,g],[o,s]]}return{components:[A({data:h,className:"connector"})]}};var L=function(t){var e=t.type,r=t.connectorData,n=t.subjectType;if(!r){r={}}if(!r.points||typeof r.points==="number"){r.points=I(e.annotation.offset,r.points)}if(!r.curve){r.curve=f.curveCatmullRom}var i=[];if(e.editMode){var a=r.points.map(function(t,n){return h({},p({cx:t[0],cy:t[1]}),{index:n})});var o=function t(n){r.points[n][0]+=M.event.dx;r.points[n][1]+=M.event.dy;e.redrawConnector()};i=e.mapHandles(a.map(function(t){return h({},t.move,{drag:o.bind(e,t.index)})}))}var u=E({type:e,subjectType:n});u=[u[0]].concat(c(r.points),[u[1]]);var s=[A({data:u,curve:r.curve,className:"connector"})];return{components:s,handles:i}};var I=function t(n){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var r={x:n.x/(e+1),y:n.y/(e+1)};var i=[];var a=1;for(;a<=e;a++){i.push([r.x*a+a%2*20,r.y*a-a%2*20])}return i};var P=function(t){var n=t.annotation,e=t.start,r=t.end,i=t.scale,a=i===undefined?1:i;var o=n.position;if(!e){e=[n.dx,n.dy]}else{e=[-r[0]+e[0],-r[1]+e[1]]}if(!r){r=[n.x-o.x,n.y-o.y]}var u=r[0],s=r[1];var c=e[0];var f=e[1];var l=10*a;var h=16/180*Math.PI;var p=Math.atan(f/c);if(c<0){p+=Math.PI}var d=[[u,s],[Math.cos(p+h)*l+u,Math.sin(p+h)*l+s],[Math.cos(p-h)*l+u,Math.sin(p-h)*l+s],[u,s]];return{components:[A({data:d,className:"connector-end connector-arrow",classID:"connector-end"})]}};var R=function(t){var n=t.line,e=t.scale,r=e===undefined?1:e;var i=C({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});i.attrs.transform="translate("+n.data[0][0]+", "+n.data[0][1]+")";return{components:[i]}};var D=function(t){var r=t.subjectData,i=t.type;if(!r.radius&&!r.outerRadius){r.radius=20}var n=[];var e=C({data:r,className:"subject"});if(i.editMode){var a=d({r1:e.data.outerRadius||e.data.radius,r2:e.data.innerRadius,padding:r.radiusPadding});var o=function t(n){var e=r[n]+M.event.dx*Math.sqrt(2);r[n]=e;i.redrawSubject();i.redrawConnector()};var u=[h({},a.r1,{drag:o.bind(i,r.outerRadius!==undefined?"outerRadius":"radius")})];if(r.innerRadius){u.push(h({},a.r2,{drag:o.bind(i,"innerRadius")}))}n=i.mapHandles(u)}e.attrs["fill-opacity"]=0;return{components:[e],handles:n}};var z=function(t){var n=t.subjectData,e=t.type;if(!n.width){n.width=100}if(!n.height){n.height=100}var r=[];var i=n.width,a=n.height;var o=[[0,0],[i,0],[i,a],[0,a],[0,0]];var u=A({data:o,className:"subject"});if(e.editMode){var s=function t(){n.width=M.event.x;e.redrawSubject();e.redrawConnector()};var c=function t(){n.height=M.event.y;e.redrawSubject();e.redrawConnector()};var f=[{x:i,y:a/2,drag:s.bind(e)},{x:i/2,y:a,drag:c.bind(e)}];r=e.mapHandles(f)}u.attrs["fill-opacity"]=.1;return{components:[u],handles:r}};var F=function(t){var n=t.subjectData,e=t.type;var r=e.annotation.position;var i=(n.x1!==undefined?n.x1:r.x)-r.x,a=(n.x2!==undefined?n.x2:r.x)-r.x,o=(n.y1!==undefined?n.y1:r.y)-r.y,u=(n.y2!==undefined?n.y2:r.y)-r.y;var s=[[i,o],[a,u]];return{components:[A({data:s,className:"subject"})]}};var B=function(t){var n=t.subjectData,e=n===undefined?{}:n,r=t.type,i=r===undefined?{}:r;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var o=i.typeSettings&&i.typeSettings.subject;if(!e.radius){if(o&&o.radius){e.radius=o.radius}else{e.radius=14}}if(!e.x){if(o&&o.x){e.x=o.x}}if(!e.y){if(o&&o.y){e.y=o.y}}var u=[];var s=[];var c=e.radius;var f=c*.7;var l=0;var h=0;var p=Math.sqrt(2)*c;var d={xleftcorner:-c,xrightcorner:c,ytopcorner:-c,ybottomcorner:c,xleft:-p,xright:p,ytop:-p,ybottom:p};if(e.x&&!e.y){l=d["x"+e.x]}else if(e.y&&!e.x){h=d["y"+e.y]}else if(e.x&&e.y){l=d["x"+e.x+"corner"];h=d["y"+e.y+"corner"]}var v="translate("+l+", "+h+")";var g=C({className:"subject",data:{radius:c}});g.attrs.transform=v;g.attrs.fill=a.color;g.attrs["stroke-linecap"]="round";g.attrs["stroke-width"]="3px";var y=C({className:"subject-ring",data:{outerRadius:c,innerRadius:f}});y.attrs.transform=v;y.attrs["stroke-width"]="3px";y.attrs.fill="white";var m=void 0;if(l&&h||!l&&!h){m=A({className:"subject-pointer",data:[[0,0],[l||0,0],[0,h||0],[0,0]]})}else if(l||h){var x=function t(n){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return n&&n/Math.sqrt(2)/Math.sqrt(2)||e*c/Math.sqrt(2)};m=A({className:"subject-pointer",data:[[0,0],[x(l),x(h)],[x(l,-1),x(h,-1)],[0,0]]})}if(m){m.attrs.fill=a.color;m.attrs["stroke-linecap"]="round";m.attrs["stroke-width"]="3px";s.push(m)}if(i.editMode){var _=function t(){e.x=M.event.x<-c*2?"left":M.event.x>c*2?"right":undefined;e.y=M.event.y<-c*2?"top":M.event.y>c*2?"bottom":undefined;i.redrawSubject()};var w={x:l*2,y:h*2,drag:_.bind(i)};if(!w.x&&!w.y){w.y=-c}u=i.mapHandles([w])}var b=void 0;if(e.text){b={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:e.text,"text-anchor":"middle",dy:".25em",x:l,y:h}}}s.push(g);s.push(y);s.push(b);return{components:s,handles:u}};var n=function(){function s(t){var n=t.a,e=t.annotation,r=t.editMode,i=t.dispatcher,a=t.notePadding,o=t.accessors;b(this,s);this.a=n;this.note=e.disable.indexOf("note")===-1&&n.select("g.annotation-note");this.noteContent=this.note&&n.select("g.annotation-note-content");this.connector=e.disable.indexOf("connector")===-1&&n.select("g.annotation-connector");this.subject=e.disable.indexOf("subject")===-1&&n.select("g.annotation-subject");this.dispatcher=i;if(i){var u=J.bind(null,i,e);u({component:this.note,name:"note"});u({component:this.connector,name:"connector"});u({component:this.subject,name:"subject"})}this.annotation=e;this.editMode=e.editMode||r;this.notePadding=a!==undefined?a:3;this.offsetCornerX=0;this.offsetCornerY=0;if(o&&e.data){this.init(o)}}a(s,[{key:"init",value:function t(n){if(!this.annotation.x){this.mapX(n)}if(!this.annotation.y){this.mapY(n)}}},{key:"mapY",value:function t(n){if(n.y){this.annotation.y=n.y(this.annotation.data)}}},{key:"mapX",value:function t(n){if(n.x){this.annotation.x=n.x(this.annotation.data)}}},{key:"updateEditMode",value:function t(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function t(h,n){var p=this;if(!Array.isArray(n)){n=[n]}n.filter(function(t){return t}).forEach(function(t){var n=t.type,e=t.className,r=t.attrs,i=t.handles,a=t.classID;if(n==="handle"){v({group:h,r:r&&r.r,handles:i})}else{$(h,[p.annotation],n,e,a);var o=h.select(n+"."+(a||e));var u=Object.keys(r);var s=[];var c=o.node().attributes;for(var f=c.length-1;f>=0;f--){var l=c[f].name;if(u.indexOf(l)===-1&&l!=="class")s.push(l)}u.forEach(function(t){if(t==="text"){o.text(r[t])}else{o.attr(t,r[t])}});s.forEach(function(t){return o.attr(t,null)})}})}},{key:"getNoteBBox",value:function t(){return Q(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function t(){var n=Q(this.note,".annotation-note-content");var e=this.noteContent.attr("transform").split(/\(|\,|\)/g);n.offsetCornerX=parseFloat(e[1])+this.annotation.dx;n.offsetCornerY=parseFloat(e[2])+this.annotation.dy;n.offsetX=this.annotation.dx;n.offsetY=this.annotation.dy;return n}},{key:"drawSubject",value:function t(){var n=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=this.annotation.subject;var i=e.type;var a={type:this,subjectData:r};var o={};if(i==="circle")o=D(a);else if(i==="rect")o=z(a);else if(i==="threshold")o=F(a);else if(i==="badge")o=B(a,this.annotation);var u=o,s=u.components,c=s===undefined?[]:s,f=u.handles,l=f===undefined?[]:f;c.forEach(function(t){if(t&&t.attrs&&!t.attrs.stroke){t.attrs.stroke=n.annotation.color}});if(this.editMode){l=l.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}]));c.push({type:"handle",handles:l})}return c}},{key:"drawConnector",value:function t(){var n=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=this.annotation.connector;var i=r.type||e.type;var a={type:this,connectorData:r};a.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var o={};if(i==="curve")o=L(a);else if(i==="elbow")o=O(a);else o=j(a);var u=o,s=u.components,c=s===undefined?[]:s,f=u.handles,l=f===undefined?[]:f;var h=c[0];if(h){h.attrs.stroke=this.annotation.color;h.attrs.fill="none"}var p=r.end||e.end;var d={};if(p==="arrow"){var v=h.data[1];var g=h.data[0];var y=Math.sqrt(Math.pow(v[0]-g[0],2)+Math.pow(v[1]-g[1],2));if(y<5&&h.data[2]){v=h.data[2]}d=P({annotation:this.annotation,start:v,end:g,scale:r.endScale})}else if(p==="dot"){d=R({line:h,scale:r.endScale})}else if(!p||p==="none"){this.connector&&this.connector.select(".connector-end").remove()}if(d.components){d.components.forEach(function(t){t.attrs.fill=n.annotation.color;t.attrs.stroke=n.annotation.color});c=c.concat(d.components)}if(this.editMode){if(l.length!==0)c.push({type:"handle",handles:l})}return c}},{key:"drawNote",value:function t(){var n=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=this.annotation.note;var i=r.align||e.align||"dynamic";var a={bbox:e.bbox,align:i,offset:this.annotation.offset};var o=r.lineType||e.lineType;var u={};if(o==="vertical")u=N(a);else if(o==="horizontal")u=T(a);var s=u,c=s.components,f=c===undefined?[]:c,l=s.handles,h=l===undefined?[]:l;f.forEach(function(t){t.attrs.stroke=n.annotation.color});if(this.editMode){h=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]);f.push({type:"handle",handles:h});var p=this.dragNote.bind(this),d=this.dragstarted.bind(this),v=this.dragended.bind(this);this.note.call(g.drag().container(M.select("g.annotations").node()).on("start",function(t){return d(t)}).on("drag",function(t){return p(t)}).on("end",function(t){return v(t)}))}else{this.note.on("mousedown.drag",null)}return f}},{key:"drawNoteContent",value:function t(n){var e=this.annotation.note;var r=e.padding!==undefined?e.padding:this.notePadding;var i=e.orientation||n.orientation||"topBottom";var a=e.lineType||n.lineType;var o=e.align||n.align||"dynamic";if(a==="vertical")i="leftRight";else if(a==="horizontal")i="topBottom";var u={padding:r,bbox:n.bbox,offset:this.annotation.offset,orientation:i,align:o};var s=S(u),c=s.x,f=s.y;this.offsetCornerX=c+this.annotation.dx;this.offsetCornerY=f+this.annotation.dy;this.note&&this.noteContent.attr("transform","translate("+c+", "+f+")");return[]}},{key:"drawOnScreen",value:function t(n,e){return this.drawOnSVG(n,e)}},{key:"redrawSubject",value:function t(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function t(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n}));this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function t(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function t(){this.subject&&this.subject.select("*").remove();this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function t(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function t(n){if(n&&this.annotation.data){this.mapX(n);this.mapY(n)}this.setPosition()}},{key:"setClassName",value:function t(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function t(){this.setClassName();this.setPosition();this.setOffset();this.redrawSubject();this.redrawConnector();this.redrawNote()}},{key:"dragstarted",value:function t(){M.event.sourceEvent.stopPropagation();this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation);this.a.classed("dragging",true);this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function t(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation);this.a.classed("dragging",false);this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function t(){var n=this.annotation.position;n.x+=M.event.dx;n.y+=M.event.dy;this.annotation.position=n}},{key:"dragNote",value:function t(){var n=this.annotation.offset;n.x+=M.event.dx;n.y+=M.event.dy;this.annotation.offset=n}},{key:"mapHandles",value:function t(n){var e=this;return n.map(function(t){return h({},t,{start:e.dragstarted.bind(e),end:e.dragended.bind(e)})})}}]);return s}();var e=function t(n,e,i){return function(t){u(r,t);function r(t){b(this,r);var n=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));n.typeSettings=e;if(e.disable){e.disable.forEach(function(t){n[t]&&n[t].remove();n[t]=undefined;if(t==="note"){n.noteContent=undefined}})}return n}a(r,[{key:"className",value:function t(){return""+(e.className||o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this)&&o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function t(n){this.typeSettings.subject=h({},e.subject,this.typeSettings.subject);return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawSubject",this).call(this,h({},n,this.typeSettings.subject))}},{key:"drawConnector",value:function t(n){this.typeSettings.connector=h({},e.connector,this.typeSettings.connector);return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawConnector",this).call(this,h({},n,e.connector,this.typeSettings.connector))}},{key:"drawNote",value:function t(n){this.typeSettings.note=h({},e.note,this.typeSettings.note);return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNote",this).call(this,h({},n,e.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function t(n){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNoteContent",this).call(this,h({},n,e.note,this.typeSettings.note))}}],[{key:"init",value:function t(n,e){o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,n,e);if(i){n=i(n,e)}return n}}]);return r}(n)};var i=function(t){u(e,t);function e(t){b(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.textWrap=t.textWrap||120;n.drawText();return n}a(e,[{key:"updateTextWrap",value:function t(n){this.textWrap=n;this.drawText()}},{key:"drawText",value:function t(){if(this.note){$(this.note,[this.annotation],"g","annotation-note-content");var n=this.note.select("g.annotation-note-content");$(n,[this.annotation],"rect","annotation-note-bg");$(n,[this.annotation],"text","annotation-note-label");$(n,[this.annotation],"text","annotation-note-title");var e={height:0};var r=this.a.select("text.annotation-note-label");var i=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap;var a=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter;var o=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding;var u={top:0,bottom:0,left:0,right:0};if(typeof o==="number"){u={top:o,bottom:o,left:o,right:o}}else if(o&&(typeof o==="undefined"?"undefined":l(o))==="object"){u=h(u,o)}if(this.annotation.note.title){var s=this.a.select("text.annotation-note-title");s.text(this.annotation.note.title);s.attr("fill",this.annotation.color);s.attr("font-weight","bold");s.call(K,i,a);e=s.node().getBBox()}r.text(this.annotation.note.label).attr("dx","0");r.call(K,i,a);r.attr("y",e.height*1.1||0);r.attr("fill",this.annotation.color);var c=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",c.width+u.left+u.right).attr("height",c.height+u.top+u.bottom).attr("x",c.x-u.left).attr("y",-u.top).attr("fill","white").attr("fill-opacity",0)}}}]);return e}(n);var q=e(i,{className:"label",note:{align:"middle"}});var U=e(i,{className:"callout",note:{lineType:"horizontal"}});var H=e(U,{className:"callout elbow",connector:{type:"elbow"}});var Y=e(U,{className:"callout curve",connector:{type:"curve"}});var G=e(n,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});var V=e(i,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var X=e(i,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var W=function(t){u(r,t);function r(){b(this,r);return s(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}a(r,[{key:"mapY",value:function t(n){o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"mapY",this).call(this,n);var e=this.annotation;if((e.subject.x1||e.subject.x2)&&e.data&&n.y){e.y=n.y(e.data)}if((e.subject.x1||e.subject.x2)&&!e.x){e.x=e.subject.x1||e.subject.x2}}},{key:"mapX",value:function t(n){o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"mapX",this).call(this,n);var e=this.annotation;if((e.subject.y1||e.subject.y2)&&e.data&&n.x){e.x=n.x(e.data)}if((e.subject.y1||e.subject.y2)&&!e.y){e.y=e.subject.y1||e.subject.y2}}}]);return r}(U);var Z=e(W,{className:"callout xythreshold",subject:{type:"threshold"}});var $=function t(n,e,r,i,a){var o=n.selectAll(r+"."+(a||i)).data(e);o.enter().append(r).merge(o).attr("class",i);o.exit().remove();return n};var J=function t(n,e,r){var i=r.component,a=r.name;if(i){i.on("mouseover.annotations",function(){n.call(a+"over",i,e)}).on("mouseout.annotations",function(){return n.call(a+"out",i,e)}).on("click.annotations",function(){return n.call(a+"click",i,e)})}};var K=function t(n,a,o){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1.2;n.each(function(){var t=M.select(this),n=t.text().split(o||/[ \t\r\n]+/).reverse().filter(function(t){return t!==""});var e=void 0,r=[],i=t.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");while(e=n.pop()){r.push(e);i.text(r.join(" "));if(i.node().getComputedTextLength()>a&&r.length>1){r.pop();i.text(r.join(" "));r=[e];i=t.append("tspan").attr("x",0).attr("dy",u+"em").text(e)}}})};var Q=function t(n){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:":not(.handle)";if(!n){return{x:0,y:0,width:0,height:0}}return n.selectAll(e).nodes().reduce(function(t,n){var e=n.getBBox();t.x=Math.min(t.x,e.x);t.y=Math.min(t.y,e.y);t.width=Math.max(t.width,e.width);var r=n&&n.attributes&&n.attributes.y;t.height=Math.max(t.height,(r&&parseFloat(r.value)||0)+e.height);return t},{x:0,y:0,width:0,height:0})};function tt(){var a=[],o=void 0,n=void 0,u=[],s={},c={},f=false,l=void 0,h=U,p=void 0,d=void 0,v=r.dispatch("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),g=void 0;var e=function t(n){g=n;if(!f){n.selectAll("circle.handle").remove()}var e=a.map(function(t){if(!t.type){t.type=h}if(!t.disable){t.disable=u}return new y(t)});o=o||new m({annotations:e,accessors:s,accessorsInverse:c,ids:l});var r=n.selectAll("g").data([o]);r.enter().append("g").attr("class","annotations");var i=n.select("g.annotations");$(i,o.annotations,"g","annotation");var t=i.selectAll("g.annotation");t.each(function(t){var n=M.select(this);n.attr("class","annotation");$(n,[t],"g","annotation-connector");$(n,[t],"g","annotation-subject");$(n,[t],"g","annotation-note");$(n.select("g.annotation-note"),[t],"g","annotation-note-content");t.type=t.type.toString()==="[object Object]"?t.type:new t.type({a:n,annotation:t,textWrap:p,notePadding:d,editMode:f,dispatcher:v,accessors:s});t.type.draw();t.type.drawText&&t.type.drawText()})};e.json=function(){console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",o.json);window.copy(JSON.stringify(o.json.map(function(t){delete t.type;return t})));return e};e.update=function(){if(a&&o){a=o.annotations.map(function(t){t.type.draw();return t})}return e};e.updateText=function(){if(o){o.updateText(p);a=o.annotations}return e};e.updatedAccessors=function(){o.setPositionWithAccessors();a=o.annotations;return e};e.disable=function(t){if(!arguments.length)return u;u=t;if(o){o.updateDisable(u);a=o.annotations}return e};e.textWrap=function(t){if(!arguments.length)return p;p=t;if(o){o.updateTextWrap(p);a=o.annotations}return e};e.notePadding=function(t){if(!arguments.length)return d;d=t;if(o){o.updateNotePadding(d);a=o.annotations}return e};e.type=function(t,n){if(!arguments.length)return h;h=t;if(o){o.annotations.map(function(t){t.type.note&&t.type.note.selectAll("*:not(.annotation-note-content)").remove();t.type.noteContent&&t.type.noteContent.selectAll("*").remove();t.type.subject&&t.type.subject.selectAll("*").remove();t.type.connector&&t.type.connector.selectAll("*").remove();t.type.typeSettings={};t.type=h;t.subject=n&&n.subject||t.subject;t.connector=n&&n.connector||t.connector;t.note=n&&n.note||t.note});a=o.annotations}return e};e.annotations=function(t){if(!arguments.length)return o&&o.annotations||a;a=t;if(o&&o.annotations){var n=a.some(function(t){return!t.type||t.type.toString()!=="[object Object]"});if(n){o=null;e(g)}else{o.annotations=a}}return e};e.context=function(t){if(!arguments.length)return n;n=t;return e};e.accessors=function(t){if(!arguments.length)return s;s=t;return e};e.accessorsInverse=function(t){if(!arguments.length)return c;c=t;return e};e.ids=function(t){if(!arguments.length)return l;l=t;return e};e.editMode=function(t){if(!arguments.length)return f;f=t;if(g){g.selectAll("g.annotation").classed("editable",f)}if(o){o.editMode(f);a=o.annotations}return e};e.collection=function(t){if(!arguments.length)return o;o=t;return e};e.on=function(){var t=v.on.apply(v,arguments);return t===v?e:t};return e}var nt={annotation:tt,annotationTypeBase:n,annotationLabel:q,annotationCallout:U,annotationCalloutCurve:Y,annotationCalloutElbow:H,annotationCalloutCircle:V,annotationCalloutRect:X,annotationXYThreshold:Z,annotationBadge:G,annotationCustomType:e};t.annotation=tt;t.annotationTypeBase=n;t.annotationLabel=q;t.annotationCallout=U;t.annotationCalloutCurve=Y;t.annotationCalloutElbow=H;t.annotationCalloutCircle=V;t.annotationCalloutRect=X;t.annotationXYThreshold=Z;t.annotationBadge=G;t.annotationCustomType=e;t["default"]=nt;Object.defineProperty(t,"__esModule",{value:true})});(function(t,n){if(typeof define==="function"&&define.amd){define(["d3"],n)}else if(typeof exports==="object"){module.exports=n(require("d3"))}else{t.markmap=n(t.d3)}})(this,function(P){var t=/[,;\n\rã€‚ï¼Œï¼›]/;var o=/([,;\n\rã€‚ï¼Œï¼›])/;var u=/[\n\r]/;var R=5;var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var r=function(t){t=t.replace(/[\\]?\|/g,function(t){if(t.length===2){return"|"}else{return"\n"}});t=t.replace(/[\\]{1,2}n/g,function(t){if(t.length===3){return"\\n"}else{return"\n"}});return t};var i=function(t){if(t instanceof Array){return t}if(typeof t=="number"){t=t+""}if(typeof t=="string"){var n=[];var e=t.split(",");e.forEach(function(t){t=t.trim();if(/^\d+$|^[A-Za-z]+$/.test(t)){n.push(t)}});return n}return[]};var a=function(t){if(t instanceof Array){return t}if(typeof t=="number"){t=t+""}if(typeof t=="string"){return[t]}return[]};var e=function(n){var e=function(t){return n[t]};var t="(?:"+Object.keys(n).join("|")+")";var r=RegExp(t);var i=RegExp(t,"g");return function(t){t=t==null?"":""+t;return r.test(t)?t.replace(i,e):t}};_escape=e(n);function D(t,n){if(t.layoutDirection==="H"){if(n.side==="right"){return"LR"}else{return"RL"}}if(t.layoutDirection==="V"){if(n.side==="right"){return"TB"}else{return"BT"}}return t.layoutDirection}function s(n){return function(t){var r=t.colorSetMode||"branch";var i=P.scaleOrdinal(n);return function(t,n){var e=t;if(r==="depth"){e=n.depth}e=e||0;return i(e)}}}var c=Object.assign||function(t,n){for(var e in n){if(n.hasOwnProperty(e)){t[e]=n[e]}}return t};var f=0;var l="";var _=50;function z(t,n){if(t=="M"&&n==l){return f}var e=z.canvas||(z.canvas=document.createElement("canvas"));var r=e.getContext("2d");r.font=n;var i=r.measureText(t);if(t=="M"&&l!=n){if(i.width<_){_=i.width}l=n;f=i.width}return i.width}function h(t,n,e){t.branch=n;if(t.children){t.children.forEach(function(t){h(t,n,e)})}}function p(t){if(t.children){t.children.forEach(p);t.children=[{name:"",dummy:true,children:t.children}]}}function d(r,t){r.name=r.name.replace(/^([!]+)\s+/,function(t,n){if(r.depth!=0){var e=n.length;if(e===1){r.important=true}if(e===2){r.importantPath=true}if(e>2){r.important=true;r.importantPath=true}}return""});r.name=r.name.replace(/^!\*\s+/,function(){r.rangeNode=true;return""});r.name=r.name.replace(/^\*\*(.*)\*\*$/,function(t,n){r.important=true;return n})}function v(e,t){e.name=e.name.replace(/\s+#([A-Za-z]+)$/,function(t,n){e.customKey=n;return""})}function g(t,n){var e=t.name.split(o);if(e.length===1){t.names=[t.name]}resultTexts=[];for(var r=0;r<e.length;r+=2){var i=e[r];var a=e[r+1]||"";if(u.test(a)){a=""}i=i+a;resultTexts.push(i);t.names=resultTexts}}function y(n,e){d(n,e);v(n);n.name=r(n.name);g(n,e);if(n.children){n.children.forEach(function(t){t.parent=n;y(t,e)})}}function m(t,n,e){if(!(this instanceof m))return new m(t,n,e);this.init(t,n,e)}function F(t){var n=t.depth;if(t.name!==""&&t.children&&t.children.length===1&&t.children[0].name===""){n+=1}if(t.data.importantPath){return 6}return Math.max(6-2*n,1)}function B(t,n){if(t.data){t=t.data}var e=t.depth;var r=n.fontSizeSet;var i=n.fontFamilySet;var a=r[e]||r[r.length-1]||"14";if(t.depth>0){if(t.important||t.importantPath){a=parseInt(a)+5}}var o=i[e]||i[i.length-1]||"sans-serif";return a+"px "+o}var x={color:"gray",colorSet:null,colorSetMode:"branch",fontSizeSet:[30,20,15],fontFamilySet:[],linkShape:"diagonal",layoutDirection:"LR",fixForLink:true,arrowSharp:5,arrowGap:1};c(m.prototype,{getInitialState:function(){return{layoutDirection:"LR",arrowSharp:5,arrowGap:1,zoomScale:1,zoomTranslate:[0,0],depthMaxSize:{},nodeFont:"14px sans-serif"}},presets:{default:x,colorful:c(c({},x),{renderer:"basic",color:"category20"})},helperNames:["linkShape","color"],linkShapes:{diagonal:function(){return function(t,n){var e=D(t,n.target);var r=null;var i=null;switch(e){case"LR":r={x:n.source.x+(n.source.width-n.source.hgap),y:n.source.y+n.source.vgap,gap:n.source.hgap};i={x:n.target.x+n.target.hgap,y:n.target.y+n.target.vgap,gap:n.target.hgap};break;case"RL":r={x:n.source.x+n.source.hgap,y:n.source.y+n.source.vgap,gap:n.source.hgap};i={x:n.target.x+(n.target.width-n.target.hgap),y:n.target.y+n.target.vgap,gap:n.target.hgap};break;case"TB":r={x:n.source.x+n.source.hgap,y:n.source.y+(n.source.height-n.source.vgap),gap:n.source.vgap};i={x:n.target.x+n.target.hgap,y:n.target.y+n.target.vgap,gap:n.target.vgap};break;case"BT":r={x:n.source.x+n.source.hgap,y:n.source.y+n.source.vgap,gap:n.source.vgap};i={x:n.target.x+n.target.hgap,y:n.target.y+(n.target.height-n.target.vgap),gap:n.target.vgap};break}var a="";switch(e){case"BT":a="M"+r.x+","+r.y+" L"+r.x+","+(r.y-t.arrowSharp)+" C"+r.x+","+(r.y-r.gap-t.arrowSharp)+" "+i.x+","+(i.y+i.gap)+" "+i.x+","+i.y+" L"+i.x+","+(i.y-2);break;case"TB":a="M"+r.x+","+r.y+" L"+r.x+","+(r.y+t.arrowSharp)+" C"+r.x+","+(r.y+r.gap+t.arrowSharp)+" "+i.x+","+(i.y-i.gap)+" "+i.x+","+i.y+" L"+i.x+","+(i.y+2);break;case"RL":a="M"+r.x+","+r.y+" L"+(r.x-t.arrowSharp)+","+r.y+" C"+(r.x-r.gap-t.arrowSharp)+","+r.y+" "+(i.x+i.gap)+","+i.y+" "+i.x+","+i.y+" L"+(i.x-2)+","+i.y;break;default:a="M"+r.x+","+r.y+" L"+(r.x+t.arrowSharp)+","+r.y+" C"+(r.x+r.gap+t.arrowSharp)+","+r.y+" "+(i.x-i.gap)+","+i.y+" "+i.x+","+i.y+" L"+(i.x+2)+","+i.y}return a}},bracket:function(){return function(t){return"M"+t.source.x+","+t.source.y+"V"+t.target.y+"H"+t.target.x}}},colors:c({gray:function(){return function(){return"#929292"}}},{category10:s(P.schemeCategory10),category20:s(["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"]),category20b:s(P.schemeCategory20b),category20c:s(P.schemeCategory20c),custom:function(t){var r=t.colorSet||[];var i=t.colorSetMode||"branch";var a=r.length;if(a<=0){a=1;r=["#929292"]}return function(t,n){t=t||0;var e=t%a;if(i==="depth"){e=n.depth%a}return r[e]}}}),init:function(t,n,e){this.elementSvg=document.querySelector(t);this.roughSvg=rough.svg(this.elementSvg);e=e||{};t=t.datum?t:P.select(t);this.helpers={};this.i=0;var r=this.state=this.getInitialState();this.colorSet=null;this.colorSetMode="branch";if(e.colorSet&&e.colorSet.length>0){e.color="custom";this.colorSet=e.colorSet}if(["branch","depth"].indexOf(e.colorSetMode)>=0){this.colorSetMode=e.colorSetMode}this.set(this.presets[e.preset||"default"]);this.set(e);t.attr("class","xsj_svg_viewbox");this.containerSvg=t;this.svg=t.append("g");this.setData(n);this.update(r.root)},updateZoom:function(t,n){var e=this.state;e.zoomTranslate=t;e.zoomScale=n;this.svg.attr("transform","translate("+e.zoomTranslate+")"+" scale("+e.zoomScale+")")},set:function(n){if(n.preset){this.set(this.presets[n.preset])}var e=this.state;var r=this.helpers;this.helperNames.forEach(function(t){if(!r[t]||n[t]&&n[t]!==e[t]){r[t]=this[t+"s"][n[t]||e[t]](this)}}.bind(this));c(e,n||{});e.importantNodes=i(n.importantNodes);e.importantPaths=i(n.importantPaths);e.rangeNodes=i(n.rangeNodes);e.annotations=a(n.annotations);e.relations=a(n.relations);return this},setData:function(t){var e=this.state;var n=0;var r=function(t){t.id=++n;if(t.children&&t.children.length>0){t.children.forEach(r)}};r(t);y(t,e);if(t.children){t.children.forEach(function(t,n){h(t,n,e)})}var e=this.state;e.root=t;return this},update:function(t){var w=this.state;t=t||w.root;var n=this.layout(w);w.rangeNodeInfos=[];w.relationInfos=[];w.annotationInfos=[];function a(t){var n=[];function i(t,n,e){var r=D(w,t);if(!n||n.children[0]==t){switch(r){case"RL":e.push([t.x+t.width,t.y-5]);break;case"TB":e.push([t.x,t.y-5]);break;case"BT":e.push([t.x,t.y+t.height-t.vgap/2]);break;default:e.push([t.x+t.hgap,t.y-5])}}if(t.children&&t.children.length>0){t.children.forEach(function(t,n){i(t,t.parent,e)})}else{switch(r){case"RL":e.push([t.x+t.hgap,t.y-5]);e.push([t.x+t.hgap,t.y+t.height-t.vgap*2]);break;case"TB":e.push([t.x,t.y+t.height-t.vgap/2]);e.push([t.x+t.width-t.hgap,t.y+t.height-t.vgap/2]);break;case"BT":e.push([t.x,t.y-5]);e.push([t.x+t.width-t.hgap,t.y-5]);break;default:e.push([t.x+t.width,t.y-5]);e.push([t.x+t.width,t.y+t.height-t.vgap*2])}}if(!n||n.children[n.children.length-1]==t){switch(r){case"RL":e.push([t.x+t.width,t.y+t.height-t.vgap*2]);break;case"TB":e.push([t.x+t.width-t.hgap,t.y-5]);break;case"BT":e.push([t.x+t.width-t.hgap,t.y+t.height-t.vgap/2]);break;default:e.push([t.x+t.hgap,t.y+t.height-t.vgap*2])}}}i(t,null,n);return n}var b={};function e(t){var i=w.rangeNodeInfos;t.forEach(function(t){b[t.id]=t;if(t.data.customKey){b[t.data.customKey]=t}if(w.importantNodes.indexOf(t.id)>=0||w.importantNodes.indexOf(t.data.customKey)>=0){t.data.important=true}if(w.importantPaths.indexOf(t.id)>=0||w.importantPaths.indexOf(t.data.customKey)>=0){t.data.importantPath=true}if(!!t.data.importantPath){var n=t.data.parent;while(n){n.importantPath=true;n=n.parent}}if(w.rangeNodes.indexOf(t.id)>=0||w.rangeNodes.indexOf(t.data.customKey)>=0){t.data.rangeNode=true}if(t.data.rangeNode){var e=a(t);var r={rangeNodes:e,node:t};i.push(r)}})}w.mapNodeObj=b;e(n.nodes);var r=w.relations||[];var l=w.relationInfos;function i(){r.forEach(function(t,f){t=t||"";var n=function(t){var n=t.split(/:(.+)/);var e=n[0];var r=n[1]||"";var i=e.split(/([,<>])/);if(i.length==3){var a=b[i[0].trim()];var o=b[i[2].trim()];var u=i[1].trim();var s="normal";if(u=="<"){s="right";var c=a;a=o;o=c}else if(u==">"){s="right"}else{diretion="normal"}if(a&&o){l.push({id:"relation_"+f,startNode:a,endNode:o,note:r,direction:s})}}};if(typeof t=="string"){n(t)}if(t instanceof Object){for(var e in t){n(e+":"+t[e])}}})}i();var o=w.annotations||[];var M=w.annotationInfos;function u(g,y,m,x){var _={minX:g,maxX:y,minY:m,maxY:x};o.forEach(function(t,v){t=t||"";var n=function(t){var n=t.split(/:(.+)/);if(n.length==3){var e=n[0];var r=n[1]||"";var i=e.split(",");var a=[];var o=function(t){return t.reduce(function(t,n){var e=D(w,n)||"LR";t[e]=t[e]||[];t[e].push(n);return t},{})};i.forEach(function(t,n){var e=b[t.trim()];if(e){a.push(e)}});if(a.length>0){var u=o(a);var s=[];var c="LR";for(var f in u){var l=u[f];if(l.length>s){s=l;c=f}}var h=s[0];var p=w.mapNodeObj[1];var d={};switch(c){case"TB":if(p.x<h.x){d={align:"top",lineType:"vertical",x:h.x-h.width,y:x+50}}else{d={align:"top",lineType:"vertical",x:h.x+h.width,y:x+50}}_.maxY=x+50;break;case"BT":if(p.x<h.x){d={align:"bottom",lineType:"vertical",x:h.x-h.width,y:m}}else{d={align:"bottom",lineType:"vertical",x:h.x+h.width,y:m}}_.minY=m-30;break;case"RL":if(p.y<h.y){d={align:"left",x:g-100,y:h.y-h.height}}else{d={align:"left",x:g-100,y:h.y+h.height}}_.minX=g-100;break;default:if(p.y<h.y){d={align:"right",x:y+100,y:h.y-h.height}}else{d={align:"right",x:y+100,y:h.y+h.height}}_.maxX=y+100}M.push({id:"annotation_"+v,note:r,nodes:a,positionInfo:d})}}};if(typeof t=="string"){n(t)}if(t instanceof Object){for(var e in t){n(e+":"+t[e])}}});return _}var s=P.min(n.nodes,function(t){if(t.depth===0&&["LR","RL","H"].indexOf(w.layoutDirection)<0){return t.x-t.width/2+t.hgap+50}return t.x})-20;var c=P.min(n.nodes,function(t){if(t.depth===0&&["LR","RL","H"].indexOf(w.layoutDirection)>=0){return t.y-t.height/2-t.vgap}return t.y-t.vgap})-20;var f=P.max(n.nodes,function(t){if(t.depth===0&&["LR","RL","H"].indexOf(w.layoutDirection)<0){return t.x+t.width/2+20}return t.x+t.width-t.hgap/2})+20;var h=P.max(n.nodes,function(t){if(t.depth===0&&["LR","RL","H"].indexOf(w.layoutDirection)>=0){return t.y+t.height/2+t.vgap}return t.y+t.height})+20;var p=u(s,f,c,h);var d=p.maxY-p.minY+10;var v=p.maxX-p.minX+10;w.height=d;w.width=v;var g=Math.min(w.height/d,w.width/v,1);var y=[(w.width-v*g)/2-p.minX*g,(w.height-d*g)/2-p.minY*g];this.containerSvg.attr("style","max-width:"+v+"px;max-height:"+d+"px;").attr("viewBox","0 0 "+v+" "+d).attr("width","100%").attr("height","100%");this.updateZoom(y,g);var m=Math.ceil(v/_);var x=Math.ceil(d/_);this.render(t,n.nodes,n.links);return this},layout:function(i){if(i.linkShape!=="bracket"&&false){p(i.root)}var n=0;function e(n){var t=n.names;var e=t.map(function(t){return z(t,B(n,i))});var r=Math.max.apply(null,e);if(r<15){r=15}if(n.depth===0){r+=20}return r}function r(t,n){var e=t.names.length;var r=(z("M",B(t,n))+R)*e+20;if(r<10){r=10}if(t.depth===0){r+=20}if(t.depth===0&&r<60){r=60}return r}function a(t){if(t.depth===0){return 72}return 36}function o(t){return 18}var t=Hierarchy.compactBox(i.root,{direction:i.layoutDirection,getId:function(t){return t.id+""||"#"+ ++n},getWidth:function(t){if(t.depth===0){return e(t)+i.arrowGap*4}if(["LR","RL","H"].indexOf(i.layoutDirection)>=0){return e(t)}else{return r(t,i)}},getHeight:function(t){if(t.depth===0){return r(t,i)}if(["LR","RL","H"].indexOf(i.layoutDirection)>=0){return r(t,i)}else{return e(t)}},getVGap:function(t){if(t.depth===0){return o(t)}if(["LR","RL","H"].indexOf(i.layoutDirection)>=0){return o(t)}else{return a(t)}},getHGap:function(t){if(t.depth===0){return a(t)}if(["LR","RL","H"].indexOf(i.layoutDirection)>=0){return a(t)}else{return o(t)}}});var u=[];var s=[];function c(t,n){if(!t.children||t.children.length===0)return;function e(t,n){return P.mean(t,function(t){return t[n]})}var r=[];if(["V","H"].indexOf(n.layoutDirection)>=0){t.children.forEach(function(t){if(t.side==="right"){r.push(t)}})}else{r=t.children}if(r.length===0)return;if(["LR","RL","H"].indexOf(n.layoutDirection)>=0){t.y=e(r,"y")}else{t.x=e(r,"x")-54}}c(t,i);t.eachNode(function(n){n.children.forEach(function(t){s.push({source:n,target:t})});u.push(n)});return{nodes:u,links:s}},render:function(t,n,e){this.renderers[this.state.renderer].call(this,t,n,e)},renderers:{basic:function(t,n,e){var r=this.svg;r.append("defs").attr("xmlns","http://www.w3.org/2000/svg").html(function(){var t='<filter xmlns="http://www.w3.org/2000/svg" id="dropshadow" height="130%">';t+='      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/> ';t+='      <feOffset dx="2" dy="2" result="offsetblur"/> ';t+="      <feMerge> ";t+="        <feMergeNode/>";t+='        <feMergeNode in="SourceGraphic"/> ';t+="      </feMerge>";t+="    </filter>";t+='<filter id="editing-stripe-bk" filterUnits="userSpaceOnUse" x="-100%" y="-100%" width="300%" height="300%"><feFlood flood-color="#700f0f" result="flood1"></feFlood><feFlood flood-color="#fff" flood-opacity="0.5" result="flood2"></feFlood><feImage xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAwcHgiIGhlaWdodD0iMTAwMHB4Ij48ZGVmcz48cGF0dGVybiBpZD0icGF0dGVybiIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQiIGhlaWdodD0iNCI+PHBhdGggZD0iTSAtNCAtNCBMIDggOCBNIC04IC00IEwgNCA4IE0gLTQgLTggTCA4IDQiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+" x="0" y="0" width="2000" height="1000" result="image"></feImage><feTile in="image" result="tile"></feTile><feComposite operator="in" in="flood1" in2="tile" result="tile2"></feComposite><feGaussianBlur in="SourceAlpha" stdDeviation="10" result="blur"></feGaussianBlur><feComposite operator="in" in="tile2" in2="blur" result="cloud"></feComposite><feMorphology operator="dilate" radius="2" in="SourceAlpha" result="dilate"></feMorphology><feComposite operator="in" in="flood2" in2="dilate" result="base"></feComposite><feMerge><feMergeNode in="cloud"></feMergeNode><feMergeNode in="base"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter>';return t});var c=this.state;var s=this.helpers.color;var i=this.helpers.linkShape;var a=r.selectAll("g.markmap-node").data(n,function(t){return t.id||(t.id=++this.i)}.bind(this));var o=a.enter().append("g").attr("class",function(t){if(t.depth===0){return"markmap-node markmap-root-node"}else{return"markmap-node"}}).attr("transform",function(t){return"translate("+(t.x+t.hgap)+","+(t.y+t.vgap)+")"});var u=o.filter(function(t,n){return t.depth===0});var f=u.append("g").attr("transform",function(t){var n=0;var e=0;if(["LR","RL","H"].indexOf(c.layoutDirection)>=0){n=0+c.arrowGap;e=-((t.height-t.vgap*2)/2)+c.arrowGap}else{e=0+c.arrowGap;n=-((t.width-t.hgap*2)/2)+c.arrowGap}return"translate("+n+", "+e+")"});f.append("rect").attr("class","markmap-node-rect").attr("rx",10).attr("ry",10).attr("height",function(t){return t.height-t.vgap*2-c.arrowGap*2}).attr("width",function(t){return t.width-t.hgap*2-c.arrowGap*2}).attr("fill",function(t){return P.rgb(s(t.data.branch,t.data)).brighter(1.2)}).attr("stroke",function(t){return s(t.data.branch,t.data)}).attr("stroke-width",1);var l=f.filter(function(t,n){return!!t.data.link});var h=l.append("a").attr("xlink:href",function(t){return t.data.link});function p(t){if(c.fixForLink){t.append("switch").append("foreignObject").attr("pointer-events","all").attr("style","overflow:visible").attr("width",function(t){return t.width-t.hgap*2}).attr("y",function(t){if(t.depth===0){return(t.vgap+c.arrowGap)/2||0}if(["LR","RL","H"].indexOf(c.layoutDirection)>=0){return-(t.height-(t.vgap+c.arrowGap))/2||0}return 0}).attr("x",function(t){if(t.depth===0){return(t.hgap+c.arrowGap)/2-20||0}return 0}).attr("height",function(t){return 2*(t.height-t.vgap*2)}).append("div").attr("xmlns","http://www.w3.org/1999/xhtml").attr("class","xsj_foreignObject").style("visibility","hidden").style("display","inline-block").style("height","100%").style("width","100%").style("font",function(t){return B(t,c)}).append("a").attr("href",function(t){return t.data.link}).style("display","inline-block").style("height","100%").style("width","100%").html(function(t){var n=t.data.names;var e=n.map(function(t,n){return _escape(t)});return e.join("<br/>")})}}p(l);var d=f.filter(function(t,n){return!t.data.link});function v(t){t.append("text").attr("class","markmap-node-text").attr("alignment-baseline","middle").attr("x",function(t){return(t.width-t.hgap*2)/2}).attr("y",function(t){var n=t.data.names;if(n.length===1){return(t.height-t.vgap)/2}var e=(t.height-t.vgap*2-(z("M",B(t,c))+R)*(n.length-2))/2;return e}).attr("text-anchor",function(t){return"middle"}).html(function(t){var n=(t.width-t.hgap*2)/2;var e=t.data.names;if(e.length===1){return _escape(e[0])}resultHtmls=[];for(var r=0;r<e.length;r++){var i=e[r];i=_escape(i);var a=r;if(a>0){a=z("M",B(t,c))+R}resultHtmls.push("<tspan x='"+n+"' dy='"+a+"'>"+i+"</tspan>")}return resultHtmls.join("")}).style("font",function(t){return B(t,c)}).style("font-weight","bolder").style("cursor",function(t){if(!!t.data.link){return"pointer"}else{return""}}).style("fill-opacity",1).style("fill",function(t){var n=P.color(invert(s(t.data.branch,t.data),true));return n})}v(h);v(d);u.selectAll("polygon").data(function(n,t){var e=[c.layoutDirection];if(!n.children||n.children.length===0){e=[]}else{if(c.layoutDirection=="H"){if(n.children&&n.children.length>1){e=["LR","RL"]}else{e=["LR"]}}if(c.layoutDirection=="V"){if(n.children&&n.children.length>1){e=["TB","BT"]}else{e=["TB"]}}}return e.map(function(t){return{node:n,direction:t}})}).enter().insert("polygon",":first-child").attr("class","markmap-node-polygon").attr("stroke-width","0").style("fill",function(t){var n=t.node;return s(n.data.branch,n.data)}).attr("transform",function(t){var n=t.node;var e=0;var r=0;var i=t.direction;switch(i){case"RL":e=c.arrowGap;return"translate("+e+", "+r+")";case"TB":r=n.height-n.vgap*2-c.arrowGap;return"translate("+e+", "+r+") rotate(90)";case"BT":r=c.arrowGap;return"translate("+e+", "+r+") rotate(90)";default:e=n.width-n.hgap*2-c.arrowGap;return"translate("+e+", "+r+")"}}).attr("points",function(t){var n=t.node;var e=F(n);var r=c.arrowSharp;points=[[0,-e/2],[r,0],[0,e/2],[-r,0]];return points.map(function(t){return[t[0],t[1]].join(",")}).join(" ")});o=o.filter(function(t,n){return t.depth!==0});var g=o.filter(function(t){return!!t.data.link});var y=g.append("a").attr("xlink:href",function(t){return t.data.link});p(g);var m=o.filter(function(t){return!t.data.link});var x=o.filter(function(t){return t.data.important});function _(t){var n=t.append("text").attr("class","markmap-node-text").attr("y","-5").attr("filter",function(t){if(t.data.important){return null}else{return null}}).attr("text-anchor",function(t){return"start"}).html(function(t){var n=t.data.names;if(n.length===1){return _escape(n[0])}resultHtmls=[];var e=z("M",B(t,c))*n.length;for(var r=0;r<n.length;r++){var i=n[r];i=_escape(i);var a=r;a=a*(z("M",B(t,c))+R)-5;if(["LR","RL","H"].indexOf(c.layoutDirection)<0){a=e-a}if(["LR","RL","H"].indexOf(c.layoutDirection)>=0){resultHtmls.push("<tspan x='0' y='"+a+"'>"+i+"</tspan>")}else{resultHtmls.push("<tspan x='"+(a+10)+"' y='0'>"+i+"</tspan>")}}return resultHtmls.join("")}).attr("x",function(t){if(["LR","RL","H"].indexOf(c.layoutDirection)>=0){return 0}else{return 12}}).style("fill-opacity",1).style("font",function(t){return B(t,c)}).style("fill",function(t){return s(t.data.branch,t.data)}).style("stroke",function(t){return"white"}).style("stroke-width",function(t){return"2px"}).style("cursor",function(t){if(!!t.data.link){return"pointer"}else{return""}}).style("writing-mode",b);var e=n.clone(true);e.style("stroke",function(t){return""}).style("stroke-width",function(t){return""})}function w(t,u){t.append("g").html(function(t){var n=z("M",B(t,c));var e=12;var r=-5;var i=t.data.names.length*(n+R)+5;var a=t.width;if(["LR","RL","H"].indexOf(c.layoutDirection)>=0){e=0;r=r-R-n;a=a-t.hgap*2}else{e=0;if(t.data.names.length>1){e=12}a=i;i=t.height-t.vgap}var o=u.rectangle(e,r,a,i,{fill:P.color(s(t.data.branch,t.data)).brighter(.8),stroke:"none",fillStyle:"zigzag"});return o.innerHTML})}w(x,this.roughSvg);_(y);_(m);function b(t){if(["LR","RL","H"].indexOf(c.layoutDirection)>=0){return false}else{return"tb-rl"}}var M=r.selectAll("g.markmap-link").data(e,function(t){return t.target.id});linkEnter=M.enter().insert("g","g").attr("class","markmap-link").attr("style","fill:none;");linkEnter.append("path").attr("stroke",function(t){return s(t.target.data.branch,t.target.data)}).attr("stroke-width",function(t){return F(t.target)}).attr("d",function(t){return i(c,t)});linkEnter.append("polygon").attr("class","markmap-link-polygon").attr("stroke-width","0").style("fill",function(t){return"white"}).attr("transform",function(t){var n=t.source.x;var e=t.source.y;var r=D(c,t.target);switch(r){case"RL":n=t.source.x+t.source.hgap;return"translate("+n+", "+(e+t.source.vgap)+")";case"TB":e=t.source.y+t.source.height-t.source.vgap;return"translate("+(n+t.source.hgap)+", "+e+") rotate(90)";case"BT":e=t.source.y+t.source.vgap;return"translate("+(n+t.source.hgap)+", "+e+") rotate(90)";default:n=t.source.x+t.source.width-t.source.hgap;return"translate("+n+", "+(e+t.source.vgap)+")"}}).attr("points",function(t){var n=F(t.source);var e=c.arrowSharp;points=[[0,-n/2],[e,0],[0,n/2],[-e,0]];return points.map(function(t){return[t[0],t[1]].join(",")}).join(" ")});var k=linkEnter.append("g").attr("transform",function(t){var n=t.target;return"translate("+(n.x+n.hgap)+","+(n.y+n.vgap)+")"});k.append("path").attr("class","markmap-node-path").attr("d",function(t){var n=t.target;var e=D(c,n);var r=P.line();var i=0;var a=0;var o=0;var u=0;switch(e){case"BT":a=c.arrowGap;u=n.height-n.vgap*2;break;case"TB":u=n.height-n.vgap*2-c.arrowGap;break;case"RL":i=c.arrowGap;o=n.width-n.hgap*2;break;default:o=n.width-n.hgap*2-c.arrowGap}var s=[[i,a]];if(n.data.important){r=r.curve(P.curveCardinal);switch(e){case"BT":case"TB":s=P.range(a,u-4,4).map(function(t){return[Math.sin(t)*4,t]});break;default:s=P.range(i,o-4,4).map(function(t){return[t,Math.sin(t)*4]})}}s.push([o,u]);return r(s)}).attr("stroke-width",function(t){var n=t.target;if(n.data.important){return 6}return F(n)}).attr("stroke",function(t){var n=t.target;return s(n.data.branch,n.data)});k.append("polygon").attr("class","markmap-node-polygon").attr("stroke-width","0").style("fill",function(t){var n=t.target;return s(n.data.branch,n.data)}).attr("transform",function(t){var n=t.target;var e=0;var r=0;var i=D(c,n);switch(i){case"RL":e=c.arrowGap;return"translate("+e+", "+r+")";case"TB":r=n.height-n.vgap*2-c.arrowGap;return"translate("+e+", "+r+") rotate(90)";case"BT":r=c.arrowGap;return"translate("+e+", "+r+") rotate(90)";default:e=n.width-n.hgap*2-c.arrowGap;return"translate("+e+", "+r+")"}}).attr("points",function(t){var n=t.target;var e=F(n);var r=c.arrowSharp;points=[[0,-e/2],[r,0],[0,e/2],[-r,0]];return points.map(function(t){return[t[0],t[1]].join(",")}).join(" ")});var S=this.state.rangeNodeInfos||[];S=S.reverse();if(S&&S.length>0){var A=r.selectAll("g.range-node").data(S);var C=A.enter().insert("g","g").attr("class","range-node");C.append("path").attr("d",function(t){var n=P.line().curve(P.curveCatmullRomClosed);var e=t.rangeNodes.slice();var r=n(e);return r}).style("fill",function(t){var n=textures.paths().d("crosses").stroke(s(t.node.data.branch,t.node.data)).lighter();var e=P.color(invert(s(t.node.data.branch,t.node.data)));var n=textures.circles().lighter().complement().fill(e);r.call(n);return n.url()}).attr("stroke",function(t){var n=P.color(invert(s(t.node.data.branch,t.node.data)));return n})}var N=this.state.relationInfos||[];if(N&&N.length>0){var T=r.selectAll("g.relation-link").data(N);var E=T.enter().append("g").attr("class","relation-link");E.append("path").attr("id",function(t){return t.id}).attr("d",function(t){var n=P.line().curve(P.curveCatmullRom);function e(t){if(["V","TB","BT"].indexOf(c.layoutDirection)>=0){return[t.x+t.hgap,t.y+t.height/2]}return[t.x+t.width/2,t.y+t.vgap]}var r=e(c.mapNodeObj[1]);var i=e(t.startNode);var a=e(t.endNode);var o=(i[1]-a[1])*r[0]+(a[0]-i[0])*r[1]+i[0]*a[1]-a[0]*i[1];var u=60;if(o>0){u=-u}preStartVec=[i[0]+(a[0]-i[0])/4+u,i[1]+(a[1]-i[1])/4+u];sufEndVec=[i[0]+(a[0]-i[0])*3/4+u,i[1]+(a[1]-i[1])*3/4+u];var s=[i,preStartVec,sufEndVec,a];pathData=n([i,preStartVec,sufEndVec,a]);return pathData}).attr("stroke",function(t){return P.rgb(s(t.startNode.data.branch,t.startNode.data))}).attr("fill","none").attr("stroke-dasharray",4).attr("marker-end",function(n){if(n.direction!="normal"){r.append("svg:defs").append("svg:marker").attr("class","triangle").attr("id",function(t){return"relation_arrow_"+n.id}).attr("viewBox","0 -5 10 10").attr("refX",6).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","none").attr("stroke",function(){return P.rgb(s(n.startNode.data.branch,n.startNode.data))});return"url(#relation_arrow_"+n.id+")"}else{return null}});var j=E.filter(function(t){return!!t.note});j.append("text").append("textPath").attr("startOffset","50%").attr("text-anchor","middle").attr("fill",function(t){return P.rgb(s(t.startNode.data.branch,t.startNode.data))}).attr("href",function(t){return"#"+t.id}).text(function(t){return t.note})}var O=[];var L=this.state.annotationInfos||[];L.forEach(function(i,t){i.nodes.forEach(function(t,n){var e=t.x+t.width/2;var r=t.y+t.vgap;if(["V","TB","BT"].indexOf(c.layoutDirection)>=0){e=t.x+t.hgap;r=t.y+t.height/2}O.push({note:{title:!n?i.note:"",align:i.positionInfo.align,lineType:i.positionInfo.lineType,wrap:100},type:P.annotationCalloutCircle,subject:{radius:4,x1:e,x2:e+(t.width-t.hgap*2)/2,width:t.width-t.hgap*2,height:t.height-t.vgap*2},connector:{type:"curve",end:"arrow"},x:e,y:r,dx:i.positionInfo.x-e,dy:i.positionInfo.y-r})})});var I=P.annotation().type(P.annotationLabel).annotations(O);r.append("g").attr("class","annotation-group").call(I)}}});return m});function parseTxtMap(t){var n=t.split("\n");var e=[];for(var r=0;r<n.length;r++){var i=/^(\s*)(.+)$/.exec(n[r]);if(!i){continue}var a=i[1].length>0&&i[1][0]===" ";var o=i[1].length;if(a){o/=2}o+=1;e.push({depth:o,line:r+1,name:i[2]})}return e}function transformHeadings(t,n,e,r){var i={name:e||"root",depth:0,children:[]};var a=i;var o=[];var u;r=r||{};t.forEach(function(t,n){while(t.depth<a.depth+1){a=o.pop()}while(t.depth>a.depth+1){if(!a.children||a.children.length===0){u={name:"",depth:a.depth+1};a.children=a.children||[];a.children.push(u)}o.push(a);a=a.children[a.children.length-1]}a.children=a.children||[];a.children.push(t)});i=autoCollapse(i,0);if(!!n&&i.children.length===1){i=i.children[0];function s(t){t.depth=t.depth-1;if(t.children){for(var n=0;n<t.children.length;n++){var e=t.children[n];s(e)}}}s(i)}if(!!n&&i.name===""&&!!e){i.name=e}return i}function autoCollapse(t,n){t.depth-=n;if(t.children&&t.children.length===1&&t.children[0].autoCollapse){t.children=t.children[0].children;n+=1}if(t.children){t.children=t.children.map(function(t){if(t.autoCollapse&&t.children&&t.children.length===1){return autoCollapse(t.children[0],n+1)}return autoCollapse(t,n)})}if(t.autoCollapse){delete t.autoCollapse}return t}var App=function(){function t(t,n,e){var r=this;this._=e;this.signals=new Observable;this.on=this.signals.on;this.off=this.signals.off;var i=document.querySelector("body");var a=document.getElementById("linenumbers");var o=document.getElementById("linemarker");var u=document.getElementById("textarea");var s=document.getElementById("preview-container");var c=document.getElementById("canvas-panner");var f=document.getElementById("canvas-tools");this.editor=t.fromTextArea(u,{lineNumbers:true,scrollPastEnd:true,indentWithTabs:true,tabSize:4,indentUnit:4,mode:"nomnoml",matchBrackets:true,theme:"solarized light",keyMap:"sublime"});this.editor.on("drop",function(t,n){var e=n.dataTransfer.files;if(e[0].type=="image/svg+xml"){n.preventDefault();r.handleOpeningFiles(e)}});var l=this.editor.getWrapperElement();this.filesystem=new FileSystem;var h=new DevEnv(l,o,a);this.panner=new CanvasPanner(c,s,e.throttle);this.downloader=new DownloadLinks(s,n,e);new HoverMarker("canvas-mode",i,[c,f]);new Tooltips(document.getElementById("tooltip"),document.querySelectorAll(".tools a"));this.defaultSource=(document.getElementById("defaultGraph")||{innerHTML:""}).innerHTML;var p=null;var d=function(){p=null;r.filesystem.configureByRoute(location.hash);r.filesystem.storage.read().then(function(t){if(t===void 0){t=""}r.editor.setValue(t||r.defaultSource);r.sourceChanged()})};window.addEventListener("hashchange",function(){return d()});window.addEventListener("resize",e.throttle(function(){return r.panner.initPositionPreview()},750,{leading:true}));this.editor.on("changes",e.debounce(function(){return r.sourceChanged()},300));this.sourceChanged=function(){var v=function(t){if(t===void 0){t=""}var n=[];var e=[];t=t.replace(/[# ]/g,"");t=t.replace(/,{2,}/,",");if(!t){return null}if(t===","){return null}n=t.split(",");if(n.length===0){return null}n.forEach(function(t,n){if(t===void 0){t=""}if(n===void 0){n=0}if(/^#[0-9A-F]{6}$/i.test("#"+t)){e.push("#"+t)}});if(e.length===0){return null}else{return e}};var g=function(t){if(t===void 0){t=""}var n=[];var r=[];t=t.replace(/[ ]/g,"");if(!t){return}if(t===","){return}n=t.split(",");if(n.length===0){return}n.forEach(function(t,n){var e;e=parseInt(t);if(e){return r.push(e)}});if(r.length===0){return null}else{return r}};var n=function(t,n){var e='<svg id="markmap" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  version="1.1"></svg>';t.innerHTML=e;var r=n.split(/\n+-{3,}\n*/);n=r[0];var i=window.parseTxtMap(n);var a=window.transformHeadings(i,true);var o=r[1]||"";o=o.trim();var u={};var s={};try{s=window.jsyaml.safeLoad(o)}catch(t){console.log(t)}var u=Object.assign({},s,u);var c={preset:"colorful",linkShape:"diagonal",layoutDirection:"LR",fixForLink:false};var f=u.theme;if(f in["grays"]){c["color"]=f}var l=u.colors;if(l){l=v(l);if(l){c["colorSet"]=l}}var h=u.colorsMode;if(h){c["colorSetMode"]=h}var p=u.fontSizes;if(p){p=g(p);if(p){c["fontSizeSet"]=p}}var d=u.direction;if(/^(H|V|LR|RL|TB|BT)$/gi.test(d)){c["layoutDirection"]=d.toUpperCase()}c["importantPaths"]=u.importantPaths||[];c["importantNodes"]=u.importantNodes||[];c["rangeNodes"]=u.rangeNodes||[];c["annotations"]=u.annotations||[];c["relations"]=u.relations||[];window.markmap("#markmap",a,c)};try{h.clearState();var t=r.editor.getValue();n(s,t);p=t;r.panner.initPositionPreview();r.filesystem.storage.save(t);r.downloader.source=t;r.downloader.setFilename("text.mind");r.signals.trigger("source-changed",t)}catch(t){h.setError(t);if(p){n(s,p)}r.panner.initPositionPreview()}};d()}t.prototype.loadSvg=function(t){var n=(new DOMParser).parseFromString(t,"text/xml");if(n.getElementsByTagName("desc").length!==1){alert("SVG did not have mindmap code embedded within it.");return}var e=n.getElementsByTagName("desc")[0].childNodes[0].nodeValue;e=this._.unescape(e);this.editor.setValue(e)};t.prototype.currentSource=function(){return this.editor.getValue()};t.prototype.magnifyViewport=function(t){this.panner.magnify(t)};t.prototype.resetViewport=function(){this.panner.reset()};t.prototype.toggleSidebar=function(t){var n=["about","reference","export","files"];for(var e=0,r=n;e<r.length;e++){var i=r[e];if(t!==i)document.getElementById(i).classList.remove("visible")}document.getElementById(t).classList.toggle("visible")};t.prototype.discardCurrentGraph=function(){if(confirm("Do you want to discard current diagram and load the default example?")){this.editor.setValue(this.defaultSource);this.sourceChanged()}};t.prototype.saveViewModeToStorage=function(){var t="Do you want to overwrite the diagram in "+"localStorage with the currently viewed diagram?";if(confirm(t)){this.filesystem.moveToLocalStorage(this.currentSource());window.location.href="./"}};t.prototype.exitViewMode=function(){window.location.href="./"};t.prototype.handleOpeningFiles=function(t){var n=this;if(t.length!==1){alert("You can only upload one file at a time.");return}var e=new FileReader;e.onload=function(){return n.loadSvg(e.result)};e.readAsText(t[0])};return t}();var CanvasPanner=function(){function t(n,t,e){var r=this;this.previewElement=t;this.offset={x:0,y:0};this.zoomLevel=0;this.initZoomLevel=0;this.width=0;this.height=0;this.superSampling=window.devicePixelRatio||1;var i=false;function a(t){return t!=false}var o=function(t){if(a(i)){r.offset=nomnoml.skanaar.vector.diff({x:t.pageX,y:t.pageY},i);r.positionPreview()}};var u=function(){i=false;n.style.width="33%"};var s=function(t){var n=Math.min(0,r.initZoomLevel)-10;var e=Math.max(0,r.initZoomLevel)+10;r.zoomLevel=Math.max(Math.min(e,r.zoomLevel-(t.deltaY<0?-1:1)),n);r.positionPreview()};var c=function(t){n.style.width="100%";i=nomnoml.skanaar.vector.diff({x:t.pageX,y:t.pageY},r.offset)};n.addEventListener("mousedown",c);n.addEventListener("mouseup",u);n.addEventListener("mouseleave",u);n.addEventListener("wheel",e(s,50),{passive:true});n.addEventListener("mousemove",e(o,50),{passive:true})}t.prototype.initPositionPreview=function(){var t=window;var n=this.previewElement.firstElementChild;var e=n.getAttribute("viewBox");var r=e.split(" ");this.width=parseInt(r[2])||1;this.height=parseInt(r[3])||1;this.initZoomLevel=Math.log(Math.min(t.innerWidth/this.width,t.innerHeight/this.height))*10;if(this.initZoomLevel<0&&this.zoomLevel===0){this.zoomLevel=this.initZoomLevel}this.positionPreview()};t.prototype.positionPreview=function(){var t=window;var n=this.width*this.zoom();var e=this.height*this.zoom();n=n/this.superSampling;e=e/this.superSampling;this.previewElement.style.top=300*(1-e/t.innerHeight)+this.offset.y+"px";this.previewElement.style.left=150+(t.innerWidth-n)/2+this.offset.x+"px";this.previewElement.style.width=n+"px";this.previewElement.style.height=e+"px"};t.prototype.zoom=function(){return this.superSampling*Math.exp(this.zoomLevel/10)};t.prototype.magnify=function(t){this.zoomLevel=Math.min(10,this.zoomLevel+t);this.positionPreview()};t.prototype.reset=function(){if(this.zoomLevel===this.initZoomLevel){this.zoomLevel=0}else{this.zoomLevel=this.initZoomLevel}this.offset={x:0,y:0};this.positionPreview()};return t}();var DevEnv=function(){function t(t,n,e){this.editor=t;this.marker=n;this.lineNumbers=e}t.prototype.clearState=function(){this.marker.style.top="-30px";this.lineNumbers.classList.remove("error")};t.prototype.setError=function(t){this.lineNumbers.classList.add("error");var n=t.message.match("line ([0-9]*)");if(n){var e=window.getComputedStyle(this.editor).lineHeight;var r=parseFloat(e)||12;this.marker.style.top=3+r*+n[1]+"px"}else{throw t}};return t}();var base642Blob=function(t,n){var e,r,i,a,o,u,s,c,f,l,h,p;n=n||"";h=1024;a=atob(t);u=a.length;p=Math.ceil(u/h);i=new Array(p);l=0;while(l<p){e=l*h;s=Math.min(e+h,u);o=new Array(s-e);f=e;c=0;while(f<s){o[c]=a[f].charCodeAt(0);++c;++f}i[l]=new Uint8Array(o);l++}r=new Blob(i,{type:n});return r};var DownloadLinks=function(){function t(t,n,e){this.previewElement=t;this.saveAs=n;this._=e;this.filename="graph";this.source=""}t.prototype.jpgDownload=function(){var t=this.previewElement.firstElementChild;var n=this;window.saveSvgAsJpg(t,null,this.filename+".jpg",1,function(t){n.saveAs(base642Blob(t.split(",")[1],"image/jpeg"),n.filename+".jpg")})};t.prototype.pngDownload=function(){var t=this.previewElement.firstElementChild;var n=this;window.saveSvgAsPng(t,null,this.filename+".png",1,function(t){n.saveAs(base642Blob(t.split(",")[1],"image/png"),n.filename+".png")})};t.prototype.svgDownload=function(){var t=this.previewElement.firstElementChild.cloneNode(true);var n=document.createElement("desc");n.innerHTML=this._.escape(this.source);t.prepend(n);var e=t.getAttribute("viewBox");var r=e.split(" ");var i=parseInt(r[2]);var a=parseInt(r[3]);t.setAttribute("width",i+"px");t.setAttribute("height",a+"px");this.saveAs(new Blob([t.outerHTML],{type:"image/svg+xml"}),this.filename+".svg")};t.prototype.srcDownload=function(){var t=this.source;this.saveAs(new Blob([t],{type:"text/txt"}),this.filename+".txt")};t.prototype.setFilename=function(t){t=t||"graph";this.filename=t};return t}();var __extends=this&&this.__extends||function(){var r=function(t,n){r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)if(n.hasOwnProperty(e))t[e]=n[e]};return r(t,n)};return function(t,n){r(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}}();var FileSystem=function(){function t(){this.signals=new Observable;this.on=this.signals.on;this.off=this.signals.off;this.storage=new DefaultGraphStore}t.prototype.files=function(){return JSON.parse(localStorage["nomnoml.file_index"]||"[]")};t.prototype.setFiles=function(t){localStorage["nomnoml.file_index"]=JSON.stringify(t);this.signals.trigger("updated")};t.prototype.moveToFileStorage=function(t,n){var e={name:t,date:(new Date).toISOString(),backingStore:"local_file"};var r=this.files();r.push(e);r.sort(function(t,n){return t.name.localeCompare(n.name)});localStorage["nomnoml.file_index"]=JSON.stringify(r);var i=new LocalFileGraphStore(e.name);i.save(n);this.signals.trigger("updated")};t.prototype.moveToLocalStorage=function(t){this.storage=new DefaultGraphStore;this.storage.save(t)};t.prototype.discard=function(n){var t=new LocalFileGraphStore(n.name);t.clear();this.setFiles(this.files().filter(function(t){return t.name!=n.name}));this.signals.trigger("updated")};t.prototype.configureByRoute=function(t){var n=Route.from(t);this.storage=this.routedStorage(n);this.activeFile=nomnoml.skanaar.find(this.files(),function(t){return t.name===n.path})||{name:n.path,date:(new Date).toISOString(),backingStore:"local_file"};this.signals.trigger("updated")};t.prototype.routedStorage=function(t){if(t.context==="view"){return new UrlGraphStore(decodeURIComponent(t.path))}if(t.context==="id"){return new RemoteGraphStore(t.path)}if(t.context==="file"){return new LocalFileGraphStore(t.path)}return new DefaultGraphStore};return t}();var LocalGraphStore=function(){function t(t){this.key=t}t.prototype.read=function(){return Promise.resolve(localStorage[this.key])};t.prototype.save=function(t){localStorage[this.key]=t};t.prototype.clear=function(){localStorage.removeItem(this.key)};return t}();var LocalFileGraphStore=function(e){__extends(t,e);function t(t){var n=e.call(this,"nomnoml.files/"+t)||this;n.kind="local_file";return n}return t}(LocalGraphStore);var DefaultGraphStore=function(n){__extends(t,n);function t(){var t=n.call(this,"nomnoml.lastSource")||this;t.kind="local_default";return t}return t}(LocalGraphStore);var UrlGraphStore=function(){function t(t){this.source=t;this.kind="url"}t.prototype.read=function(){return Promise.resolve(this.source)};t.prototype.save=function(t){};t.prototype.clear=function(){};return t}();var RemoteGraphStore=function(){function t(t){this.source=t;this.kind="cloud"}t.prototype.read=function(){return fetch("datas/"+this.source).then(function(t){return t.text()}).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})};t.prototype.save=function(t){};t.prototype.clear=function(){};return t}();var HoverMarker=function(){function t(n,e,t){function r(t){return function(){if(t)e.classList.add(n);else e.classList.remove(n)}}for(var i=0,a=t;i<a.length;i++){var o=a[i];o.addEventListener("mouseenter",r(true));o.addEventListener("mouseleave",r(false))}}return t}();var Observable=function(){function t(){this.callbacks={}}t.prototype.on=function(t,n){if(!this.callbacks[t]){this.callbacks[t]=[]}this.callbacks[t].push(n)};t.prototype.off=function(t,n){var e=this.callbacks[t];if(e){var r=e.indexOf(n);if(r!==-1)e.splice(r,1);if(e.length===0)delete this.callbacks[t]}};t.prototype.trigger=function(t){var n=[];for(var e=1;e<arguments.length;e++){n[e-1]=arguments[e]}var r=this.callbacks[t];if(r)r.forEach(function(t){return t.apply(null,n)})};return t}();var Route=function(){function e(t,n){this.context=t;this.path=n}e.from=function(t){var n=t.indexOf("/");if(t[0]=="#"&&n>-1){return{context:e.urlDecode(t.substr(1,n-1)),path:e.urlDecode(t.substr(n+1))}}return{context:null,path:null}};e.urlEncode=function(t){return encodeURIComponent(t).replace(/'/g,"%27").replace(/"/g,"%22")};e.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))};return e}();var Tooltips=function(){function t(n,t){for(var e=0;e<t.length;e++){r(t[e])}function r(t){t.onmouseover=function(){n.textContent=t.getAttribute("title")};t.onmouseout=function(){n.textContent=""}}}return t}();function Datas(t,n){return new Vue({el:t,data:{items:[]},mounted:function(){var t=["Design and the design process.txt","Digital Education Futures.txt"];this.items=t.map(function(t){return{id:Route.urlEncode(t),name:t.replace(/\.txt$/,"")||"example"}})}})}function ensureType(n,t){if(Array.isArray(n)){if(Array.isArray(t)){if(n.length==0){return t}else{return t.map(function(t){return ensureType(n[0],t)}).filter(function(t){return t!==undefined})}}else{return undefined}}if("number"==typeof n){return"number"==typeof t?t:undefined}if("string"==typeof n){return"string"==typeof t?t:undefined}if("boolean"==typeof n){return"boolean"==typeof t?t:undefined}if("object"==typeof n){if("object"==typeof t){for(var e in n){if(ensureType(n[e],t[e])===undefined)return undefined}return t}}return undefined}function assert(n){return{equal:function(t){equal(n,t)}}}function equal(t,n){if(t===n)return;var e=JSON.stringify(t);var r=JSON.stringify(n);if(e!==r)throw new Error(e+" != "+r)}function test_ensureType(){assert(ensureType([],[])).equal([]);assert(ensureType([],[0])).equal([0]);assert(ensureType([0],[])).equal([]);assert(ensureType([0],[0])).equal([0]);assert(ensureType({a:""},{a:""})).equal({a:""});assert(ensureType({a:""},{a:0})).equal(undefined);assert(ensureType([{a:""}],[{a:0}])).equal([])}function ExportMenu(t,e){return new Vue({el:t,data:{shareLink:""},mounted:function(){var n=this;e.signals.on("source-changed",function(t){return n.onSourceChange(t)});e.filesystem.signals.on("updated",function(t){return n.$forceUpdate()})},methods:{downloadPng:function(){e.downloader.pngDownload()},downloadJpg:function(){e.downloader.jpgDownload()},downloadSvg:function(){e.downloader.svgDownload()},downloadSrc:function(){e.downloader.srcDownload()},onSourceChange:function(t){this.shareLink="#view/"+Route.urlEncode(t)}}})}function FileMenu(t,e){return new Vue({el:t,data:{source:""},mounted:function(){var n=this;e.signals.on("source-changed",function(t){return n.onSourceChange(t)});e.filesystem.signals.on("updated",function(t){return n.$forceUpdate()})},methods:{items:function(){return e.filesystem.files()},isActive:function(t){return this.isLocalFile()&&e.filesystem.activeFile.name===t.name},isLocalFile:function(){return e.filesystem.storage.kind==="local_file"},isAtHome:function(){return e.filesystem.storage.kind==="local_default"},itemPath:function(t){return"#file/"+encodeURIComponent(t.name).replace(/%20/g,"+")},discard:function(t){if(confirm('Permanently delete "'+t.name+'"'))e.filesystem.discard(t)},saveAs:function(){var n=prompt("Name your diagram");if(n){if(e.filesystem.files().some(function(t){return t.name===n})){alert("A file named "+n+" already exists.");return}e.filesystem.moveToFileStorage(n,e.currentSource());location.href="#file/"+encodeURIComponent(n)}},loadSvg:function(t){var n=t.target.files;e.handleOpeningFiles(n)},onSourceChange:function(t){this.source=t}}})}var icon=function(){var n={"link-outline":'<path d="M17.5 6c.3 0 .6.1.8.3.4.5.4 1.1 0 1.6l-1.7 1.7.3.3c.5.6.9 1.4.9 2.2s-.4 1.6-1 2.2l-4.1 4.2c-.6.5-1.4.9-2.2.9s-1.6-.4-2.2-1l-.3-.2-1.7 1.7a1 1 0 0 1-1.6 0c-.4-.5-.4-1.1 0-1.6l1.7-1.7-.3-.3c-.5-.6-.9-1.4-.9-2.2s.4-1.6 1-2.2l4.1-4.2c.6-.5 1.4-.8 2.2-.8s1.6.3 2.2.8l.3.3 1.7-1.7c.2-.2.5-.3.8-.3m0-2a3 3 0 0 0-2.2 1l-.5.4a5.2 5.2 0 0 0-5.9 1l-4.2 4a5 5 0 0 0-1 6l-.4.5a3 3 0 0 0 0 4.4 3 3 0 0 0 4.4 0l.5-.5a5 5 0 0 0 5.9-1l4.2-4a5 5 0 0 0 1-6l.4-.5a3 3 0 0 0 0-4.4 3 3 0 0 0-2.2-.9zm-6.1 7.2a2 2 0 0 0 2 2L11.6 15a2 2 0 0 0-2-2l1.8-1.8M12.5 9c-.2 0-.5.1-.6.3l-4.2 4.2c-.2.1-.3.4-.3.6 0 .2.1.5.3.6l.3.3.7-.7a1 1 0 0 1 1.6 0c.4.5.4 1.1 0 1.6l-.7.7.3.3c.1.2.4.3.6.3l.6-.3 4.2-4.2c.2-.1.3-.4.3-.6 0-.2-.1-.5-.3-.6l-.3-.3-.7.7a1 1 0 0 1-1.6 0c-.4-.5-.4-1.1 0-1.6l.7-.7-.3-.3a.9.9 0 0 0-.6-.3z"/>',"camera-outline":'<path d="M19 20h-14c-1.6 0-3-1.3-3-3v-8c0-1.6 1.3-3 3-3h1.5l1-1c.5-.5 1.5-1 2.4-1h4c.8 0 1.8.4 2.4 1l1 1h1.5c1.6 0 3 1.3 3 3v8c0 1.6-1.3 3-3 3zm-14-12c-.5 0-1 .4-1 1v8c0 .5.4 1 1 1h14c.5 0 1-.4 1-1v-8c0-.5-.4-1-1-1h-2c-.2 0-.52-.1-.7-.2l-1.2-1.2c-.2-.2-.7-.4-1-.4h-4c-.2 0-.7.2-1 .4l-1.2 1.2c-.1.1-.4.2-.7.2h-2zM12 10c1.3 0 2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5-2.5-1.1-2.5-2.5 1.1-2.5 2.5-2.5m0-1c-1.9 0-3.5 1.5-3.5 3.5 0 1.9 1.5 3.5 3.5 3.5s3.5-1.5 3.5-3.5c0-1.9-1.5-3.5-3.5-3.5zM18 8.6c-.7 0-1.3.5-1.3 1.3s.5 1.2 1.3 1.2 1.3-.58 1.3-1.2-.5-1.3-1.3-1.3z"/>',"image-outline":'<path d="M8.5 7.9c.8 0 1.5.6 1.5 1.5s-.6 1.5-1.5 1.5-1.5-.6-1.5-1.5.6-1.5 1.5-1.5m0-1c-1.3 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5-1.1-2.5-2.5-2.5zM16 11.9c.45.0 1.27 1.8 1.7 4.0h-11.3c.4-1.0 1.0-2.0 1.6-2.0.8 0 1.1.1 1.53.42.4.2 1.0.58 1.97.58 1.1 0 1.9-.8 2.6-1.6.6-.6 1.2-1.3 1.8-1.3m0-1c-2 0-3 3-4.5 3s-1.4-1-3.5-1c-2 0-3.0 4-3.0 4h14.0s-1-6-3-6zM22 6c0-1.1-.8-2-2-2h-16c-1.1 0-2 .8-2 2v12c0 1.1.8 2 2 2h16c1.1 0 2-.8 2-2v-12zm-2 12h-16v-12h16.0l-.0 12z"/>',"download-outline":'<path d="M20.9 17c0-.1-.0-.2-.0-.3l-2-6c-.1-.4-.5-.6-.9-.6h-.5l.6-.6c1.17-1.17 1.17-3.0 0-4.2-.81-.8-2.0-1.0-3.1-.7v-1.3c0-1.6-1.3-3-3-3s-3 1.3-3 3v1.3c-1.0-.3-2.3-.1-3.1.7-1.17 1.17-1.17 3.0.0 4.2l.68.6h-.5c-.4 0-.8.2-.9.6l-2 6c-.0.1-.0.2-.0.3-.0 0-.0 5-.0 5 0 .5.4 1 1 1h16c.5 0 1-.4 1-1 0 0 0-5-.0-5zm-13.6-10.5c.1-.1.4-.2.7-.2s.5.1.7.2l2.2 2.2v-5.7c0-.5.4-1 1-1s1 .4 1 1v5.7l2.2-2.2c.3-.3 1.0-.3 1.4 0 .3.39.3 1.0.0 1.4l-4.7 4.6-4.7-4.6c-.3-.3-.3-1.0 0-1.4zm-.5 5.5h1.8l3.4 3.41 3.4-3.41h1.8l1.6 5h-13.8l1.6-5zm12.2 9h-14v-3h14v3z"/>',"document-add":'<path d="M15 12h-2v-2c0-.5-.4-1-1-1s-1 .4-1 1v2h-2c-.5 0-1 .4-1 1s.4 1 1 1h2v2c0 .5.4 1 1 1s1-.4 1-1v-2h2c.5 0 1-.4 1-1s-.4-1-1-1zM19.7 7.2l-4-4c-.1-.1-.4-.2-.7-.2h-8c-1.6 0-3 1.3-3 3v12c0 1.6 1.3 3 3 3h10c1.6 0 3-1.3 3-3v-10c0-.2-.1-.52-.2-.7zm-2.1.7h-1.0c-.8 0-1.5-.6-1.5-1.5v-1.0l2.5 2.5zm-.5 11h-10c-.5 0-1-.4-1-1v-12c0-.5.4-1 1-1h7v1.5c0 1.3 1.1 2.5 2.5 2.5h1.5v9c0 .5-.4 1-1 1z"/>',"home-outline":'<path d="M22.2 10.4c-3.39-2.8-9.5-8.1-9.6-8.2l-.6-.5-.6.5c-.0.0-6.2 5.3-9.66 8.2-.4.3-.6.9-.6 1.5 0 1.1.8 2 2 2h1v6c0 1.1.8 2 2 2h12c1.1 0 2-.8 2-2v-6h1c1.1 0 2-.8 2-2 0-.5-.2-1.1-.7-1.5zm-8.2 9.5h-4v-5h4v5zm4-8l.0 8h-3.0v-6h-6v6h-3v-8h-3.0c2.7-2.3 7.3-6.2 9.0-7.68 1.6 1.4 6.2 5.3 9 7.6l-3-.0z"/>'};return Vue.component("icon",{data:function(){return{svg:""}},props:["id"],mounted:function(){var t='<svg version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">';this.svg=t+n[this.id]+"</svg>"},template:'<i v-html="svg"></i>'})}();function StorageTools(t,e){return new Vue({el:t,mounted:function(){var n=this;e.filesystem.signals.on("updated",function(t){return n.$forceUpdate()})},methods:{isReadOnlyStorage:function(){return e.filesystem.storage.kind=="url"||e.filesystem.storage.kind=="cloud"},isLocalFileStorage:function(){return e.filesystem.storage.kind=="local_file"},saveViewModeToStorage:function(){e.saveViewModeToStorage()}}})}var nomnoml;(function(t){var n;(function(e){e.vector={dist:function(t,n){return e.vector.mag(e.vector.diff(t,n))},add:function(t,n){return{x:t.x+n.x,y:t.y+n.y}},diff:function(t,n){return{x:t.x-n.x,y:t.y-n.y}},mult:function(t,n){return{x:n*t.x,y:n*t.y}},mag:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},normalize:function(t){return e.vector.mult(t,1/e.vector.mag(t))},rot:function(t){return{x:t.y,y:-t.x}}}})(n=t.skanaar||(t.skanaar={}))})(nomnoml||(nomnoml={}));var nomnoml;(function(t){var n;(function(u){function t(n){switch(typeof n){case"undefined":return function(t){return t};case"string":return function(t){return t[n]};case"number":return function(t){return t[n]};case"function":return n}}u.plucker=t;function n(t,n){var e=u.plucker(n);var r=e(t[0]);for(var i=0;i<t.length;i++){var a=e(t[i]);r=a>r?a:r}return r}u.max=n;function e(t,n){var e=u.plucker(n);for(var r=0,i=0,a=t.length;r<a;r++)i+=e(t[r]);return i}u.sum=e;function r(t){var n=[];for(var e=0;e<t.length;e++)n=n.concat(t[e]);return n}u.flatten=r;function i(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return t[e];return undefined}u.find=i;function a(t){return t[t.length-1]}u.last=a;function o(t,n){if(n==="")return true;if(!t)return false;return t.indexOf(n)!==-1}u.hasSubstring=o;function s(t){var n=[];for(var e=1;e<arguments.length;e++){n[e-1]=arguments[e]}var r=t.split("#");var i=[r[0]];for(var a=0;a<r.length-1;a++){i.push(n[a]||"");i.push(r[a+1])}return i.join("")}u.format=s;function c(t,n){function e(t,n){for(var e in n)t[e]=n[e]}var r={};e(r,t);e(r,n);return r}u.merged=c;function f(t,n){var e={};for(var r=0;r<t.length;r++)e[t[r][n]]=t[r];return e}u.indexBy=f;function l(t,n){var e={};var r=u.plucker(n);var i=[];for(var a=0;a<t.length;a++){var o=r(t[a]);if(!e[o]){e[o]=true;i.push(t[a])}}return i}u.uniqueBy=l})(n=t.skanaar||(t.skanaar={}))})(nomnoml||(nomnoml={}));